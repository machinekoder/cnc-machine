   1              		.syntax unified
   2              		.cpu cortex-m3
   3              		.fpu softvfp
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 6
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.thumb
  14              		.file	"os_csp.c"
  15              		.text
  16              	.Ltext0:
  17              		.cfi_sections	.debug_frame
  18              		.align	2
  19              		.global	OS_CSP_TickInit
  20              		.thumb
  21              		.thumb_func
  23              	OS_CSP_TickInit:
  24              	.LFB0:
  25              		.file 1 "Libraries/uC-CSP/os_csp.c"
   1:Libraries/uC-CSP/os_csp.c **** /*
   2:Libraries/uC-CSP/os_csp.c **** ***************************************************************************************************
   3:Libraries/uC-CSP/os_csp.c **** *                                                      uC/OS-III
   4:Libraries/uC-CSP/os_csp.c **** *                                                The Real-Time Kernel
   5:Libraries/uC-CSP/os_csp.c **** *
   6:Libraries/uC-CSP/os_csp.c **** *
   7:Libraries/uC-CSP/os_csp.c **** *                                      (c) Copyright 2009, Micrium, Weston, FL
   8:Libraries/uC-CSP/os_csp.c **** *                                                 All Rights Reserved
   9:Libraries/uC-CSP/os_csp.c **** *
  10:Libraries/uC-CSP/os_csp.c **** *                                            ARM Cortex M3 OS Chip Support
  11:Libraries/uC-CSP/os_csp.c **** *                                                      Generic
  12:Libraries/uC-CSP/os_csp.c **** * 
  13:Libraries/uC-CSP/os_csp.c **** * File      : OS_CPU.C
  14:Libraries/uC-CSP/os_csp.c **** * Version   : V3.01.1
  15:Libraries/uC-CSP/os_csp.c **** * By        : JJL
  16:Libraries/uC-CSP/os_csp.c **** *             FT
  17:Libraries/uC-CSP/os_csp.c **** * For       : ARMv7M Cortex-M3
  18:Libraries/uC-CSP/os_csp.c **** * Mode      : Thumb2
  19:Libraries/uC-CSP/os_csp.c **** ***************************************************************************************************
  20:Libraries/uC-CSP/os_csp.c **** */
  21:Libraries/uC-CSP/os_csp.c **** 
  22:Libraries/uC-CSP/os_csp.c **** #define  OS_CSP_GLOBALS
  23:Libraries/uC-CSP/os_csp.c **** #include <os.h>
  24:Libraries/uC-CSP/os_csp.c **** #include <csp.h>
  25:Libraries/uC-CSP/os_csp.c **** 
  26:Libraries/uC-CSP/os_csp.c **** 
  27:Libraries/uC-CSP/os_csp.c **** /*$PAGE*/
  28:Libraries/uC-CSP/os_csp.c **** /*
  29:Libraries/uC-CSP/os_csp.c **** ***************************************************************************************************
  30:Libraries/uC-CSP/os_csp.c **** *                                            LOCAL DEFINES
  31:Libraries/uC-CSP/os_csp.c **** ***************************************************************************************************
  32:Libraries/uC-CSP/os_csp.c **** */
  33:Libraries/uC-CSP/os_csp.c **** 
  34:Libraries/uC-CSP/os_csp.c **** 
  35:Libraries/uC-CSP/os_csp.c **** /*
  36:Libraries/uC-CSP/os_csp.c **** ***************************************************************************************************
  37:Libraries/uC-CSP/os_csp.c **** *                                           LOCAL CONSTANTS
  38:Libraries/uC-CSP/os_csp.c **** ***************************************************************************************************
  39:Libraries/uC-CSP/os_csp.c **** */
  40:Libraries/uC-CSP/os_csp.c **** 
  41:Libraries/uC-CSP/os_csp.c **** 
  42:Libraries/uC-CSP/os_csp.c **** /*
  43:Libraries/uC-CSP/os_csp.c **** ***************************************************************************************************
  44:Libraries/uC-CSP/os_csp.c **** *                                          LOCAL DATA TYPES
  45:Libraries/uC-CSP/os_csp.c **** ***************************************************************************************************
  46:Libraries/uC-CSP/os_csp.c **** */
  47:Libraries/uC-CSP/os_csp.c **** 
  48:Libraries/uC-CSP/os_csp.c **** 
  49:Libraries/uC-CSP/os_csp.c **** /*
  50:Libraries/uC-CSP/os_csp.c **** ***************************************************************************************************
  51:Libraries/uC-CSP/os_csp.c **** *                                            LOCAL TABLES
  52:Libraries/uC-CSP/os_csp.c **** ***************************************************************************************************
  53:Libraries/uC-CSP/os_csp.c **** */
  54:Libraries/uC-CSP/os_csp.c **** 
  55:Libraries/uC-CSP/os_csp.c **** 
  56:Libraries/uC-CSP/os_csp.c **** /*
  57:Libraries/uC-CSP/os_csp.c **** ***************************************************************************************************
  58:Libraries/uC-CSP/os_csp.c **** *                                       LOCAL GLOBAL VARIABLES
  59:Libraries/uC-CSP/os_csp.c **** ***************************************************************************************************
  60:Libraries/uC-CSP/os_csp.c **** */
  61:Libraries/uC-CSP/os_csp.c **** 
  62:Libraries/uC-CSP/os_csp.c **** 
  63:Libraries/uC-CSP/os_csp.c **** /*
  64:Libraries/uC-CSP/os_csp.c **** ***************************************************************************************************
  65:Libraries/uC-CSP/os_csp.c **** *                                      LOCAL FUNCTION PROTOTYPES
  66:Libraries/uC-CSP/os_csp.c **** ***************************************************************************************************
  67:Libraries/uC-CSP/os_csp.c **** */
  68:Libraries/uC-CSP/os_csp.c **** 
  69:Libraries/uC-CSP/os_csp.c **** 
  70:Libraries/uC-CSP/os_csp.c **** /*
  71:Libraries/uC-CSP/os_csp.c **** ***************************************************************************************************
  72:Libraries/uC-CSP/os_csp.c **** *                                     LOCAL CONFIGURATION ERRORS
  73:Libraries/uC-CSP/os_csp.c **** ***************************************************************************************************
  74:Libraries/uC-CSP/os_csp.c **** */
  75:Libraries/uC-CSP/os_csp.c **** 
  76:Libraries/uC-CSP/os_csp.c **** 
  77:Libraries/uC-CSP/os_csp.c **** 
  78:Libraries/uC-CSP/os_csp.c **** /*$PAGE*/
  79:Libraries/uC-CSP/os_csp.c **** /*
  80:Libraries/uC-CSP/os_csp.c **** ***************************************************************************************************
  81:Libraries/uC-CSP/os_csp.c **** *                                                INITIALIZE TICKER INTERRUPT
  82:Libraries/uC-CSP/os_csp.c **** *
  83:Libraries/uC-CSP/os_csp.c **** * Description: Initialize the the Tick Interrupt.
  84:Libraries/uC-CSP/os_csp.c **** *
  85:Libraries/uC-CSP/os_csp.c **** * Arguments  : none.
  86:Libraries/uC-CSP/os_csp.c **** *
  87:Libraries/uC-CSP/os_csp.c **** * Note(s)    : (1) This function MUST be called after OSStart() & after processor initialization.
  88:Libraries/uC-CSP/os_csp.c **** ***************************************************************************************************
  89:Libraries/uC-CSP/os_csp.c **** */
  90:Libraries/uC-CSP/os_csp.c **** 
  91:Libraries/uC-CSP/os_csp.c **** void  OS_CSP_TickInit (void)
  92:Libraries/uC-CSP/os_csp.c **** {
  26              		.loc 1 92 0
  27              		.cfi_startproc
  28              		@ args = 0, pretend = 0, frame = 8
  29              		@ frame_needed = 1, uses_anonymous_args = 0
  30 0000 80B5     		push	{r7, lr}
  31              	.LCFI0:
  32              		.cfi_def_cfa_offset 8
  33              		.cfi_offset 14, -4
  34              		.cfi_offset 7, -8
  35 0002 82B0     		sub	sp, sp, #8
  36              	.LCFI1:
  37              		.cfi_def_cfa_offset 16
  38 0004 00AF     		add	r7, sp, #0
  39              	.LCFI2:
  40              		.cfi_def_cfa_register 7
  93:Libraries/uC-CSP/os_csp.c ****     CPU_INT32U  cnts;
  94:Libraries/uC-CSP/os_csp.c ****     CPU_INT32U  cpu_freq;
  95:Libraries/uC-CSP/os_csp.c ****     
  96:Libraries/uC-CSP/os_csp.c ****     
  97:Libraries/uC-CSP/os_csp.c ****     cpu_freq = CSP_PM_CPU_ClkFreqGet();                         /* Get the CPU clock               
  41              		.loc 1 97 0
  42 0006 FFF7FEFF 		bl	CSP_PM_CPU_ClkFreqGet
  43 000a 7860     		str	r0, [r7, #4]
  98:Libraries/uC-CSP/os_csp.c ****     cnts     = (cpu_freq / OSCfg_TickRate_Hz);                  /* Calculate the number of SysTick 
  44              		.loc 1 98 0
  45 000c 40F20003 		movw	r3, #:lower16:OSCfg_TickRate_Hz
  46 0010 C0F20003 		movt	r3, #:upper16:OSCfg_TickRate_Hz
  47 0014 1B68     		ldr	r3, [r3, #0]
  48 0016 7A68     		ldr	r2, [r7, #4]
  49 0018 B2FBF3F3 		udiv	r3, r2, r3
  50 001c 3B60     		str	r3, [r7, #0]
  99:Libraries/uC-CSP/os_csp.c **** 
 100:Libraries/uC-CSP/os_csp.c ****     OS_CPU_SysTickInit(cnts);                                   /* Call the Generic OS Systick init
  51              		.loc 1 100 0
  52 001e 3868     		ldr	r0, [r7, #0]
  53 0020 FFF7FEFF 		bl	OS_CPU_SysTickInit
 101:Libraries/uC-CSP/os_csp.c **** }
  54              		.loc 1 101 0
  55 0024 07F10807 		add	r7, r7, #8
  56 0028 BD46     		mov	sp, r7
  57 002a 80BD     		pop	{r7, pc}
  58              		.cfi_endproc
  59              	.LFE0:
  61              		.align	2
  62              		.global	OS_CPU_IntHandler
  63              		.thumb
  64              		.thumb_func
  66              	OS_CPU_IntHandler:
  67              	.LFB1:
 102:Libraries/uC-CSP/os_csp.c **** 
 103:Libraries/uC-CSP/os_csp.c **** 
 104:Libraries/uC-CSP/os_csp.c **** /*$PAGE*/
 105:Libraries/uC-CSP/os_csp.c **** /*
 106:Libraries/uC-CSP/os_csp.c **** ***************************************************************************************************
 107:Libraries/uC-CSP/os_csp.c **** *                                               INTERRUPT CONTROLLER HANDLER
 108:Libraries/uC-CSP/os_csp.c **** *
 109:Libraries/uC-CSP/os_csp.c **** * Description: Handles all Cortex M3 NVIC's external sources interrupts
 110:Libraries/uC-CSP/os_csp.c **** *
 111:Libraries/uC-CSP/os_csp.c **** * Arguments  : none.
 112:Libraries/uC-CSP/os_csp.c **** *
 113:Libraries/uC-CSP/os_csp.c **** * Note(s)    : none.
 114:Libraries/uC-CSP/os_csp.c **** ***************************************************************************************************
 115:Libraries/uC-CSP/os_csp.c **** */
 116:Libraries/uC-CSP/os_csp.c **** 
 117:Libraries/uC-CSP/os_csp.c **** void  OS_CPU_IntHandler (void) 
 118:Libraries/uC-CSP/os_csp.c **** {
  68              		.loc 1 118 0
  69              		.cfi_startproc
  70              		@ args = 0, pretend = 0, frame = 8
  71              		@ frame_needed = 1, uses_anonymous_args = 0
  72 002c 80B5     		push	{r7, lr}
  73              	.LCFI3:
  74              		.cfi_def_cfa_offset 8
  75              		.cfi_offset 14, -4
  76              		.cfi_offset 7, -8
  77 002e 82B0     		sub	sp, sp, #8
  78              	.LCFI4:
  79              		.cfi_def_cfa_offset 16
  80 0030 00AF     		add	r7, sp, #0
  81              	.LCFI5:
  82              		.cfi_def_cfa_register 7
 119:Libraries/uC-CSP/os_csp.c ****     CPU_SR_ALLOC();
  83              		.loc 1 119 0
  84 0032 4FF00003 		mov	r3, #0
  85 0036 7B60     		str	r3, [r7, #4]
 120:Libraries/uC-CSP/os_csp.c ****     
 121:Libraries/uC-CSP/os_csp.c ****     
 122:Libraries/uC-CSP/os_csp.c ****     CPU_CRITICAL_ENTER();                                       /* Tell the OS that we are starting
  86              		.loc 1 122 0
  87 0038 FFF7FEFF 		bl	CPU_SR_Save
  88 003c 7860     		str	r0, [r7, #4]
  89 003e FFF7FEFF 		bl	CPU_IntDisMeasStart
 123:Libraries/uC-CSP/os_csp.c **** 
 124:Libraries/uC-CSP/os_csp.c ****     OSIntEnter();
  90              		.loc 1 124 0
  91 0042 FFF7FEFF 		bl	OSIntEnter
 125:Libraries/uC-CSP/os_csp.c **** 
 126:Libraries/uC-CSP/os_csp.c ****     CPU_CRITICAL_EXIT();
  92              		.loc 1 126 0
  93 0046 FFF7FEFF 		bl	CPU_IntDisMeasStop
  94 004a 7868     		ldr	r0, [r7, #4]
  95 004c FFF7FEFF 		bl	CPU_SR_Restore
 127:Libraries/uC-CSP/os_csp.c ****     
 128:Libraries/uC-CSP/os_csp.c ****     CSP_IntHandler();                                           /* Call the generic CSP interrupt h
  96              		.loc 1 128 0
  97 0050 FFF7FEFF 		bl	CSP_IntHandler
 129:Libraries/uC-CSP/os_csp.c ****     
 130:Libraries/uC-CSP/os_csp.c ****     OSIntExit();                                                /* Tell the OS that we are leaving 
  98              		.loc 1 130 0
  99 0054 FFF7FEFF 		bl	OSIntExit
 131:Libraries/uC-CSP/os_csp.c **** }
 100              		.loc 1 131 0
 101 0058 07F10807 		add	r7, r7, #8
 102 005c BD46     		mov	sp, r7
 103 005e 80BD     		pop	{r7, pc}
 104              		.cfi_endproc
 105              	.LFE1:
 107              	.Letext0:
 108              		.file 2 "Libraries/uC-CPU/cpu.h"
 109              		.file 3 "Libraries/uC-OSIII/os_type.h"
 110              		.file 4 "Libraries/uC-OSIII/os.h"
DEFINED SYMBOLS
                            *ABS*:00000000 os_csp.c
     /tmp/ccG0NMwv.s:18     .text:00000000 $t
     /tmp/ccG0NMwv.s:23     .text:00000000 OS_CSP_TickInit
     /tmp/ccG0NMwv.s:66     .text:0000002c OS_CPU_IntHandler
                     .debug_frame:00000010 $d

UNDEFINED SYMBOLS
CSP_PM_CPU_ClkFreqGet
OSCfg_TickRate_Hz
OS_CPU_SysTickInit
CPU_SR_Save
CPU_IntDisMeasStart
OSIntEnter
CPU_IntDisMeasStop
CPU_SR_Restore
CSP_IntHandler
OSIntExit
