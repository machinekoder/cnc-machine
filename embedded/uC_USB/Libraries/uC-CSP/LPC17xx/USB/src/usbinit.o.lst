   1              		.syntax unified
   2              		.cpu cortex-m3
   3              		.fpu softvfp
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 6
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.thumb
  14              		.file	"usbinit.c"
  15              		.text
  16              	.Ltext0:
  17              		.cfi_sections	.debug_frame
  18              		.bss
  19              		.align	2
  20              	abStdReqData:
  21 0000 00000000 		.space	8
  21      00000000 
  22              		.text
  23              		.align	2
  24              		.thumb
  25              		.thumb_func
  27              	HandleUsbReset:
  28              	.LFB0:
  29              		.file 1 "Libraries/uC-CSP/LPC17xx/USB/src/usbinit.c"
   1:Libraries/uC-CSP/LPC17xx/USB/src/usbinit.c **** /*
   2:Libraries/uC-CSP/LPC17xx/USB/src/usbinit.c **** 	LPCUSB, an USB device driver for LPC microcontrollers
   3:Libraries/uC-CSP/LPC17xx/USB/src/usbinit.c **** 	Copyright (C) 2006 Bertrik Sikken (bertrik@sikken.nl)
   4:Libraries/uC-CSP/LPC17xx/USB/src/usbinit.c **** 
   5:Libraries/uC-CSP/LPC17xx/USB/src/usbinit.c **** 	Redistribution and use in source and binary forms, with or without
   6:Libraries/uC-CSP/LPC17xx/USB/src/usbinit.c **** 	modification, are permitted provided that the following conditions are met:
   7:Libraries/uC-CSP/LPC17xx/USB/src/usbinit.c **** 
   8:Libraries/uC-CSP/LPC17xx/USB/src/usbinit.c **** 	1. Redistributions of source code must retain the above copyright
   9:Libraries/uC-CSP/LPC17xx/USB/src/usbinit.c **** 	   notice, this list of conditions and the following disclaimer.
  10:Libraries/uC-CSP/LPC17xx/USB/src/usbinit.c **** 	2. Redistributions in binary form must reproduce the above copyright
  11:Libraries/uC-CSP/LPC17xx/USB/src/usbinit.c **** 	   notice, this list of conditions and the following disclaimer in the
  12:Libraries/uC-CSP/LPC17xx/USB/src/usbinit.c **** 	   documentation and/or other materials provided with the distribution.
  13:Libraries/uC-CSP/LPC17xx/USB/src/usbinit.c **** 	3. The name of the author may not be used to endorse or promote products
  14:Libraries/uC-CSP/LPC17xx/USB/src/usbinit.c **** 	   derived from this software without specific prior written permission.
  15:Libraries/uC-CSP/LPC17xx/USB/src/usbinit.c **** 
  16:Libraries/uC-CSP/LPC17xx/USB/src/usbinit.c **** 	THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY EXPRESS OR
  17:Libraries/uC-CSP/LPC17xx/USB/src/usbinit.c **** 	IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
  18:Libraries/uC-CSP/LPC17xx/USB/src/usbinit.c **** 	OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
  19:Libraries/uC-CSP/LPC17xx/USB/src/usbinit.c **** 	IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT, INDIRECT,
  20:Libraries/uC-CSP/LPC17xx/USB/src/usbinit.c **** 	INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT
  21:Libraries/uC-CSP/LPC17xx/USB/src/usbinit.c **** 	NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
  22:Libraries/uC-CSP/LPC17xx/USB/src/usbinit.c **** 	DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
  23:Libraries/uC-CSP/LPC17xx/USB/src/usbinit.c **** 	THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
  24:Libraries/uC-CSP/LPC17xx/USB/src/usbinit.c **** 	(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
  25:Libraries/uC-CSP/LPC17xx/USB/src/usbinit.c **** 	THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  26:Libraries/uC-CSP/LPC17xx/USB/src/usbinit.c **** */
  27:Libraries/uC-CSP/LPC17xx/USB/src/usbinit.c **** 
  28:Libraries/uC-CSP/LPC17xx/USB/src/usbinit.c **** 
  29:Libraries/uC-CSP/LPC17xx/USB/src/usbinit.c **** /** @file
  30:Libraries/uC-CSP/LPC17xx/USB/src/usbinit.c **** 	USB stack initialisation
  31:Libraries/uC-CSP/LPC17xx/USB/src/usbinit.c ****  */
  32:Libraries/uC-CSP/LPC17xx/USB/src/usbinit.c **** 
  33:Libraries/uC-CSP/LPC17xx/USB/src/usbinit.c **** #include <lpc_types.h>
  34:Libraries/uC-CSP/LPC17xx/USB/src/usbinit.c **** 
  35:Libraries/uC-CSP/LPC17xx/USB/src/usbinit.c **** #include <usbdebug.h>
  36:Libraries/uC-CSP/LPC17xx/USB/src/usbinit.c **** #include <usbapi.h>
  37:Libraries/uC-CSP/LPC17xx/USB/src/usbinit.c **** 
  38:Libraries/uC-CSP/LPC17xx/USB/src/usbinit.c **** 
  39:Libraries/uC-CSP/LPC17xx/USB/src/usbinit.c **** /** data storage area for standard requests */
  40:Libraries/uC-CSP/LPC17xx/USB/src/usbinit.c **** static U8	abStdReqData[8];
  41:Libraries/uC-CSP/LPC17xx/USB/src/usbinit.c **** 
  42:Libraries/uC-CSP/LPC17xx/USB/src/usbinit.c **** 
  43:Libraries/uC-CSP/LPC17xx/USB/src/usbinit.c **** /**
  44:Libraries/uC-CSP/LPC17xx/USB/src/usbinit.c **** 	USB reset handler
  45:Libraries/uC-CSP/LPC17xx/USB/src/usbinit.c **** 
  46:Libraries/uC-CSP/LPC17xx/USB/src/usbinit.c **** 	@param [in] bDevStatus	Device status
  47:Libraries/uC-CSP/LPC17xx/USB/src/usbinit.c ****  */
  48:Libraries/uC-CSP/LPC17xx/USB/src/usbinit.c **** static void HandleUsbReset(U8 bDevStatus)
  49:Libraries/uC-CSP/LPC17xx/USB/src/usbinit.c **** {
  30              		.loc 1 49 0
  31              		.cfi_startproc
  32              		@ args = 0, pretend = 0, frame = 8
  33              		@ frame_needed = 1, uses_anonymous_args = 0
  34              		@ link register save eliminated.
  35 0000 80B4     		push	{r7}
  36              	.LCFI0:
  37              		.cfi_def_cfa_offset 4
  38              		.cfi_offset 7, -4
  39 0002 83B0     		sub	sp, sp, #12
  40              	.LCFI1:
  41              		.cfi_def_cfa_offset 16
  42 0004 00AF     		add	r7, sp, #0
  43              	.LCFI2:
  44              		.cfi_def_cfa_register 7
  45 0006 0346     		mov	r3, r0
  46 0008 FB71     		strb	r3, [r7, #7]
  50:Libraries/uC-CSP/LPC17xx/USB/src/usbinit.c **** 	if (bDevStatus & DEV_STATUS_RESET) {
  51:Libraries/uC-CSP/LPC17xx/USB/src/usbinit.c **** 		DBG("\n!");
  52:Libraries/uC-CSP/LPC17xx/USB/src/usbinit.c **** 	}
  53:Libraries/uC-CSP/LPC17xx/USB/src/usbinit.c **** }
  47              		.loc 1 53 0
  48 000a 07F10C07 		add	r7, r7, #12
  49 000e BD46     		mov	sp, r7
  50 0010 80BC     		pop	{r7}
  51 0012 7047     		bx	lr
  52              		.cfi_endproc
  53              	.LFE0:
  55              		.align	2
  56              		.global	USBInit
  57              		.thumb
  58              		.thumb_func
  60              	USBInit:
  61              	.LFB1:
  54:Libraries/uC-CSP/LPC17xx/USB/src/usbinit.c **** 
  55:Libraries/uC-CSP/LPC17xx/USB/src/usbinit.c **** 
  56:Libraries/uC-CSP/LPC17xx/USB/src/usbinit.c **** /**
  57:Libraries/uC-CSP/LPC17xx/USB/src/usbinit.c **** 	Initialises the USB hardware and sets up the USB stack by
  58:Libraries/uC-CSP/LPC17xx/USB/src/usbinit.c **** 	installing default callbacks.
  59:Libraries/uC-CSP/LPC17xx/USB/src/usbinit.c **** 
  60:Libraries/uC-CSP/LPC17xx/USB/src/usbinit.c **** 	@return TRUE if initialisation was successful
  61:Libraries/uC-CSP/LPC17xx/USB/src/usbinit.c ****  */
  62:Libraries/uC-CSP/LPC17xx/USB/src/usbinit.c **** BOOL USBInit(void)
  63:Libraries/uC-CSP/LPC17xx/USB/src/usbinit.c **** {
  62              		.loc 1 63 0
  63              		.cfi_startproc
  64              		@ args = 0, pretend = 0, frame = 0
  65              		@ frame_needed = 1, uses_anonymous_args = 0
  66 0014 80B5     		push	{r7, lr}
  67              	.LCFI3:
  68              		.cfi_def_cfa_offset 8
  69              		.cfi_offset 14, -4
  70              		.cfi_offset 7, -8
  71 0016 00AF     		add	r7, sp, #0
  72              	.LCFI4:
  73              		.cfi_def_cfa_register 7
  64:Libraries/uC-CSP/LPC17xx/USB/src/usbinit.c **** 	/* init hardware */
  65:Libraries/uC-CSP/LPC17xx/USB/src/usbinit.c **** 	USBHwInit();
  74              		.loc 1 65 0
  75 0018 FFF7FEFF 		bl	USBHwInit
  66:Libraries/uC-CSP/LPC17xx/USB/src/usbinit.c **** 
  67:Libraries/uC-CSP/LPC17xx/USB/src/usbinit.c **** 	/* register bus reset handler */
  68:Libraries/uC-CSP/LPC17xx/USB/src/usbinit.c **** 	USBHwRegisterDevIntHandler(HandleUsbReset);
  76              		.loc 1 68 0
  77 001c 40F20000 		movw	r0, #:lower16:HandleUsbReset
  78 0020 C0F20000 		movt	r0, #:upper16:HandleUsbReset
  79 0024 FFF7FEFF 		bl	USBHwRegisterDevIntHandler
  69:Libraries/uC-CSP/LPC17xx/USB/src/usbinit.c **** 
  70:Libraries/uC-CSP/LPC17xx/USB/src/usbinit.c **** 	/* register control transfer handler on EP0 */
  71:Libraries/uC-CSP/LPC17xx/USB/src/usbinit.c **** 	USBHwRegisterEPIntHandler(0x00, USBHandleControlTransfer);
  80              		.loc 1 71 0
  81 0028 4FF00000 		mov	r0, #0
  82 002c 40F20001 		movw	r1, #:lower16:USBHandleControlTransfer
  83 0030 C0F20001 		movt	r1, #:upper16:USBHandleControlTransfer
  84 0034 FFF7FEFF 		bl	USBHwRegisterEPIntHandler
  72:Libraries/uC-CSP/LPC17xx/USB/src/usbinit.c **** 	USBHwRegisterEPIntHandler(0x80, USBHandleControlTransfer);
  85              		.loc 1 72 0
  86 0038 4FF08000 		mov	r0, #128
  87 003c 40F20001 		movw	r1, #:lower16:USBHandleControlTransfer
  88 0040 C0F20001 		movt	r1, #:upper16:USBHandleControlTransfer
  89 0044 FFF7FEFF 		bl	USBHwRegisterEPIntHandler
  73:Libraries/uC-CSP/LPC17xx/USB/src/usbinit.c **** 
  74:Libraries/uC-CSP/LPC17xx/USB/src/usbinit.c **** 	/* setup control endpoints */
  75:Libraries/uC-CSP/LPC17xx/USB/src/usbinit.c **** 	USBHwEPConfig(0x00, MAX_PACKET_SIZE0);
  90              		.loc 1 75 0
  91 0048 4FF00000 		mov	r0, #0
  92 004c 4FF04001 		mov	r1, #64
  93 0050 FFF7FEFF 		bl	USBHwEPConfig
  76:Libraries/uC-CSP/LPC17xx/USB/src/usbinit.c **** 	USBHwEPConfig(0x80, MAX_PACKET_SIZE0);
  94              		.loc 1 76 0
  95 0054 4FF08000 		mov	r0, #128
  96 0058 4FF04001 		mov	r1, #64
  97 005c FFF7FEFF 		bl	USBHwEPConfig
  77:Libraries/uC-CSP/LPC17xx/USB/src/usbinit.c **** 
  78:Libraries/uC-CSP/LPC17xx/USB/src/usbinit.c **** 	/* register standard request handler */
  79:Libraries/uC-CSP/LPC17xx/USB/src/usbinit.c **** 	USBRegisterRequestHandler(REQTYPE_TYPE_STANDARD, USBHandleStandardRequest, abStdReqData);
  98              		.loc 1 79 0
  99 0060 4FF00000 		mov	r0, #0
 100 0064 40F20001 		movw	r1, #:lower16:USBHandleStandardRequest
 101 0068 C0F20001 		movt	r1, #:upper16:USBHandleStandardRequest
 102 006c 40F20002 		movw	r2, #:lower16:abStdReqData
 103 0070 C0F20002 		movt	r2, #:upper16:abStdReqData
 104 0074 FFF7FEFF 		bl	USBRegisterRequestHandler
  80:Libraries/uC-CSP/LPC17xx/USB/src/usbinit.c **** 
  81:Libraries/uC-CSP/LPC17xx/USB/src/usbinit.c **** 	return TRUE;
 105              		.loc 1 81 0
 106 0078 4FF00103 		mov	r3, #1
  82:Libraries/uC-CSP/LPC17xx/USB/src/usbinit.c **** }
 107              		.loc 1 82 0
 108 007c 1846     		mov	r0, r3
 109 007e 80BD     		pop	{r7, pc}
 110              		.cfi_endproc
 111              	.LFE1:
 113              	.Letext0:
 114              		.file 2 "/home/wimma/bin/codesourcery/Sourcery_CodeBench_Lite_for_ARM_EABI/bin/../lib/gcc/arm-none
 115              		.file 3 "Libraries/CM3/inc/lpc_types.h"
DEFINED SYMBOLS
                            *ABS*:00000000 usbinit.c
     /tmp/ccleJfqW.s:19     .bss:00000000 $d
     /tmp/ccleJfqW.s:20     .bss:00000000 abStdReqData
     /tmp/ccleJfqW.s:23     .text:00000000 $t
     /tmp/ccleJfqW.s:27     .text:00000000 HandleUsbReset
     /tmp/ccleJfqW.s:60     .text:00000014 USBInit
                     .debug_frame:00000010 $d

UNDEFINED SYMBOLS
USBHwInit
USBHwRegisterDevIntHandler
USBHandleControlTransfer
USBHwRegisterEPIntHandler
USBHwEPConfig
USBHandleStandardRequest
USBRegisterRequestHandler
