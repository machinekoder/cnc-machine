   1              		.syntax unified
   2              		.cpu cortex-m3
   3              		.fpu softvfp
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 6
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.thumb
  14              		.file	"lpc17xx_emac.c"
  15              		.text
  16              	.Ltext0:
  17              		.cfi_sections	.debug_frame
  18              		.global	EMAC_clkdiv
  19              		.section	.rodata
  20              		.align	2
  23              	EMAC_clkdiv:
  24 0000 04       		.byte	4
  25 0001 06       		.byte	6
  26 0002 08       		.byte	8
  27 0003 0A       		.byte	10
  28 0004 0E       		.byte	14
  29 0005 14       		.byte	20
  30 0006 1C       		.byte	28
  31 0007 00       		.bss
  32              		.align	2
  33              	Rx_Desc:
  34 0000 00000000 		.space	32
  34      00000000 
  34      00000000 
  34      00000000 
  34      00000000 
  35              		.align	3
  36              	Rx_Stat:
  37 0020 00000000 		.space	32
  37      00000000 
  37      00000000 
  37      00000000 
  37      00000000 
  38              		.align	2
  39              	Tx_Desc:
  40 0040 00000000 		.space	24
  40      00000000 
  40      00000000 
  40      00000000 
  40      00000000 
  41              		.align	2
  42              	Tx_Stat:
  43 0058 00000000 		.space	12
  43      00000000 
  43      00000000 
  44              		.align	2
  45              	eth_rx_buf:
  46 0064 00000000 		.space	6144
  46      00000000 
  46      00000000 
  46      00000000 
  46      00000000 
  47              		.align	2
  48              	eth_tx_buf:
  49 1864 00000000 		.space	4608
  49      00000000 
  49      00000000 
  49      00000000 
  49      00000000 
  50 2a64 00000000 		.text
  51              		.align	2
  52              		.thumb
  53              		.thumb_func
  55              	rx_descr_init:
  56              	.LFB55:
  57              		.file 1 "Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c"
   1:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** /**********************************************************************
   2:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** * $Id$		lpc17xx_dac.c				2010-05-21
   3:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** *//**
   4:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** * @file		lpc17xx_dac.c
   5:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** * @brief	Contains all functions support for Ethernet MAC firmware
   6:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** * 			library on LPC17xx
   7:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** * @version	2.0
   8:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** * @date		21. May. 2010
   9:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** * @author	NXP MCU SW Application Team
  10:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** *
  11:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** * Copyright(C) 2010, NXP Semiconductor
  12:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** * All rights reserved.
  13:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** *
  14:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** ***********************************************************************
  15:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** * Software that is described herein is for illustrative purposes only
  16:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** * which provides customers with programming information regarding the
  17:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** * products. This software is supplied "AS IS" without any warranties.
  18:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** * NXP Semiconductors assumes no responsibility or liability for the
  19:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** * use of the software, conveys no license or title under any patent,
  20:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** * copyright, or mask work right to the product. NXP Semiconductors
  21:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** * reserves the right to make changes in the software without
  22:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** * notification. NXP Semiconductors also make no representation or
  23:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** * warranty that such application will be suitable for the specified
  24:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** * use without further testing or modification.
  25:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** **********************************************************************/
  26:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 
  27:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** /* Peripheral group ----------------------------------------------------------- */
  28:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** /** @addtogroup EMAC
  29:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * @{
  30:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  */
  31:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 
  32:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** /* Includes ------------------------------------------------------------------- */
  33:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** #include "lpc17xx_emac.h"
  34:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** #include "lpc17xx_clkpwr.h"
  35:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** #include <stddef.h>
  36:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 
  37:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 
  38:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** #ifdef _EMAC
  39:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 
  40:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** /* Private Variables ---------------------------------------------------------- */
  41:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** /** @defgroup EMAC_Private_Variables EMAC Private Variables
  42:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * @{
  43:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  */
  44:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 
  45:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** /* MII Mgmt Configuration register - Clock divider setting */
  46:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** const uint8_t EMAC_clkdiv[] = { 4, 6, 8, 10, 14, 20, 28 };
  47:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 
  48:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** /* EMAC local DMA Descriptors */
  49:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 
  50:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** /** Rx Descriptor data array */
  51:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** static RX_Desc Rx_Desc[EMAC_NUM_RX_FRAG];
  52:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 
  53:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** /** Rx Status data array - Must be 8-Byte aligned */
  54:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** #if defined ( __CC_ARM   )
  55:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** static __align(8) RX_Stat Rx_Stat[EMAC_NUM_RX_FRAG];
  56:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** #elif defined ( __ICCARM__ )
  57:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** #pragma data_alignment=8
  58:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** static RX_Stat Rx_Stat[EMAC_NUM_RX_FRAG];
  59:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** #elif defined   (  __GNUC__  )
  60:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** static __attribute__ ((aligned (8))) RX_Stat Rx_Stat[EMAC_NUM_RX_FRAG];
  61:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** #endif
  62:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 
  63:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** /** Tx Descriptor data array */
  64:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** static TX_Desc Tx_Desc[EMAC_NUM_TX_FRAG];
  65:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** /** Tx Status data array */
  66:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** static TX_Stat Tx_Stat[EMAC_NUM_TX_FRAG];
  67:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 
  68:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** /* EMAC local DMA buffers */
  69:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** /*TODO: put these buffers in special sections*/
  70:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** /** Rx buffer data */
  71:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** static uint32_t eth_rx_buf[EMAC_NUM_RX_FRAG][EMAC_ETH_MAX_FLEN>>2];
  72:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** /** Tx buffer data */
  73:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** static uint32_t eth_tx_buf[EMAC_NUM_TX_FRAG][EMAC_ETH_MAX_FLEN>>2];
  74:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** /**
  75:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * @}
  76:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  */
  77:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 
  78:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** /* Private Functions ---------------------------------------------------------- */
  79:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** static void rx_descr_init (void);
  80:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** static void tx_descr_init (void);
  81:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** static int32_t write_PHY (uint32_t PhyReg, uint16_t Value);
  82:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** static int32_t  read_PHY (uint32_t PhyReg);
  83:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 
  84:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** static void setEmacAddr(uint8_t abStationAddr[]);
  85:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** static int32_t emac_CRCCalc(uint8_t frame_no_fcs[], int32_t frame_len);
  86:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 
  87:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 
  88:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** /*--------------------------- rx_descr_init ---------------------------------*/
  89:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** /*********************************************************************//**
  90:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * @brief 		Initializes RX Descriptor
  91:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * @param[in] 	None
  92:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * @return 		None
  93:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  ***********************************************************************/
  94:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** static void rx_descr_init (void)
  95:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** {
  58              		.loc 1 95 0
  59              		.cfi_startproc
  60              		@ args = 0, pretend = 0, frame = 8
  61              		@ frame_needed = 1, uses_anonymous_args = 0
  62              		@ link register save eliminated.
  63 0000 80B4     		push	{r7}
  64              	.LCFI0:
  65              		.cfi_def_cfa_offset 4
  66              		.cfi_offset 7, -4
  67 0002 83B0     		sub	sp, sp, #12
  68              	.LCFI1:
  69              		.cfi_def_cfa_offset 16
  70 0004 00AF     		add	r7, sp, #0
  71              	.LCFI2:
  72              		.cfi_def_cfa_register 7
  96:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	/* Initialize Receive Descriptor and Status array. */
  97:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	uint32_t i;
  98:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 
  99:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	for (i = 0; i < EMAC_NUM_RX_FRAG; i++) {
  73              		.loc 1 99 0
  74 0006 4FF00003 		mov	r3, #0
  75 000a 7B60     		str	r3, [r7, #4]
  76 000c 39E0     		b	.L2
  77              	.L3:
 100:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		Rx_Desc[i].Packet  = (uint32_t)&eth_rx_buf[i];
  78              		.loc 1 100 0 discriminator 2
  79 000e 7A68     		ldr	r2, [r7, #4]
  80 0010 1346     		mov	r3, r2
  81 0012 4FEA4303 		lsl	r3, r3, #1
  82 0016 9B18     		adds	r3, r3, r2
  83 0018 4FEA4323 		lsl	r3, r3, #9
  84 001c 1A46     		mov	r2, r3
  85 001e 40F20003 		movw	r3, #:lower16:eth_rx_buf
  86 0022 C0F20003 		movt	r3, #:upper16:eth_rx_buf
  87 0026 D318     		adds	r3, r2, r3
  88 0028 1946     		mov	r1, r3
  89 002a 40F20003 		movw	r3, #:lower16:Rx_Desc
  90 002e C0F20003 		movt	r3, #:upper16:Rx_Desc
  91 0032 7A68     		ldr	r2, [r7, #4]
  92 0034 43F83210 		str	r1, [r3, r2, lsl #3]
 101:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		Rx_Desc[i].Ctrl    = EMAC_RCTRL_INT | (EMAC_ETH_MAX_FLEN - 1);
  93              		.loc 1 101 0 discriminator 2
  94 0038 40F20002 		movw	r2, #:lower16:Rx_Desc
  95 003c C0F20002 		movt	r2, #:upper16:Rx_Desc
  96 0040 7B68     		ldr	r3, [r7, #4]
  97 0042 4FEAC303 		lsl	r3, r3, #3
  98 0046 D318     		adds	r3, r2, r3
  99 0048 40F2FF52 		movw	r2, #1535
 100 004c C8F20002 		movt	r2, 32768
 101 0050 5A60     		str	r2, [r3, #4]
 102:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		Rx_Stat[i].Info    = 0;
 102              		.loc 1 102 0 discriminator 2
 103 0052 40F20003 		movw	r3, #:lower16:Rx_Stat
 104 0056 C0F20003 		movt	r3, #:upper16:Rx_Stat
 105 005a 7A68     		ldr	r2, [r7, #4]
 106 005c 4FF00001 		mov	r1, #0
 107 0060 43F83210 		str	r1, [r3, r2, lsl #3]
 103:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		Rx_Stat[i].HashCRC = 0;
 108              		.loc 1 103 0 discriminator 2
 109 0064 40F20002 		movw	r2, #:lower16:Rx_Stat
 110 0068 C0F20002 		movt	r2, #:upper16:Rx_Stat
 111 006c 7B68     		ldr	r3, [r7, #4]
 112 006e 4FEAC303 		lsl	r3, r3, #3
 113 0072 D318     		adds	r3, r2, r3
 114 0074 4FF00002 		mov	r2, #0
 115 0078 5A60     		str	r2, [r3, #4]
  99:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	for (i = 0; i < EMAC_NUM_RX_FRAG; i++) {
 116              		.loc 1 99 0 discriminator 2
 117 007a 7B68     		ldr	r3, [r7, #4]
 118 007c 03F10103 		add	r3, r3, #1
 119 0080 7B60     		str	r3, [r7, #4]
 120              	.L2:
  99:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	for (i = 0; i < EMAC_NUM_RX_FRAG; i++) {
 121              		.loc 1 99 0 is_stmt 0 discriminator 1
 122 0082 7B68     		ldr	r3, [r7, #4]
 123 0084 032B     		cmp	r3, #3
 124 0086 C2D9     		bls	.L3
 104:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	}
 105:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 
 106:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	/* Set EMAC Receive Descriptor Registers. */
 107:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	LPC_EMAC->RxDescriptor       = (uint32_t)&Rx_Desc[0];
 125              		.loc 1 107 0 is_stmt 1
 126 0088 4FF0A042 		mov	r2, #1342177280
 127 008c 40F20003 		movw	r3, #:lower16:Rx_Desc
 128 0090 C0F20003 		movt	r3, #:upper16:Rx_Desc
 129 0094 C2F80831 		str	r3, [r2, #264]
 108:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	LPC_EMAC->RxStatus           = (uint32_t)&Rx_Stat[0];
 130              		.loc 1 108 0
 131 0098 4FF0A042 		mov	r2, #1342177280
 132 009c 40F20003 		movw	r3, #:lower16:Rx_Stat
 133 00a0 C0F20003 		movt	r3, #:upper16:Rx_Stat
 134 00a4 C2F80C31 		str	r3, [r2, #268]
 109:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	LPC_EMAC->RxDescriptorNumber = EMAC_NUM_RX_FRAG - 1;
 135              		.loc 1 109 0
 136 00a8 4FF0A043 		mov	r3, #1342177280
 137 00ac 4FF00302 		mov	r2, #3
 138 00b0 C3F81021 		str	r2, [r3, #272]
 110:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 
 111:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	/* Rx Descriptors Point to 0 */
 112:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	LPC_EMAC->RxConsumeIndex  = 0;
 139              		.loc 1 112 0
 140 00b4 4FF0A043 		mov	r3, #1342177280
 141 00b8 4FF00002 		mov	r2, #0
 142 00bc C3F81821 		str	r2, [r3, #280]
 113:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** }
 143              		.loc 1 113 0
 144 00c0 07F10C07 		add	r7, r7, #12
 145 00c4 BD46     		mov	sp, r7
 146 00c6 80BC     		pop	{r7}
 147 00c8 7047     		bx	lr
 148              		.cfi_endproc
 149              	.LFE55:
 151 00ca 00BF     		.align	2
 152              		.thumb
 153              		.thumb_func
 155              	tx_descr_init:
 156              	.LFB56:
 114:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 
 115:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 
 116:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** /*--------------------------- tx_descr_init ---- ----------------------------*/
 117:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** /*********************************************************************//**
 118:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * @brief 		Initializes TX Descriptor
 119:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * @param[in] 	None
 120:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * @return 		None
 121:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  ***********************************************************************/
 122:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** static void tx_descr_init (void) {
 157              		.loc 1 122 0
 158              		.cfi_startproc
 159              		@ args = 0, pretend = 0, frame = 8
 160              		@ frame_needed = 1, uses_anonymous_args = 0
 161              		@ link register save eliminated.
 162 00cc 80B4     		push	{r7}
 163              	.LCFI3:
 164              		.cfi_def_cfa_offset 4
 165              		.cfi_offset 7, -4
 166 00ce 83B0     		sub	sp, sp, #12
 167              	.LCFI4:
 168              		.cfi_def_cfa_offset 16
 169 00d0 00AF     		add	r7, sp, #0
 170              	.LCFI5:
 171              		.cfi_def_cfa_register 7
 123:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	/* Initialize Transmit Descriptor and Status array. */
 124:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	uint32_t i;
 125:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 
 126:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	for (i = 0; i < EMAC_NUM_TX_FRAG; i++) {
 172              		.loc 1 126 0
 173 00d2 4FF00003 		mov	r3, #0
 174 00d6 7B60     		str	r3, [r7, #4]
 175 00d8 2CE0     		b	.L5
 176              	.L6:
 127:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		Tx_Desc[i].Packet = (uint32_t)&eth_tx_buf[i];
 177              		.loc 1 127 0 discriminator 2
 178 00da 7A68     		ldr	r2, [r7, #4]
 179 00dc 1346     		mov	r3, r2
 180 00de 4FEA4303 		lsl	r3, r3, #1
 181 00e2 9B18     		adds	r3, r3, r2
 182 00e4 4FEA4323 		lsl	r3, r3, #9
 183 00e8 1A46     		mov	r2, r3
 184 00ea 40F20003 		movw	r3, #:lower16:eth_tx_buf
 185 00ee C0F20003 		movt	r3, #:upper16:eth_tx_buf
 186 00f2 D318     		adds	r3, r2, r3
 187 00f4 1946     		mov	r1, r3
 188 00f6 40F20003 		movw	r3, #:lower16:Tx_Desc
 189 00fa C0F20003 		movt	r3, #:upper16:Tx_Desc
 190 00fe 7A68     		ldr	r2, [r7, #4]
 191 0100 43F83210 		str	r1, [r3, r2, lsl #3]
 128:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		Tx_Desc[i].Ctrl   = 0;
 192              		.loc 1 128 0 discriminator 2
 193 0104 40F20002 		movw	r2, #:lower16:Tx_Desc
 194 0108 C0F20002 		movt	r2, #:upper16:Tx_Desc
 195 010c 7B68     		ldr	r3, [r7, #4]
 196 010e 4FEAC303 		lsl	r3, r3, #3
 197 0112 D318     		adds	r3, r2, r3
 198 0114 4FF00002 		mov	r2, #0
 199 0118 5A60     		str	r2, [r3, #4]
 129:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		Tx_Stat[i].Info   = 0;
 200              		.loc 1 129 0 discriminator 2
 201 011a 40F20003 		movw	r3, #:lower16:Tx_Stat
 202 011e C0F20003 		movt	r3, #:upper16:Tx_Stat
 203 0122 7A68     		ldr	r2, [r7, #4]
 204 0124 4FF00001 		mov	r1, #0
 205 0128 43F82210 		str	r1, [r3, r2, lsl #2]
 126:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	for (i = 0; i < EMAC_NUM_TX_FRAG; i++) {
 206              		.loc 1 126 0 discriminator 2
 207 012c 7B68     		ldr	r3, [r7, #4]
 208 012e 03F10103 		add	r3, r3, #1
 209 0132 7B60     		str	r3, [r7, #4]
 210              	.L5:
 126:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	for (i = 0; i < EMAC_NUM_TX_FRAG; i++) {
 211              		.loc 1 126 0 is_stmt 0 discriminator 1
 212 0134 7B68     		ldr	r3, [r7, #4]
 213 0136 022B     		cmp	r3, #2
 214 0138 CFD9     		bls	.L6
 130:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	}
 131:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 
 132:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	/* Set EMAC Transmit Descriptor Registers. */
 133:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	LPC_EMAC->TxDescriptor       = (uint32_t)&Tx_Desc[0];
 215              		.loc 1 133 0 is_stmt 1
 216 013a 4FF0A042 		mov	r2, #1342177280
 217 013e 40F20003 		movw	r3, #:lower16:Tx_Desc
 218 0142 C0F20003 		movt	r3, #:upper16:Tx_Desc
 219 0146 C2F81C31 		str	r3, [r2, #284]
 134:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	LPC_EMAC->TxStatus           = (uint32_t)&Tx_Stat[0];
 220              		.loc 1 134 0
 221 014a 4FF0A042 		mov	r2, #1342177280
 222 014e 40F20003 		movw	r3, #:lower16:Tx_Stat
 223 0152 C0F20003 		movt	r3, #:upper16:Tx_Stat
 224 0156 C2F82031 		str	r3, [r2, #288]
 135:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	LPC_EMAC->TxDescriptorNumber = EMAC_NUM_TX_FRAG - 1;
 225              		.loc 1 135 0
 226 015a 4FF0A043 		mov	r3, #1342177280
 227 015e 4FF00202 		mov	r2, #2
 228 0162 C3F82421 		str	r2, [r3, #292]
 136:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 
 137:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	/* Tx Descriptors Point to 0 */
 138:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	LPC_EMAC->TxProduceIndex  = 0;
 229              		.loc 1 138 0
 230 0166 4FF0A043 		mov	r3, #1342177280
 231 016a 4FF00002 		mov	r2, #0
 232 016e C3F82821 		str	r2, [r3, #296]
 139:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** }
 233              		.loc 1 139 0
 234 0172 07F10C07 		add	r7, r7, #12
 235 0176 BD46     		mov	sp, r7
 236 0178 80BC     		pop	{r7}
 237 017a 7047     		bx	lr
 238              		.cfi_endproc
 239              	.LFE56:
 241              		.align	2
 242              		.thumb
 243              		.thumb_func
 245              	write_PHY:
 246              	.LFB57:
 140:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 
 141:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 
 142:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** /*--------------------------- write_PHY -------------------------------------*/
 143:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** /*********************************************************************//**
 144:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * @brief 		Write value to PHY device
 145:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * @param[in] 	PhyReg: PHY Register address
 146:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * @param[in] 	Value:  Value to write
 147:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * @return 		0 - if success
 148:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * 				1 - if fail
 149:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  ***********************************************************************/
 150:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** static int32_t write_PHY (uint32_t PhyReg, uint16_t Value)
 151:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** {
 247              		.loc 1 151 0
 248              		.cfi_startproc
 249              		@ args = 0, pretend = 0, frame = 16
 250              		@ frame_needed = 1, uses_anonymous_args = 0
 251              		@ link register save eliminated.
 252 017c 80B4     		push	{r7}
 253              	.LCFI6:
 254              		.cfi_def_cfa_offset 4
 255              		.cfi_offset 7, -4
 256 017e 85B0     		sub	sp, sp, #20
 257              	.LCFI7:
 258              		.cfi_def_cfa_offset 24
 259 0180 00AF     		add	r7, sp, #0
 260              	.LCFI8:
 261              		.cfi_def_cfa_register 7
 262 0182 7860     		str	r0, [r7, #4]
 263 0184 0B46     		mov	r3, r1
 264 0186 7B80     		strh	r3, [r7, #2]	@ movhi
 152:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	/* Write a data 'Value' to PHY register 'PhyReg'. */
 153:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	uint32_t tout;
 154:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 
 155:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	LPC_EMAC->MADR = EMAC_DEF_ADR | PhyReg;
 265              		.loc 1 155 0
 266 0188 4FF0A043 		mov	r3, #1342177280
 267 018c 7A68     		ldr	r2, [r7, #4]
 268 018e 9A62     		str	r2, [r3, #40]
 156:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	LPC_EMAC->MWTD = Value;
 269              		.loc 1 156 0
 270 0190 4FF0A043 		mov	r3, #1342177280
 271 0194 7A88     		ldrh	r2, [r7, #2]
 272 0196 DA62     		str	r2, [r3, #44]
 157:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 
 158:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	/* Wait until operation completed */
 159:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	tout = 0;
 273              		.loc 1 159 0
 274 0198 4FF00003 		mov	r3, #0
 275 019c FB60     		str	r3, [r7, #12]
 160:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	for (tout = 0; tout < EMAC_MII_WR_TOUT; tout++) {
 276              		.loc 1 160 0
 277 019e 4FF00003 		mov	r3, #0
 278 01a2 FB60     		str	r3, [r7, #12]
 279 01a4 0DE0     		b	.L8
 280              	.L11:
 161:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		if ((LPC_EMAC->MIND & EMAC_MIND_BUSY) == 0) {
 281              		.loc 1 161 0
 282 01a6 4FF0A043 		mov	r3, #1342177280
 283 01aa 5B6B     		ldr	r3, [r3, #52]
 284 01ac 03F00103 		and	r3, r3, #1
 285 01b0 002B     		cmp	r3, #0
 286 01b2 02D1     		bne	.L9
 162:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 			return (0);
 287              		.loc 1 162 0
 288 01b4 4FF00003 		mov	r3, #0
 289 01b8 0CE0     		b	.L10
 290              	.L9:
 160:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	for (tout = 0; tout < EMAC_MII_WR_TOUT; tout++) {
 291              		.loc 1 160 0
 292 01ba FB68     		ldr	r3, [r7, #12]
 293 01bc 03F10103 		add	r3, r3, #1
 294 01c0 FB60     		str	r3, [r7, #12]
 295              	.L8:
 160:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	for (tout = 0; tout < EMAC_MII_WR_TOUT; tout++) {
 296              		.loc 1 160 0 is_stmt 0 discriminator 1
 297 01c2 FA68     		ldr	r2, [r7, #12]
 298 01c4 4FF6FF73 		movw	r3, #65535
 299 01c8 C0F20403 		movt	r3, 4
 300 01cc 9A42     		cmp	r2, r3
 301 01ce EAD9     		bls	.L11
 163:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		}
 164:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	}
 165:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	// Time out!
 166:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	return (-1);
 302              		.loc 1 166 0 is_stmt 1
 303 01d0 4FF0FF33 		mov	r3, #-1
 304              	.L10:
 167:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** }
 305              		.loc 1 167 0
 306 01d4 1846     		mov	r0, r3
 307 01d6 07F11407 		add	r7, r7, #20
 308 01da BD46     		mov	sp, r7
 309 01dc 80BC     		pop	{r7}
 310 01de 7047     		bx	lr
 311              		.cfi_endproc
 312              	.LFE57:
 314              		.align	2
 315              		.thumb
 316              		.thumb_func
 318              	read_PHY:
 319              	.LFB58:
 168:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 
 169:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 
 170:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** /*--------------------------- read_PHY --------------------------------------*/
 171:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** /*********************************************************************//**
 172:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * @brief 		Read value from PHY device
 173:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * @param[in] 	PhyReg: PHY Register address
 174:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * @return 		0 - if success
 175:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * 				1 - if fail
 176:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  ***********************************************************************/
 177:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** static int32_t read_PHY (uint32_t PhyReg)
 178:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** {
 320              		.loc 1 178 0
 321              		.cfi_startproc
 322              		@ args = 0, pretend = 0, frame = 16
 323              		@ frame_needed = 1, uses_anonymous_args = 0
 324              		@ link register save eliminated.
 325 01e0 80B4     		push	{r7}
 326              	.LCFI9:
 327              		.cfi_def_cfa_offset 4
 328              		.cfi_offset 7, -4
 329 01e2 85B0     		sub	sp, sp, #20
 330              	.LCFI10:
 331              		.cfi_def_cfa_offset 24
 332 01e4 00AF     		add	r7, sp, #0
 333              	.LCFI11:
 334              		.cfi_def_cfa_register 7
 335 01e6 7860     		str	r0, [r7, #4]
 179:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	/* Read a PHY register 'PhyReg'. */
 180:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	uint32_t tout;
 181:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 
 182:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	LPC_EMAC->MADR = EMAC_DEF_ADR | PhyReg;
 336              		.loc 1 182 0
 337 01e8 4FF0A043 		mov	r3, #1342177280
 338 01ec 7A68     		ldr	r2, [r7, #4]
 339 01ee 9A62     		str	r2, [r3, #40]
 183:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	LPC_EMAC->MCMD = EMAC_MCMD_READ;
 340              		.loc 1 183 0
 341 01f0 4FF0A043 		mov	r3, #1342177280
 342 01f4 4FF00102 		mov	r2, #1
 343 01f8 5A62     		str	r2, [r3, #36]
 184:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 
 185:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	/* Wait until operation completed */
 186:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	tout = 0;
 344              		.loc 1 186 0
 345 01fa 4FF00003 		mov	r3, #0
 346 01fe FB60     		str	r3, [r7, #12]
 187:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	for (tout = 0; tout < EMAC_MII_RD_TOUT; tout++) {
 347              		.loc 1 187 0
 348 0200 4FF00003 		mov	r3, #0
 349 0204 FB60     		str	r3, [r7, #12]
 350 0206 13E0     		b	.L13
 351              	.L16:
 188:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		if ((LPC_EMAC->MIND & EMAC_MIND_BUSY) == 0) {
 352              		.loc 1 188 0
 353 0208 4FF0A043 		mov	r3, #1342177280
 354 020c 5B6B     		ldr	r3, [r3, #52]
 355 020e 03F00103 		and	r3, r3, #1
 356 0212 002B     		cmp	r3, #0
 357 0214 08D1     		bne	.L14
 189:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 			LPC_EMAC->MCMD = 0;
 358              		.loc 1 189 0
 359 0216 4FF0A043 		mov	r3, #1342177280
 360 021a 4FF00002 		mov	r2, #0
 361 021e 5A62     		str	r2, [r3, #36]
 190:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 			return (LPC_EMAC->MRDD);
 362              		.loc 1 190 0
 363 0220 4FF0A043 		mov	r3, #1342177280
 364 0224 1B6B     		ldr	r3, [r3, #48]
 365 0226 0CE0     		b	.L15
 366              	.L14:
 187:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	for (tout = 0; tout < EMAC_MII_RD_TOUT; tout++) {
 367              		.loc 1 187 0
 368 0228 FB68     		ldr	r3, [r7, #12]
 369 022a 03F10103 		add	r3, r3, #1
 370 022e FB60     		str	r3, [r7, #12]
 371              	.L13:
 187:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	for (tout = 0; tout < EMAC_MII_RD_TOUT; tout++) {
 372              		.loc 1 187 0 is_stmt 0 discriminator 1
 373 0230 FA68     		ldr	r2, [r7, #12]
 374 0232 4FF6FF73 		movw	r3, #65535
 375 0236 C0F20403 		movt	r3, 4
 376 023a 9A42     		cmp	r2, r3
 377 023c E4D9     		bls	.L16
 191:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		}
 192:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	}
 193:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	// Time out!
 194:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	return (-1);
 378              		.loc 1 194 0 is_stmt 1
 379 023e 4FF0FF33 		mov	r3, #-1
 380              	.L15:
 195:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** }
 381              		.loc 1 195 0
 382 0242 1846     		mov	r0, r3
 383 0244 07F11407 		add	r7, r7, #20
 384 0248 BD46     		mov	sp, r7
 385 024a 80BC     		pop	{r7}
 386 024c 7047     		bx	lr
 387              		.cfi_endproc
 388              	.LFE58:
 390 024e 00BF     		.align	2
 391              		.thumb
 392              		.thumb_func
 394              	setEmacAddr:
 395              	.LFB59:
 196:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 
 197:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** /*********************************************************************//**
 198:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * @brief		Set Station MAC address for EMAC module
 199:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * @param[in]	abStationAddr Pointer to Station address that contains 6-bytes
 200:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * 				of MAC address (should be in order from MAC Address 1 to MAC Address 6)
 201:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * @return		None
 202:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  **********************************************************************/
 203:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** static void setEmacAddr(uint8_t abStationAddr[])
 204:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** {
 396              		.loc 1 204 0
 397              		.cfi_startproc
 398              		@ args = 0, pretend = 0, frame = 8
 399              		@ frame_needed = 1, uses_anonymous_args = 0
 400              		@ link register save eliminated.
 401 0250 80B4     		push	{r7}
 402              	.LCFI12:
 403              		.cfi_def_cfa_offset 4
 404              		.cfi_offset 7, -4
 405 0252 83B0     		sub	sp, sp, #12
 406              	.LCFI13:
 407              		.cfi_def_cfa_offset 16
 408 0254 00AF     		add	r7, sp, #0
 409              	.LCFI14:
 410              		.cfi_def_cfa_register 7
 411 0256 7860     		str	r0, [r7, #4]
 205:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	/* Set the Ethernet MAC Address registers */
 206:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	LPC_EMAC->SA0 = ((uint32_t)abStationAddr[5] << 8) | (uint32_t)abStationAddr[4];
 412              		.loc 1 206 0
 413 0258 4FF0A041 		mov	r1, #1342177280
 414 025c 7B68     		ldr	r3, [r7, #4]
 415 025e 03F10503 		add	r3, r3, #5
 416 0262 1B78     		ldrb	r3, [r3, #0]	@ zero_extendqisi2
 417 0264 4FEA0322 		lsl	r2, r3, #8
 418 0268 7B68     		ldr	r3, [r7, #4]
 419 026a 03F10403 		add	r3, r3, #4
 420 026e 1B78     		ldrb	r3, [r3, #0]	@ zero_extendqisi2
 421 0270 1A43     		orrs	r2, r2, r3
 422 0272 0B46     		mov	r3, r1
 423 0274 1A64     		str	r2, [r3, #64]
 207:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	LPC_EMAC->SA1 = ((uint32_t)abStationAddr[3] << 8) | (uint32_t)abStationAddr[2];
 424              		.loc 1 207 0
 425 0276 4FF0A041 		mov	r1, #1342177280
 426 027a 7B68     		ldr	r3, [r7, #4]
 427 027c 03F10303 		add	r3, r3, #3
 428 0280 1B78     		ldrb	r3, [r3, #0]	@ zero_extendqisi2
 429 0282 4FEA0322 		lsl	r2, r3, #8
 430 0286 7B68     		ldr	r3, [r7, #4]
 431 0288 03F10203 		add	r3, r3, #2
 432 028c 1B78     		ldrb	r3, [r3, #0]	@ zero_extendqisi2
 433 028e 1A43     		orrs	r2, r2, r3
 434 0290 0B46     		mov	r3, r1
 435 0292 5A64     		str	r2, [r3, #68]
 208:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	LPC_EMAC->SA2 = ((uint32_t)abStationAddr[1] << 8) | (uint32_t)abStationAddr[0];
 436              		.loc 1 208 0
 437 0294 4FF0A041 		mov	r1, #1342177280
 438 0298 7B68     		ldr	r3, [r7, #4]
 439 029a 03F10103 		add	r3, r3, #1
 440 029e 1B78     		ldrb	r3, [r3, #0]	@ zero_extendqisi2
 441 02a0 4FEA0322 		lsl	r2, r3, #8
 442 02a4 7B68     		ldr	r3, [r7, #4]
 443 02a6 1B78     		ldrb	r3, [r3, #0]	@ zero_extendqisi2
 444 02a8 1A43     		orrs	r2, r2, r3
 445 02aa 0B46     		mov	r3, r1
 446 02ac 9A64     		str	r2, [r3, #72]
 209:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** }
 447              		.loc 1 209 0
 448 02ae 07F10C07 		add	r7, r7, #12
 449 02b2 BD46     		mov	sp, r7
 450 02b4 80BC     		pop	{r7}
 451 02b6 7047     		bx	lr
 452              		.cfi_endproc
 453              	.LFE59:
 455              		.align	2
 456              		.thumb
 457              		.thumb_func
 459              	emac_CRCCalc:
 460              	.LFB60:
 210:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 
 211:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 
 212:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** /*********************************************************************//**
 213:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * @brief		Calculates CRC code for number of bytes in the frame
 214:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * @param[in]	frame_no_fcs	Pointer to the first byte of the frame
 215:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * @param[in]	frame_len		length of the frame without the FCS
 216:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * @return		the CRC as a 32 bit integer
 217:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  **********************************************************************/
 218:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** static int32_t emac_CRCCalc(uint8_t frame_no_fcs[], int32_t frame_len)
 219:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** {
 461              		.loc 1 219 0
 462              		.cfi_startproc
 463              		@ args = 0, pretend = 0, frame = 40
 464              		@ frame_needed = 1, uses_anonymous_args = 0
 465              		@ link register save eliminated.
 466 02b8 80B4     		push	{r7}
 467              	.LCFI15:
 468              		.cfi_def_cfa_offset 4
 469              		.cfi_offset 7, -4
 470 02ba 8BB0     		sub	sp, sp, #44
 471              	.LCFI16:
 472              		.cfi_def_cfa_offset 48
 473 02bc 00AF     		add	r7, sp, #0
 474              	.LCFI17:
 475              		.cfi_def_cfa_register 7
 476 02be 7860     		str	r0, [r7, #4]
 477 02c0 3960     		str	r1, [r7, #0]
 220:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	int i; 		// iterator
 221:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	int j; 		// another iterator
 222:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	char byte; 	// current byte
 223:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	int crc; 	// CRC result
 224:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	int q0, q1, q2, q3; // temporary variables
 225:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	crc = 0xFFFFFFFF;
 478              		.loc 1 225 0
 479 02c2 4FF0FF33 		mov	r3, #-1
 480 02c6 BB61     		str	r3, [r7, #24]
 226:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	for (i = 0; i < frame_len; i++) {
 481              		.loc 1 226 0
 482 02c8 4FF00003 		mov	r3, #0
 483 02cc 7B62     		str	r3, [r7, #36]
 484 02ce 7AE0     		b	.L19
 485              	.L30:
 227:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		byte = *frame_no_fcs++;
 486              		.loc 1 227 0
 487 02d0 7B68     		ldr	r3, [r7, #4]
 488 02d2 1B78     		ldrb	r3, [r3, #0]
 489 02d4 FB77     		strb	r3, [r7, #31]
 490 02d6 7B68     		ldr	r3, [r7, #4]
 491 02d8 03F10103 		add	r3, r3, #1
 492 02dc 7B60     		str	r3, [r7, #4]
 228:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		for (j = 0; j < 2; j++) {
 493              		.loc 1 228 0
 494 02de 4FF00003 		mov	r3, #0
 495 02e2 3B62     		str	r3, [r7, #32]
 496 02e4 68E0     		b	.L20
 497              	.L29:
 229:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 			if (((crc >> 28) ^ (byte >> 3)) & 0x00000001) {
 498              		.loc 1 229 0
 499 02e6 BB69     		ldr	r3, [r7, #24]
 500 02e8 4FEA2372 		asr	r2, r3, #28
 501 02ec FB7F     		ldrb	r3, [r7, #31]	@ zero_extendqisi2
 502 02ee 4FEAD303 		lsr	r3, r3, #3
 503 02f2 DBB2     		uxtb	r3, r3
 504 02f4 5340     		eors	r3, r3, r2
 505 02f6 03F00103 		and	r3, r3, #1
 506 02fa DBB2     		uxtb	r3, r3
 507 02fc 002B     		cmp	r3, #0
 508 02fe 05D0     		beq	.L21
 230:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 				q3 = 0x04C11DB7;
 509              		.loc 1 230 0
 510 0300 41F6B753 		movw	r3, #7607
 511 0304 C0F2C143 		movt	r3, 1217
 512 0308 BB60     		str	r3, [r7, #8]
 513 030a 02E0     		b	.L22
 514              	.L21:
 231:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 			} else {
 232:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 				q3 = 0x00000000;
 515              		.loc 1 232 0
 516 030c 4FF00003 		mov	r3, #0
 517 0310 BB60     		str	r3, [r7, #8]
 518              	.L22:
 233:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 			}
 234:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 			if (((crc >> 29) ^ (byte >> 2)) & 0x00000001) {
 519              		.loc 1 234 0
 520 0312 BB69     		ldr	r3, [r7, #24]
 521 0314 4FEA6372 		asr	r2, r3, #29
 522 0318 FB7F     		ldrb	r3, [r7, #31]	@ zero_extendqisi2
 523 031a 4FEA9303 		lsr	r3, r3, #2
 524 031e DBB2     		uxtb	r3, r3
 525 0320 5340     		eors	r3, r3, r2
 526 0322 03F00103 		and	r3, r3, #1
 527 0326 DBB2     		uxtb	r3, r3
 528 0328 002B     		cmp	r3, #0
 529 032a 05D0     		beq	.L23
 235:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 				q2 = 0x09823B6E;
 530              		.loc 1 235 0
 531 032c 43F66E33 		movw	r3, #15214
 532 0330 C0F68213 		movt	r3, 2434
 533 0334 FB60     		str	r3, [r7, #12]
 534 0336 02E0     		b	.L24
 535              	.L23:
 236:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 			} else {
 237:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 				q2 = 0x00000000;
 536              		.loc 1 237 0
 537 0338 4FF00003 		mov	r3, #0
 538 033c FB60     		str	r3, [r7, #12]
 539              	.L24:
 238:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 			}
 239:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 			if (((crc >> 30) ^ (byte >> 1)) & 0x00000001) {
 540              		.loc 1 239 0
 541 033e BB69     		ldr	r3, [r7, #24]
 542 0340 4FEAA372 		asr	r2, r3, #30
 543 0344 FB7F     		ldrb	r3, [r7, #31]	@ zero_extendqisi2
 544 0346 4FEA5303 		lsr	r3, r3, #1
 545 034a DBB2     		uxtb	r3, r3
 546 034c 5340     		eors	r3, r3, r2
 547 034e 03F00103 		and	r3, r3, #1
 548 0352 DBB2     		uxtb	r3, r3
 549 0354 002B     		cmp	r3, #0
 550 0356 05D0     		beq	.L25
 240:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 				q1 = 0x130476DC;
 551              		.loc 1 240 0
 552 0358 47F2DC63 		movw	r3, #30428
 553 035c C1F20433 		movt	r3, 4868
 554 0360 3B61     		str	r3, [r7, #16]
 555 0362 02E0     		b	.L26
 556              	.L25:
 241:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 			} else {
 242:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 				q1 = 0x00000000;
 557              		.loc 1 242 0
 558 0364 4FF00003 		mov	r3, #0
 559 0368 3B61     		str	r3, [r7, #16]
 560              	.L26:
 243:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 			}
 244:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 			if (((crc >> 31) ^ (byte >> 0)) & 0x00000001) {
 561              		.loc 1 244 0
 562 036a BB69     		ldr	r3, [r7, #24]
 563 036c 4FEAE372 		asr	r2, r3, #31
 564 0370 FB7F     		ldrb	r3, [r7, #31]	@ zero_extendqisi2
 565 0372 5340     		eors	r3, r3, r2
 566 0374 03F00103 		and	r3, r3, #1
 567 0378 DBB2     		uxtb	r3, r3
 568 037a 002B     		cmp	r3, #0
 569 037c 05D0     		beq	.L27
 245:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 				q0 = 0x2608EDB8;
 570              		.loc 1 245 0
 571 037e 4EF6B853 		movw	r3, #60856
 572 0382 C2F20863 		movt	r3, 9736
 573 0386 7B61     		str	r3, [r7, #20]
 574 0388 02E0     		b	.L28
 575              	.L27:
 246:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 			} else {
 247:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 				q0 = 0x00000000;
 576              		.loc 1 247 0
 577 038a 4FF00003 		mov	r3, #0
 578 038e 7B61     		str	r3, [r7, #20]
 579              	.L28:
 248:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 			}
 249:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 			crc = (crc << 4) ^ q3 ^ q2 ^ q1 ^ q0;
 580              		.loc 1 249 0
 581 0390 BB69     		ldr	r3, [r7, #24]
 582 0392 4FEA0312 		lsl	r2, r3, #4
 583 0396 BB68     		ldr	r3, [r7, #8]
 584 0398 5A40     		eors	r2, r2, r3
 585 039a FB68     		ldr	r3, [r7, #12]
 586 039c 5A40     		eors	r2, r2, r3
 587 039e 3B69     		ldr	r3, [r7, #16]
 588 03a0 5A40     		eors	r2, r2, r3
 589 03a2 7B69     		ldr	r3, [r7, #20]
 590 03a4 5340     		eors	r3, r3, r2
 591 03a6 BB61     		str	r3, [r7, #24]
 250:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 			byte >>= 4;
 592              		.loc 1 250 0
 593 03a8 FB7F     		ldrb	r3, [r7, #31]	@ zero_extendqisi2
 594 03aa 4FEA1313 		lsr	r3, r3, #4
 595 03ae FB77     		strb	r3, [r7, #31]
 228:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		for (j = 0; j < 2; j++) {
 596              		.loc 1 228 0
 597 03b0 3B6A     		ldr	r3, [r7, #32]
 598 03b2 03F10103 		add	r3, r3, #1
 599 03b6 3B62     		str	r3, [r7, #32]
 600              	.L20:
 228:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		for (j = 0; j < 2; j++) {
 601              		.loc 1 228 0 is_stmt 0 discriminator 1
 602 03b8 3B6A     		ldr	r3, [r7, #32]
 603 03ba 012B     		cmp	r3, #1
 604 03bc 93DD     		ble	.L29
 226:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	for (i = 0; i < frame_len; i++) {
 605              		.loc 1 226 0 is_stmt 1
 606 03be 7B6A     		ldr	r3, [r7, #36]
 607 03c0 03F10103 		add	r3, r3, #1
 608 03c4 7B62     		str	r3, [r7, #36]
 609              	.L19:
 226:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	for (i = 0; i < frame_len; i++) {
 610              		.loc 1 226 0 is_stmt 0 discriminator 1
 611 03c6 7A6A     		ldr	r2, [r7, #36]
 612 03c8 3B68     		ldr	r3, [r7, #0]
 613 03ca 9A42     		cmp	r2, r3
 614 03cc 80DB     		blt	.L30
 251:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		}
 252:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	}
 253:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	return crc;
 615              		.loc 1 253 0 is_stmt 1
 616 03ce BB69     		ldr	r3, [r7, #24]
 254:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** }
 617              		.loc 1 254 0
 618 03d0 1846     		mov	r0, r3
 619 03d2 07F12C07 		add	r7, r7, #44
 620 03d6 BD46     		mov	sp, r7
 621 03d8 80BC     		pop	{r7}
 622 03da 7047     		bx	lr
 623              		.cfi_endproc
 624              	.LFE60:
 626              		.align	2
 627              		.global	EMAC_Init
 628              		.thumb
 629              		.thumb_func
 631              	EMAC_Init:
 632              	.LFB61:
 255:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** /* End of Private Functions --------------------------------------------------- */
 256:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 
 257:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 
 258:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** /* Public Functions ----------------------------------------------------------- */
 259:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** /** @addtogroup EMAC_Public_Functions
 260:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * @{
 261:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  */
 262:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 
 263:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 
 264:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** /*********************************************************************//**
 265:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * @brief		Initializes the EMAC peripheral according to the specified
 266:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** *               parameters in the EMAC_ConfigStruct.
 267:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * @param[in]	EMAC_ConfigStruct Pointer to a EMAC_CFG_Type structure
 268:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** *                    that contains the configuration information for the
 269:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** *                    specified EMAC peripheral.
 270:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * @return		None
 271:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  *
 272:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * Note: This function will initialize EMAC module according to procedure below:
 273:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  *  - Remove the soft reset condition from the MAC
 274:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  *  - Configure the PHY via the MIIM interface of the MAC
 275:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  *  - Select RMII mode
 276:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  *  - Configure the transmit and receive DMA engines, including the descriptor arrays
 277:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  *  - Configure the host registers (MAC1,MAC2 etc.) in the MAC
 278:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  *  - Enable the receive and transmit data paths
 279:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  *  In default state after initializing, only Rx Done and Tx Done interrupt are enabled,
 280:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  *  all remain interrupts are disabled
 281:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  *  (Ref. from LPC17xx UM)
 282:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  **********************************************************************/
 283:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** Status EMAC_Init(EMAC_CFG_Type *EMAC_ConfigStruct)
 284:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** {
 633              		.loc 1 284 0
 634              		.cfi_startproc
 635              		@ args = 0, pretend = 0, frame = 16
 636              		@ frame_needed = 1, uses_anonymous_args = 0
 637 03dc 80B5     		push	{r7, lr}
 638              	.LCFI18:
 639              		.cfi_def_cfa_offset 8
 640              		.cfi_offset 14, -4
 641              		.cfi_offset 7, -8
 642 03de 84B0     		sub	sp, sp, #16
 643              	.LCFI19:
 644              		.cfi_def_cfa_offset 24
 645 03e0 00AF     		add	r7, sp, #0
 646              	.LCFI20:
 647              		.cfi_def_cfa_register 7
 648 03e2 7860     		str	r0, [r7, #4]
 285:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	/* Initialize the EMAC Ethernet controller. */
 286:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	int32_t regv,tout, tmp;
 287:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 
 288:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	/* Set up clock and power for Ethernet module */
 289:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	CLKPWR_ConfigPPWR (CLKPWR_PCONP_PCENET, ENABLE);
 649              		.loc 1 289 0
 650 03e4 4FF08040 		mov	r0, #1073741824
 651 03e8 4FF00101 		mov	r1, #1
 652 03ec FFF7FEFF 		bl	CLKPWR_ConfigPPWR
 290:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 
 291:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	/* Reset all EMAC internal modules */
 292:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	LPC_EMAC->MAC1    = EMAC_MAC1_RES_TX | EMAC_MAC1_RES_MCS_TX | EMAC_MAC1_RES_RX |
 653              		.loc 1 292 0
 654 03f0 4FF0A043 		mov	r3, #1342177280
 655 03f4 4FF44F42 		mov	r2, #52992
 656 03f8 1A60     		str	r2, [r3, #0]
 293:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 					EMAC_MAC1_RES_MCS_RX | EMAC_MAC1_SIM_RES | EMAC_MAC1_SOFT_RES;
 294:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 
 295:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	LPC_EMAC->Command = EMAC_CR_REG_RES | EMAC_CR_TX_RES | EMAC_CR_RX_RES | EMAC_CR_PASS_RUNT_FRM;
 657              		.loc 1 295 0
 658 03fa 4FF0A043 		mov	r3, #1342177280
 659 03fe 4FF07802 		mov	r2, #120
 660 0402 C3F80021 		str	r2, [r3, #256]
 296:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 
 297:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	/* A short delay after reset. */
 298:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	for (tout = 100; tout; tout--);
 661              		.loc 1 298 0
 662 0406 4FF06403 		mov	r3, #100
 663 040a FB60     		str	r3, [r7, #12]
 664 040c 03E0     		b	.L32
 665              	.L33:
 666              		.loc 1 298 0 is_stmt 0 discriminator 2
 667 040e FB68     		ldr	r3, [r7, #12]
 668 0410 03F1FF33 		add	r3, r3, #-1
 669 0414 FB60     		str	r3, [r7, #12]
 670              	.L32:
 671              		.loc 1 298 0 discriminator 1
 672 0416 FB68     		ldr	r3, [r7, #12]
 673 0418 002B     		cmp	r3, #0
 674 041a F8D1     		bne	.L33
 299:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 
 300:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	/* Initialize MAC control registers. */
 301:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	LPC_EMAC->MAC1 = EMAC_MAC1_PASS_ALL;
 675              		.loc 1 301 0 is_stmt 1
 676 041c 4FF0A043 		mov	r3, #1342177280
 677 0420 4FF00202 		mov	r2, #2
 678 0424 1A60     		str	r2, [r3, #0]
 302:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	LPC_EMAC->MAC2 = EMAC_MAC2_CRC_EN | EMAC_MAC2_PAD_EN;
 679              		.loc 1 302 0
 680 0426 4FF0A043 		mov	r3, #1342177280
 681 042a 4FF03002 		mov	r2, #48
 682 042e 5A60     		str	r2, [r3, #4]
 303:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	LPC_EMAC->MAXF = EMAC_ETH_MAX_FLEN;
 683              		.loc 1 303 0
 684 0430 4FF0A043 		mov	r3, #1342177280
 685 0434 4FF4C062 		mov	r2, #1536
 686 0438 5A61     		str	r2, [r3, #20]
 304:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	/*
 305:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	 * Find the clock that close to desired target clock
 306:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	 */
 307:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	tmp = SystemCoreClock / EMAC_MCFG_MII_MAXCLK;
 687              		.loc 1 307 0
 688 043a 40F20003 		movw	r3, #:lower16:SystemCoreClock
 689 043e C0F20003 		movt	r3, #:upper16:SystemCoreClock
 690 0442 1A68     		ldr	r2, [r3, #0]
 691 0444 4CF66B23 		movw	r3, #51819
 692 0448 C6F65F33 		movt	r3, 27487
 693 044c A3FB0213 		umull	r1, r3, r3, r2
 694 0450 4FEA1353 		lsr	r3, r3, #20
 695 0454 BB60     		str	r3, [r7, #8]
 308:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	for (tout = 0; tout < sizeof (EMAC_clkdiv); tout++){
 696              		.loc 1 308 0
 697 0456 4FF00003 		mov	r3, #0
 698 045a FB60     		str	r3, [r7, #12]
 699 045c 0EE0     		b	.L34
 700              	.L37:
 309:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		if (EMAC_clkdiv[tout] >= tmp) break;
 701              		.loc 1 309 0
 702 045e 40F20003 		movw	r3, #:lower16:EMAC_clkdiv
 703 0462 C0F20003 		movt	r3, #:upper16:EMAC_clkdiv
 704 0466 FA68     		ldr	r2, [r7, #12]
 705 0468 9B18     		adds	r3, r3, r2
 706 046a 1B78     		ldrb	r3, [r3, #0]	@ zero_extendqisi2
 707 046c 1A46     		mov	r2, r3
 708 046e BB68     		ldr	r3, [r7, #8]
 709 0470 9A42     		cmp	r2, r3
 710 0472 07DA     		bge	.L40
 711              	.L35:
 308:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	for (tout = 0; tout < sizeof (EMAC_clkdiv); tout++){
 712              		.loc 1 308 0
 713 0474 FB68     		ldr	r3, [r7, #12]
 714 0476 03F10103 		add	r3, r3, #1
 715 047a FB60     		str	r3, [r7, #12]
 716              	.L34:
 308:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	for (tout = 0; tout < sizeof (EMAC_clkdiv); tout++){
 717              		.loc 1 308 0 is_stmt 0 discriminator 1
 718 047c FB68     		ldr	r3, [r7, #12]
 719 047e 062B     		cmp	r3, #6
 720 0480 EDD9     		bls	.L37
 721 0482 00E0     		b	.L36
 722              	.L40:
 723              		.loc 1 309 0 is_stmt 1
 724 0484 00BF     		nop
 725              	.L36:
 310:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	}
 311:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	tout++;
 726              		.loc 1 311 0
 727 0486 FB68     		ldr	r3, [r7, #12]
 728 0488 03F10103 		add	r3, r3, #1
 729 048c FB60     		str	r3, [r7, #12]
 312:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	// Write to MAC configuration register and reset
 313:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	LPC_EMAC->MCFG = EMAC_MCFG_CLK_SEL(tout) | EMAC_MCFG_RES_MII;
 730              		.loc 1 313 0
 731 048e 4FF0A041 		mov	r1, #1342177280
 732 0492 FB68     		ldr	r3, [r7, #12]
 733 0494 03F00F03 		and	r3, r3, #15
 734 0498 4FEA8303 		lsl	r3, r3, #2
 735 049c 43F40043 		orr	r3, r3, #32768
 736 04a0 1A46     		mov	r2, r3
 737 04a2 0B46     		mov	r3, r1
 738 04a4 1A62     		str	r2, [r3, #32]
 314:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	// release reset
 315:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	LPC_EMAC->MCFG &= ~(EMAC_MCFG_RES_MII);
 739              		.loc 1 315 0
 740 04a6 4FF0A041 		mov	r1, #1342177280
 741 04aa 4FF0A043 		mov	r3, #1342177280
 742 04ae 1B6A     		ldr	r3, [r3, #32]
 743 04b0 23F40042 		bic	r2, r3, #32768
 744 04b4 0B46     		mov	r3, r1
 745 04b6 1A62     		str	r2, [r3, #32]
 316:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	LPC_EMAC->CLRT = EMAC_CLRT_DEF;
 746              		.loc 1 316 0
 747 04b8 4FF0A043 		mov	r3, #1342177280
 748 04bc 43F20F72 		movw	r2, #14095
 749 04c0 1A61     		str	r2, [r3, #16]
 317:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	LPC_EMAC->IPGR = EMAC_IPGR_P2_DEF;
 750              		.loc 1 317 0
 751 04c2 4FF0A043 		mov	r3, #1342177280
 752 04c6 4FF01202 		mov	r2, #18
 753 04ca DA60     		str	r2, [r3, #12]
 318:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 
 319:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	/* Enable Reduced MII interface. */
 320:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	LPC_EMAC->Command = EMAC_CR_RMII | EMAC_CR_PASS_RUNT_FRM;
 754              		.loc 1 320 0
 755 04cc 4FF0A043 		mov	r3, #1342177280
 756 04d0 4FF41072 		mov	r2, #576
 757 04d4 C3F80021 		str	r2, [r3, #256]
 321:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 
 322:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	/* Reset Reduced MII Logic. */
 323:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	LPC_EMAC->SUPP = EMAC_SUPP_RES_RMII;
 758              		.loc 1 323 0
 759 04d8 4FF0A043 		mov	r3, #1342177280
 760 04dc 4FF40062 		mov	r2, #2048
 761 04e0 9A61     		str	r2, [r3, #24]
 324:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 
 325:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	for (tout = 100; tout; tout--);
 762              		.loc 1 325 0
 763 04e2 4FF06403 		mov	r3, #100
 764 04e6 FB60     		str	r3, [r7, #12]
 765 04e8 03E0     		b	.L38
 766              	.L39:
 767              		.loc 1 325 0 is_stmt 0 discriminator 2
 768 04ea FB68     		ldr	r3, [r7, #12]
 769 04ec 03F1FF33 		add	r3, r3, #-1
 770 04f0 FB60     		str	r3, [r7, #12]
 771              	.L38:
 772              		.loc 1 325 0 discriminator 1
 773 04f2 FB68     		ldr	r3, [r7, #12]
 774 04f4 002B     		cmp	r3, #0
 775 04f6 F8D1     		bne	.L39
 326:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	LPC_EMAC->SUPP = (1<<8);
 776              		.loc 1 326 0 is_stmt 1
 777 04f8 4FF0A043 		mov	r3, #1342177280
 778 04fc 4FF48072 		mov	r2, #256
 779 0500 9A61     		str	r2, [r3, #24]
 327:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 
 328:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** //	/* Put the PHY in reset mode */
 329:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** //	if(write_PHY (EMAC_PHY_REG_BMCR, EMAC_PHY_BMCR_RESET)!=0){
 330:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** //		for(;;);	/* Timeout occured */
 331:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** //	}
 332:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 
 333:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** //	/* Wait for hardware reset to end. */
 334:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** //	for (tout = EMAC_PHY_RESP_TOUT; tout; tout--) {
 335:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** //		regv = read_PHY (EMAC_PHY_REG_BMCR);
 336:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** //		if (!(regv & (EMAC_PHY_BMCR_RESET | EMAC_PHY_BMCR_POWERDOWN))) {
 337:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** //			/* Reset complete, device not Power Down. */
 338:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** //			break;
 339:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** //		}
 340:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** //		if (tout == 0){
 341:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** //			// Time out occured
 342:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** //			for(;;);
 343:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** //		}
 344:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** //	}
 345:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** //
 346:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** //	// Set PHY mode
 347:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** //	if (EMAC_SetPHYMode(EMAC_ConfigStruct->Mode) < 0){
 348:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** //		for(;;);
 349:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** //	}
 350:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 
 351:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	// Set EMAC address
 352:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	setEmacAddr(EMAC_ConfigStruct->pbEMAC_Addr);
 780              		.loc 1 352 0
 781 0502 7B68     		ldr	r3, [r7, #4]
 782 0504 5B68     		ldr	r3, [r3, #4]
 783 0506 1846     		mov	r0, r3
 784 0508 FFF7A2FE 		bl	setEmacAddr
 353:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 
 354:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	/* Initialize Tx and Rx DMA Descriptors */
 355:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	rx_descr_init ();
 785              		.loc 1 355 0
 786 050c FFF778FD 		bl	rx_descr_init
 356:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	tx_descr_init ();
 787              		.loc 1 356 0
 788 0510 FFF7DCFD 		bl	tx_descr_init
 357:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 
 358:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	// Set Receive Filter register: enable broadcast and multicast
 359:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	LPC_EMAC->RxFilterCtrl = EMAC_RFC_MCAST_EN | EMAC_RFC_BCAST_EN | EMAC_RFC_PERFECT_EN;
 789              		.loc 1 359 0
 790 0514 4FF0A043 		mov	r3, #1342177280
 791 0518 4FF02602 		mov	r2, #38
 792 051c C3F80022 		str	r2, [r3, #512]
 360:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 
 361:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	/* Enable Rx Done and Tx Done interrupt for EMAC */
 362:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	LPC_EMAC->IntEnable = EMAC_INT_RX_DONE | EMAC_INT_TX_DONE;
 793              		.loc 1 362 0
 794 0520 4FF0A043 		mov	r3, #1342177280
 795 0524 4FF08802 		mov	r2, #136
 796 0528 C3F8E42F 		str	r2, [r3, #4068]
 363:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 
 364:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	/* Reset all interrupts */
 365:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	LPC_EMAC->IntClear  = 0xFFFF;
 797              		.loc 1 365 0
 798 052c 4FF0A043 		mov	r3, #1342177280
 799 0530 4FF6FF72 		movw	r2, #65535
 800 0534 C3F8E82F 		str	r2, [r3, #4072]
 366:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 
 367:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	/* Enable receive and transmit mode of MAC Ethernet core */
 368:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	LPC_EMAC->Command  |= (EMAC_CR_RX_EN | EMAC_CR_TX_EN);
 801              		.loc 1 368 0
 802 0538 4FF0A041 		mov	r1, #1342177280
 803 053c 4FF0A043 		mov	r3, #1342177280
 804 0540 D3F80031 		ldr	r3, [r3, #256]
 805 0544 43F00302 		orr	r2, r3, #3
 806 0548 0B46     		mov	r3, r1
 807 054a C3F80021 		str	r2, [r3, #256]
 369:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	LPC_EMAC->MAC1     |= EMAC_MAC1_REC_EN;
 808              		.loc 1 369 0
 809 054e 4FF0A041 		mov	r1, #1342177280
 810 0552 4FF0A043 		mov	r3, #1342177280
 811 0556 1B68     		ldr	r3, [r3, #0]
 812 0558 43F00102 		orr	r2, r3, #1
 813 055c 0B46     		mov	r3, r1
 814 055e 1A60     		str	r2, [r3, #0]
 370:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 
 371:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	return SUCCESS;
 815              		.loc 1 371 0
 816 0560 4FF00103 		mov	r3, #1
 372:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** }
 817              		.loc 1 372 0
 818 0564 1846     		mov	r0, r3
 819 0566 07F11007 		add	r7, r7, #16
 820 056a BD46     		mov	sp, r7
 821 056c 80BD     		pop	{r7, pc}
 822              		.cfi_endproc
 823              	.LFE61:
 825 056e 00BF     		.align	2
 826              		.global	EMAC_DeInit
 827              		.thumb
 828              		.thumb_func
 830              	EMAC_DeInit:
 831              	.LFB62:
 373:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 
 374:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 
 375:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** /*********************************************************************//**
 376:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * @brief		De-initializes the EMAC peripheral registers to their
 377:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** *                  default reset values.
 378:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * @param[in]	None
 379:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * @return 		None
 380:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  **********************************************************************/
 381:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** void EMAC_DeInit(void)
 382:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** {
 832              		.loc 1 382 0
 833              		.cfi_startproc
 834              		@ args = 0, pretend = 0, frame = 0
 835              		@ frame_needed = 1, uses_anonymous_args = 0
 836 0570 80B5     		push	{r7, lr}
 837              	.LCFI21:
 838              		.cfi_def_cfa_offset 8
 839              		.cfi_offset 14, -4
 840              		.cfi_offset 7, -8
 841 0572 00AF     		add	r7, sp, #0
 842              	.LCFI22:
 843              		.cfi_def_cfa_register 7
 383:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	// Disable all interrupt
 384:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	LPC_EMAC->IntEnable = 0x00;
 844              		.loc 1 384 0
 845 0574 4FF0A043 		mov	r3, #1342177280
 846 0578 4FF00002 		mov	r2, #0
 847 057c C3F8E42F 		str	r2, [r3, #4068]
 385:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	// Clear all pending interrupt
 386:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	LPC_EMAC->IntClear = (0xFF) | (EMAC_INT_SOFT_INT | EMAC_INT_WAKEUP);
 848              		.loc 1 386 0
 849 0580 4FF0A043 		mov	r3, #1342177280
 850 0584 43F2FF02 		movw	r2, #12543
 851 0588 C3F8E82F 		str	r2, [r3, #4072]
 387:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 
 388:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	/* TurnOff clock and power for Ethernet module */
 389:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	CLKPWR_ConfigPPWR (CLKPWR_PCONP_PCENET, DISABLE);
 852              		.loc 1 389 0
 853 058c 4FF08040 		mov	r0, #1073741824
 854 0590 4FF00001 		mov	r1, #0
 855 0594 FFF7FEFF 		bl	CLKPWR_ConfigPPWR
 390:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** }
 856              		.loc 1 390 0
 857 0598 80BD     		pop	{r7, pc}
 858              		.cfi_endproc
 859              	.LFE62:
 861 059a 00BF     		.align	2
 862              		.global	EMAC_CheckPHYStatus
 863              		.thumb
 864              		.thumb_func
 866              	EMAC_CheckPHYStatus:
 867              	.LFB63:
 391:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 
 392:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 
 393:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** /*********************************************************************//**
 394:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * @brief		Check specified PHY status in EMAC peripheral
 395:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * @param[in]	ulPHYState	Specified PHY Status Type, should be:
 396:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * 							- EMAC_PHY_STAT_LINK: Link Status
 397:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * 							- EMAC_PHY_STAT_SPEED: Speed Status
 398:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * 							- EMAC_PHY_STAT_DUP: Duplex Status
 399:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * @return		Status of specified PHY status (0 or 1).
 400:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * 				(-1) if error.
 401:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  *
 402:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * Note:
 403:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * For EMAC_PHY_STAT_LINK, return value:
 404:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * - 0: Link Down
 405:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * - 1: Link Up
 406:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * For EMAC_PHY_STAT_SPEED, return value:
 407:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * - 0: 10Mbps
 408:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * - 1: 100Mbps
 409:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * For EMAC_PHY_STAT_DUP, return value:
 410:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * - 0: Half-Duplex
 411:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * - 1: Full-Duplex
 412:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  **********************************************************************/
 413:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** int32_t EMAC_CheckPHYStatus(uint32_t ulPHYState)
 414:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** {
 868              		.loc 1 414 0
 869              		.cfi_startproc
 870              		@ args = 0, pretend = 0, frame = 16
 871              		@ frame_needed = 1, uses_anonymous_args = 0
 872 059c 80B5     		push	{r7, lr}
 873              	.LCFI23:
 874              		.cfi_def_cfa_offset 8
 875              		.cfi_offset 14, -4
 876              		.cfi_offset 7, -8
 877 059e 84B0     		sub	sp, sp, #16
 878              	.LCFI24:
 879              		.cfi_def_cfa_offset 24
 880 05a0 00AF     		add	r7, sp, #0
 881              	.LCFI25:
 882              		.cfi_def_cfa_register 7
 883 05a2 7860     		str	r0, [r7, #4]
 415:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	int32_t regv, tmp;
 416:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** #ifdef MCB_LPC_1768
 417:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	regv = read_PHY (EMAC_PHY_REG_STS);
 418:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	switch(ulPHYState){
 419:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	case EMAC_PHY_STAT_LINK:
 420:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		tmp = (regv & EMAC_PHY_SR_LINK) ? 1 : 0;
 421:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		break;
 422:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	case EMAC_PHY_STAT_SPEED:
 423:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		tmp = (regv & EMAC_PHY_SR_SPEED) ? 0 : 1;
 424:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		break;
 425:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	case EMAC_PHY_STAT_DUP:
 426:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		tmp = (regv & EMAC_PHY_SR_FULL_DUP) ? 1 : 0;
 427:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		break;
 428:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** #elif defined(IAR_LPC_1768)
 429:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	/* Use IAR_LPC_1768 board:
 430:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	 * FSZ8721BL doesn't have Status Register
 431:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	 * so we read Basic Mode Status Register (0x01h) instead
 432:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	 */
 433:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	regv = read_PHY (EMAC_PHY_REG_BMSR);
 434:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	switch(ulPHYState){
 435:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	case EMAC_PHY_STAT_LINK:
 436:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		tmp = (regv & EMAC_PHY_BMSR_LINK_STATUS) ? 1 : 0;
 437:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		break;
 438:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	case EMAC_PHY_STAT_SPEED:
 439:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		tmp = (regv & EMAC_PHY_SR_100_SPEED) ? 1 : 0;
 440:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		break;
 441:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	case EMAC_PHY_STAT_DUP:
 442:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		tmp = (regv & EMAC_PHY_SR_FULL_DUP) ? 1 : 0;
 443:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		break;
 444:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** #elif defined(eStickv2)
 445:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	regv = read_PHY (EMAC_PHY_REG_BMSR);
 884              		.loc 1 445 0
 885 05a4 4FF00100 		mov	r0, #1
 886 05a8 FFF71AFE 		bl	read_PHY
 887 05ac B860     		str	r0, [r7, #8]
 446:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	switch(ulPHYState){
 888              		.loc 1 446 0
 889 05ae 7B68     		ldr	r3, [r7, #4]
 890 05b0 012B     		cmp	r3, #1
 891 05b2 0DD0     		beq	.L45
 892 05b4 012B     		cmp	r3, #1
 893 05b6 02D3     		bcc	.L44
 894 05b8 022B     		cmp	r3, #2
 895 05ba 12D0     		beq	.L46
 896 05bc 1AE0     		b	.L48
 897              	.L44:
 447:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	case EMAC_PHY_STAT_LINK:
 448:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		tmp = (regv & EMAC_PHY_BMSR_LINK_STATUS) ? 1 : 0;
 898              		.loc 1 448 0
 899 05be BB68     		ldr	r3, [r7, #8]
 900 05c0 03F00403 		and	r3, r3, #4
 901 05c4 002B     		cmp	r3, #0
 902 05c6 0CBF     		ite	eq
 903 05c8 0023     		moveq	r3, #0
 904 05ca 0123     		movne	r3, #1
 905 05cc FB60     		str	r3, [r7, #12]
 449:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		break;
 906              		.loc 1 449 0
 907 05ce 15E0     		b	.L47
 908              	.L45:
 450:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	case EMAC_PHY_STAT_SPEED:
 451:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		tmp = (regv & EMAC_PHY_SR_100_SPEED) ? 1 : 0;
 909              		.loc 1 451 0
 910 05d0 BB68     		ldr	r3, [r7, #8]
 911 05d2 03F4C043 		and	r3, r3, #24576
 912 05d6 002B     		cmp	r3, #0
 913 05d8 0CBF     		ite	eq
 914 05da 0023     		moveq	r3, #0
 915 05dc 0123     		movne	r3, #1
 916 05de FB60     		str	r3, [r7, #12]
 452:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		break;
 917              		.loc 1 452 0
 918 05e0 0CE0     		b	.L47
 919              	.L46:
 453:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	case EMAC_PHY_STAT_DUP:
 454:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		tmp = (regv & EMAC_PHY_SR_FULL_DUP) ? 1 : 0;
 920              		.loc 1 454 0
 921 05e2 BB68     		ldr	r3, [r7, #8]
 922 05e4 03F4A043 		and	r3, r3, #20480
 923 05e8 002B     		cmp	r3, #0
 924 05ea 0CBF     		ite	eq
 925 05ec 0023     		moveq	r3, #0
 926 05ee 0123     		movne	r3, #1
 927 05f0 FB60     		str	r3, [r7, #12]
 455:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		break;
 928              		.loc 1 455 0
 929 05f2 03E0     		b	.L47
 930              	.L48:
 456:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** #endif
 457:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	default:
 458:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		tmp = -1;
 931              		.loc 1 458 0
 932 05f4 4FF0FF33 		mov	r3, #-1
 933 05f8 FB60     		str	r3, [r7, #12]
 459:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		break;
 934              		.loc 1 459 0
 935 05fa 00BF     		nop
 936              	.L47:
 460:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	}
 461:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	return (tmp);
 937              		.loc 1 461 0
 938 05fc FB68     		ldr	r3, [r7, #12]
 462:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** }
 939              		.loc 1 462 0
 940 05fe 1846     		mov	r0, r3
 941 0600 07F11007 		add	r7, r7, #16
 942 0604 BD46     		mov	sp, r7
 943 0606 80BD     		pop	{r7, pc}
 944              		.cfi_endproc
 945              	.LFE63:
 947              		.align	2
 948              		.global	EMAC_SetPHYMode
 949              		.thumb
 950              		.thumb_func
 952              	EMAC_SetPHYMode:
 953              	.LFB64:
 463:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 
 464:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 
 465:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** /*********************************************************************//**
 466:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * @brief		Set specified PHY mode in EMAC peripheral
 467:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * @param[in]	ulPHYMode	Specified PHY mode, should be:
 468:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * 							- EMAC_MODE_AUTO
 469:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * 							- EMAC_MODE_10M_FULL
 470:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * 							- EMAC_MODE_10M_HALF
 471:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * 							- EMAC_MODE_100M_FULL
 472:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * 							- EMAC_MODE_100M_HALF
 473:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * @return		Return (0) if no error, otherwise return (-1)
 474:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  **********************************************************************/
 475:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** int32_t EMAC_SetPHYMode(uint32_t ulPHYMode)
 476:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** {
 954              		.loc 1 476 0
 955              		.cfi_startproc
 956              		@ args = 0, pretend = 0, frame = 24
 957              		@ frame_needed = 1, uses_anonymous_args = 0
 958 0608 80B5     		push	{r7, lr}
 959              	.LCFI26:
 960              		.cfi_def_cfa_offset 8
 961              		.cfi_offset 14, -4
 962              		.cfi_offset 7, -8
 963 060a 86B0     		sub	sp, sp, #24
 964              	.LCFI27:
 965              		.cfi_def_cfa_offset 32
 966 060c 00AF     		add	r7, sp, #0
 967              	.LCFI28:
 968              		.cfi_def_cfa_register 7
 969 060e 7860     		str	r0, [r7, #4]
 477:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	int32_t id1, id2, tout, regv, id;
 478:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 
 479:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	/* Check if this is a DP83848C PHY. */
 480:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	id1 = read_PHY (EMAC_PHY_REG_IDR1);
 970              		.loc 1 480 0
 971 0610 4FF00200 		mov	r0, #2
 972 0614 FFF7E4FD 		bl	read_PHY
 973 0618 3861     		str	r0, [r7, #16]
 481:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	id2 = read_PHY (EMAC_PHY_REG_IDR2);
 974              		.loc 1 481 0
 975 061a 4FF00300 		mov	r0, #3
 976 061e FFF7DFFD 		bl	read_PHY
 977 0622 F860     		str	r0, [r7, #12]
 482:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 
 483:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** #ifdef MCB_LPC_1768
 484:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	if (((id1 << 16) | (id2 & 0xFFF0)) == EMAC_DP83848C_ID) {
 485:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		switch(ulPHYMode){
 486:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		case EMAC_MODE_AUTO:
 487:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 			write_PHY (EMAC_PHY_REG_BMCR, EMAC_PHY_AUTO_NEG);
 488:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** #elif defined(IAR_LPC_1768) /* Use IAR LPC1768 KickStart board */
 489:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	if (((id1 << 16) | id2) == EMAC_KSZ8721BL_ID) {
 490:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		/* Configure the PHY device */
 491:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		switch(ulPHYMode){
 492:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		case EMAC_MODE_AUTO:
 493:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 			/* Use auto-negotiation about the link speed. */
 494:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 			write_PHY (EMAC_PHY_REG_BMCR, EMAC_PHY_AUTO_NEG);
 495:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** //			write_PHY (EMAC_PHY_REG_BMCR, EMAC_PHY_BMCR_AN);
 496:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** #elif defined(eStickv2) /* Use eStickv2 board */
 497:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	if (((id1 << 16) | id2) == EMAC_KSZ8031_ID) {
 978              		.loc 1 497 0
 979 0624 3B69     		ldr	r3, [r7, #16]
 980 0626 4FEA0342 		lsl	r2, r3, #16
 981 062a FB68     		ldr	r3, [r7, #12]
 982 062c 1343     		orrs	r3, r3, r2
 983 062e 002B     		cmp	r3, #0
 984 0630 57D1     		bne	.L50
 498:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		/* Configure the PHY device */
 499:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		switch(ulPHYMode){
 985              		.loc 1 499 0
 986 0632 7B68     		ldr	r3, [r7, #4]
 987 0634 042B     		cmp	r3, #4
 988 0636 4BD8     		bhi	.L51
 989 0638 01A2     		adr	r2, .L57
 990 063a 52F823F0 		ldr	pc, [r2, r3, lsl #2]
 991 063e 00BF     		.align	2
 992              	.L57:
 993 0640 55060000 		.word	.L52+1
 994 0644 99060000 		.word	.L53+1
 995 0648 A7060000 		.word	.L54+1
 996 064c B5060000 		.word	.L55+1
 997 0650 C3060000 		.word	.L56+1
 998              	.L52:
 500:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		case EMAC_MODE_AUTO:
 501:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 			/* Use auto-negotiation about the link speed. */
 502:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 			write_PHY (EMAC_PHY_REG_BMCR, EMAC_PHY_AUTO_NEG);
 999              		.loc 1 502 0
 1000 0654 4FF00000 		mov	r0, #0
 1001 0658 4FF44051 		mov	r1, #12288
 1002 065c FFF78EFD 		bl	write_PHY
 503:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** //			write_PHY (EMAC_PHY_REG_BMCR, EMAC_PHY_BMCR_AN);
 504:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** #endif
 505:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 			/* Wait to complete Auto_Negotiation */
 506:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 			for (tout = EMAC_PHY_RESP_TOUT; tout; tout--) {
 1003              		.loc 1 506 0
 1004 0660 4FF48013 		mov	r3, #1048576
 1005 0664 7B61     		str	r3, [r7, #20]
 1006 0666 11E0     		b	.L58
 1007              	.L63:
 507:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 				regv = read_PHY (EMAC_PHY_REG_BMSR);
 1008              		.loc 1 507 0
 1009 0668 4FF00100 		mov	r0, #1
 1010 066c FFF7B8FD 		bl	read_PHY
 1011 0670 B860     		str	r0, [r7, #8]
 508:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 				if (regv & EMAC_PHY_BMSR_AUTO_DONE) {
 1012              		.loc 1 508 0
 1013 0672 BB68     		ldr	r3, [r7, #8]
 1014 0674 03F02003 		and	r3, r3, #32
 1015 0678 002B     		cmp	r3, #0
 1016 067a 0BD1     		bne	.L70
 1017              	.L59:
 509:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 					/* Auto-negotiation Complete. */
 510:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 					break;
 511:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 				}
 512:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 				if (tout == 0){
 1018              		.loc 1 512 0
 1019 067c 7B69     		ldr	r3, [r7, #20]
 1020 067e 002B     		cmp	r3, #0
 1021 0680 00D1     		bne	.L61
 1022              	.L62:
 513:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 					// Time out occured
 514:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 					for(;;);
 1023              		.loc 1 514 0 discriminator 1
 1024 0682 FEE7     		b	.L62
 1025              	.L61:
 506:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 			for (tout = EMAC_PHY_RESP_TOUT; tout; tout--) {
 1026              		.loc 1 506 0
 1027 0684 7B69     		ldr	r3, [r7, #20]
 1028 0686 03F1FF33 		add	r3, r3, #-1
 1029 068a 7B61     		str	r3, [r7, #20]
 1030              	.L58:
 506:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 			for (tout = EMAC_PHY_RESP_TOUT; tout; tout--) {
 1031              		.loc 1 506 0 is_stmt 0 discriminator 1
 1032 068c 7B69     		ldr	r3, [r7, #20]
 1033 068e 002B     		cmp	r3, #0
 1034 0690 EAD1     		bne	.L63
 515:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 				}
 516:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 			}
 517:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 			break;
 1035              		.loc 1 517 0 is_stmt 1
 1036 0692 20E0     		b	.L64
 1037              	.L70:
 510:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 					break;
 1038              		.loc 1 510 0
 1039 0694 00BF     		nop
 1040              	.L68:
 1041              		.loc 1 517 0
 1042 0696 1EE0     		b	.L64
 1043              	.L53:
 518:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		case EMAC_MODE_10M_FULL:
 519:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 			/* Connect at 10MBit full-duplex */
 520:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 			write_PHY (EMAC_PHY_REG_BMCR, EMAC_PHY_FULLD_10M);
 1044              		.loc 1 520 0
 1045 0698 4FF00000 		mov	r0, #0
 1046 069c 4FF48071 		mov	r1, #256
 1047 06a0 FFF76CFD 		bl	write_PHY
 521:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 			break;
 1048              		.loc 1 521 0
 1049 06a4 17E0     		b	.L64
 1050              	.L54:
 522:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		case EMAC_MODE_10M_HALF:
 523:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 			/* Connect at 10MBit half-duplex */
 524:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 			write_PHY (EMAC_PHY_REG_BMCR, EMAC_PHY_HALFD_10M);
 1051              		.loc 1 524 0
 1052 06a6 4FF00000 		mov	r0, #0
 1053 06aa 4FF00001 		mov	r1, #0
 1054 06ae FFF765FD 		bl	write_PHY
 525:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 			break;
 1055              		.loc 1 525 0
 1056 06b2 10E0     		b	.L64
 1057              	.L55:
 526:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		case EMAC_MODE_100M_FULL:
 527:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 			/* Connect at 100MBit full-duplex */
 528:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 			write_PHY (EMAC_PHY_REG_BMCR, EMAC_PHY_FULLD_100M);
 1058              		.loc 1 528 0
 1059 06b4 4FF00000 		mov	r0, #0
 1060 06b8 4FF40451 		mov	r1, #8448
 1061 06bc FFF75EFD 		bl	write_PHY
 529:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 			break;
 1062              		.loc 1 529 0
 1063 06c0 09E0     		b	.L64
 1064              	.L56:
 530:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		case EMAC_MODE_100M_HALF:
 531:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 			/* Connect at 100MBit half-duplex */
 532:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 			write_PHY (EMAC_PHY_REG_BMCR, EMAC_PHY_HALFD_100M);
 1065              		.loc 1 532 0
 1066 06c2 4FF00000 		mov	r0, #0
 1067 06c6 4FF40051 		mov	r1, #8192
 1068 06ca FFF757FD 		bl	write_PHY
 533:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 			break;
 1069              		.loc 1 533 0
 1070 06ce 02E0     		b	.L64
 1071              	.L51:
 534:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		default:
 535:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 			// un-supported
 536:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 			return (-1);
 1072              		.loc 1 536 0
 1073 06d0 4FF0FF33 		mov	r3, #-1
 1074 06d4 09E0     		b	.L65
 1075              	.L64:
 537:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		}
 538:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	}
 539:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	// It's not correct module ID
 540:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	else {
 541:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		for(;;);
 542:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	}
 543:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 
 544:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	// Update EMAC configuration with current PHY status
 545:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	if (EMAC_UpdatePHYStatus() < 0){
 1076              		.loc 1 545 0
 1077 06d6 FFF7FEFF 		bl	EMAC_UpdatePHYStatus
 1078 06da 0346     		mov	r3, r0
 1079 06dc 002B     		cmp	r3, #0
 1080 06de 01DB     		blt	.L66
 1081 06e0 01E0     		b	.L69
 1082              	.L50:
 541:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		for(;;);
 1083              		.loc 1 541 0 discriminator 1
 1084 06e2 FEE7     		b	.L50
 1085              	.L66:
 546:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		for(;;);
 1086              		.loc 1 546 0 discriminator 1
 1087 06e4 FEE7     		b	.L66
 1088              	.L69:
 547:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	}
 548:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 
 549:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	// Complete
 550:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	return (0);
 1089              		.loc 1 550 0
 1090 06e6 4FF00003 		mov	r3, #0
 1091              	.L65:
 551:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** }
 1092              		.loc 1 551 0
 1093 06ea 1846     		mov	r0, r3
 1094 06ec 07F11807 		add	r7, r7, #24
 1095 06f0 BD46     		mov	sp, r7
 1096 06f2 80BD     		pop	{r7, pc}
 1097              		.cfi_endproc
 1098              	.LFE64:
 1100              		.align	2
 1101              		.global	EMAC_UpdatePHYStatus
 1102              		.thumb
 1103              		.thumb_func
 1105              	EMAC_UpdatePHYStatus:
 1106              	.LFB65:
 552:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 
 553:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 
 554:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** /*********************************************************************//**
 555:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * @brief		Auto-Configures value for the EMAC configuration register to
 556:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * 				match with current PHY mode
 557:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * @param[in]	None
 558:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * @return		Return (0) if no error, otherwise return (-1)
 559:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  *
 560:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * Note: The EMAC configuration will be auto-configured:
 561:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * 		- Speed mode.
 562:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * 		- Half/Full duplex mode
 563:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  **********************************************************************/
 564:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** int32_t EMAC_UpdatePHYStatus(void)
 565:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** {
 1107              		.loc 1 565 0
 1108              		.cfi_startproc
 1109              		@ args = 0, pretend = 0, frame = 8
 1110              		@ frame_needed = 1, uses_anonymous_args = 0
 1111 06f4 80B5     		push	{r7, lr}
 1112              	.LCFI29:
 1113              		.cfi_def_cfa_offset 8
 1114              		.cfi_offset 14, -4
 1115              		.cfi_offset 7, -8
 1116 06f6 82B0     		sub	sp, sp, #8
 1117              	.LCFI30:
 1118              		.cfi_def_cfa_offset 16
 1119 06f8 00AF     		add	r7, sp, #0
 1120              	.LCFI31:
 1121              		.cfi_def_cfa_register 7
 566:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	int32_t regv, tout;
 567:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 
 568:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	/* Check the link status. */
 569:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** #ifdef MCB_LPC_1768
 570:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	for (tout = EMAC_PHY_RESP_TOUT; tout; tout--) {
 571:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		regv = read_PHY (EMAC_PHY_REG_STS);
 572:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		if (regv & EMAC_PHY_SR_LINK) {
 573:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 			/* Link is on. */
 574:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 			break;
 575:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		}
 576:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		if (tout == 0){
 577:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 			// time out
 578:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 			return (-1);
 579:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		}
 580:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	}
 581:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	/* Configure Full/Half Duplex mode. */
 582:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	if (regv & EMAC_PHY_SR_DUP) {
 583:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	/* Full duplex is enabled. */
 584:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 			LPC_EMAC->MAC2    |= EMAC_MAC2_FULL_DUP;
 585:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 			LPC_EMAC->Command |= EMAC_CR_FULL_DUP;
 586:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 			LPC_EMAC->IPGT     = EMAC_IPGT_FULL_DUP;
 587:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	} else {
 588:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		/* Half duplex mode. */
 589:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		LPC_EMAC->IPGT = EMAC_IPGT_HALF_DUP;
 590:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	}
 591:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	if (regv & EMAC_PHY_SR_SPEED) {
 592:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	/* 10MBit mode. */
 593:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		LPC_EMAC->SUPP = 0;
 594:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	} else {
 595:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		/* 100MBit mode. */
 596:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		LPC_EMAC->SUPP = EMAC_SUPP_SPEED;
 597:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	}
 598:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** #elif defined(IAR_LPC_1768)
 599:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	for (tout = EMAC_PHY_RESP_TOUT; tout; tout--) {
 600:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		regv = read_PHY (EMAC_PHY_REG_BMSR);
 601:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		if (regv & EMAC_PHY_BMSR_LINK_STATUS) {
 602:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 			/* Link is on. */
 603:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 			break;
 604:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		}
 605:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		if (tout == 0){
 606:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 			// time out
 607:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 			return (-1);
 608:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		}
 609:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	}
 610:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 
 611:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	/* Configure Full/Half Duplex mode. */
 612:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	if (regv & EMAC_PHY_SR_FULL_DUP) {
 613:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		/* Full duplex is enabled. */
 614:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		LPC_EMAC->MAC2    |= EMAC_MAC2_FULL_DUP;
 615:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		LPC_EMAC->Command |= EMAC_CR_FULL_DUP;
 616:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		LPC_EMAC->IPGT     = EMAC_IPGT_FULL_DUP;
 617:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	} else {
 618:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		/* Half duplex mode. */
 619:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		LPC_EMAC->IPGT = EMAC_IPGT_HALF_DUP;
 620:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	}
 621:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 
 622:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	/* Configure 100MBit/10MBit mode. */
 623:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	if (!(regv & EMAC_PHY_SR_100_SPEED)) {
 624:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		/* 10MBit mode. */
 625:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		LPC_EMAC->SUPP = 0;
 626:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	} else {
 627:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		/* 100MBit mode. */
 628:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		LPC_EMAC->SUPP = EMAC_SUPP_SPEED;
 629:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	}
 630:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** #elif defined(eStickv2)
 631:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	for (tout = EMAC_PHY_RESP_TOUT; tout; tout--) {
 1122              		.loc 1 631 0
 1123 06fa 4FF48013 		mov	r3, #1048576
 1124 06fe 3B60     		str	r3, [r7, #0]
 1125 0700 13E0     		b	.L72
 1126              	.L77:
 632:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		regv = read_PHY (EMAC_PHY_REG_BMSR);
 1127              		.loc 1 632 0
 1128 0702 4FF00100 		mov	r0, #1
 1129 0706 FFF76BFD 		bl	read_PHY
 1130 070a 7860     		str	r0, [r7, #4]
 633:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		if (regv & EMAC_PHY_BMSR_LINK_STATUS) {
 1131              		.loc 1 633 0
 1132 070c 7B68     		ldr	r3, [r7, #4]
 1133 070e 03F00403 		and	r3, r3, #4
 1134 0712 002B     		cmp	r3, #0
 1135 0714 0DD1     		bne	.L82
 1136              	.L73:
 634:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 			/* Link is on. */
 635:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 			break;
 636:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		}
 637:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		if (tout == 0){
 1137              		.loc 1 637 0
 1138 0716 3B68     		ldr	r3, [r7, #0]
 1139 0718 002B     		cmp	r3, #0
 1140 071a 02D1     		bne	.L75
 638:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 			// time out
 639:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 			return (-1);
 1141              		.loc 1 639 0
 1142 071c 4FF0FF33 		mov	r3, #-1
 1143 0720 3EE0     		b	.L76
 1144              	.L75:
 631:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	for (tout = EMAC_PHY_RESP_TOUT; tout; tout--) {
 1145              		.loc 1 631 0
 1146 0722 3B68     		ldr	r3, [r7, #0]
 1147 0724 03F1FF33 		add	r3, r3, #-1
 1148 0728 3B60     		str	r3, [r7, #0]
 1149              	.L72:
 631:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	for (tout = EMAC_PHY_RESP_TOUT; tout; tout--) {
 1150              		.loc 1 631 0 is_stmt 0 discriminator 1
 1151 072a 3B68     		ldr	r3, [r7, #0]
 1152 072c 002B     		cmp	r3, #0
 1153 072e E8D1     		bne	.L77
 1154 0730 00E0     		b	.L74
 1155              	.L82:
 635:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 			break;
 1156              		.loc 1 635 0 is_stmt 1
 1157 0732 00BF     		nop
 1158              	.L74:
 640:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		}
 641:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	}
 642:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 
 643:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	/* Configure Full/Half Duplex mode. */
 644:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	if (regv & EMAC_PHY_SR_FULL_DUP) {
 1159              		.loc 1 644 0
 1160 0734 7B68     		ldr	r3, [r7, #4]
 1161 0736 03F4A043 		and	r3, r3, #20480
 1162 073a 002B     		cmp	r3, #0
 1163 073c 19D0     		beq	.L78
 645:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		/* Full duplex is enabled. */
 646:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		LPC_EMAC->MAC2    |= EMAC_MAC2_FULL_DUP;
 1164              		.loc 1 646 0
 1165 073e 4FF0A041 		mov	r1, #1342177280
 1166 0742 4FF0A043 		mov	r3, #1342177280
 1167 0746 5B68     		ldr	r3, [r3, #4]
 1168 0748 43F00102 		orr	r2, r3, #1
 1169 074c 0B46     		mov	r3, r1
 1170 074e 5A60     		str	r2, [r3, #4]
 647:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		LPC_EMAC->Command |= EMAC_CR_FULL_DUP;
 1171              		.loc 1 647 0
 1172 0750 4FF0A041 		mov	r1, #1342177280
 1173 0754 4FF0A043 		mov	r3, #1342177280
 1174 0758 D3F80031 		ldr	r3, [r3, #256]
 1175 075c 43F48062 		orr	r2, r3, #1024
 1176 0760 0B46     		mov	r3, r1
 1177 0762 C3F80021 		str	r2, [r3, #256]
 648:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		LPC_EMAC->IPGT     = EMAC_IPGT_FULL_DUP;
 1178              		.loc 1 648 0
 1179 0766 4FF0A043 		mov	r3, #1342177280
 1180 076a 4FF01502 		mov	r2, #21
 1181 076e 9A60     		str	r2, [r3, #8]
 1182 0770 04E0     		b	.L79
 1183              	.L78:
 649:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	} else {
 650:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		/* Half duplex mode. */
 651:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		LPC_EMAC->IPGT = EMAC_IPGT_HALF_DUP;
 1184              		.loc 1 651 0
 1185 0772 4FF0A043 		mov	r3, #1342177280
 1186 0776 4FF01202 		mov	r2, #18
 1187 077a 9A60     		str	r2, [r3, #8]
 1188              	.L79:
 652:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	}
 653:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 
 654:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	/* Configure 100MBit/10MBit mode. */
 655:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	if (!(regv & EMAC_PHY_SR_100_SPEED)) {
 1189              		.loc 1 655 0
 1190 077c 7B68     		ldr	r3, [r7, #4]
 1191 077e 03F4C043 		and	r3, r3, #24576
 1192 0782 002B     		cmp	r3, #0
 1193 0784 05D1     		bne	.L80
 656:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		/* 10MBit mode. */
 657:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		LPC_EMAC->SUPP = 0;
 1194              		.loc 1 657 0
 1195 0786 4FF0A043 		mov	r3, #1342177280
 1196 078a 4FF00002 		mov	r2, #0
 1197 078e 9A61     		str	r2, [r3, #24]
 1198 0790 04E0     		b	.L81
 1199              	.L80:
 658:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	} else {
 659:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		/* 100MBit mode. */
 660:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		LPC_EMAC->SUPP = EMAC_SUPP_SPEED;
 1200              		.loc 1 660 0
 1201 0792 4FF0A043 		mov	r3, #1342177280
 1202 0796 4FF48072 		mov	r2, #256
 1203 079a 9A61     		str	r2, [r3, #24]
 1204              	.L81:
 661:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	}
 662:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** #endif
 663:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	// Complete
 664:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	return (0);
 1205              		.loc 1 664 0
 1206 079c 4FF00003 		mov	r3, #0
 1207              	.L76:
 665:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** }
 1208              		.loc 1 665 0
 1209 07a0 1846     		mov	r0, r3
 1210 07a2 07F10807 		add	r7, r7, #8
 1211 07a6 BD46     		mov	sp, r7
 1212 07a8 80BD     		pop	{r7, pc}
 1213              		.cfi_endproc
 1214              	.LFE65:
 1216 07aa 00BF     		.align	2
 1217              		.global	EMAC_SetHashFilter
 1218              		.thumb
 1219              		.thumb_func
 1221              	EMAC_SetHashFilter:
 1222              	.LFB66:
 666:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 
 667:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 
 668:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** /*********************************************************************//**
 669:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * @brief		Enable/Disable hash filter functionality for specified destination
 670:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * 				MAC address in EMAC module
 671:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * @param[in]	dstMAC_addr		Pointer to the first MAC destination address, should
 672:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * 								be 6-bytes length, in order LSB to the MSB
 673:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * @param[in]	NewState		New State of this command, should be:
 674:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  *									- ENABLE.
 675:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  *									- DISABLE.
 676:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * @return		None
 677:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  *
 678:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * Note:
 679:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * The standard Ethernet cyclic redundancy check (CRC) function is calculated from
 680:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * the 6 byte destination address in the Ethernet frame (this CRC is calculated
 681:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * anyway as part of calculating the CRC of the whole frame), then bits [28:23] out of
 682:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * the 32 bits CRC result are taken to form the hash. The 6 bit hash is used to access
 683:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * the hash table: it is used as an index in the 64 bit HashFilter register that has been
 684:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * programmed with accept values. If the selected accept value is 1, the frame is
 685:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * accepted.
 686:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  **********************************************************************/
 687:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** void EMAC_SetHashFilter(uint8_t dstMAC_addr[], FunctionalState NewState)
 688:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** {
 1223              		.loc 1 688 0
 1224              		.cfi_startproc
 1225              		@ args = 0, pretend = 0, frame = 24
 1226              		@ frame_needed = 1, uses_anonymous_args = 0
 1227 07ac 80B5     		push	{r7, lr}
 1228              	.LCFI32:
 1229              		.cfi_def_cfa_offset 8
 1230              		.cfi_offset 14, -4
 1231              		.cfi_offset 7, -8
 1232 07ae 86B0     		sub	sp, sp, #24
 1233              	.LCFI33:
 1234              		.cfi_def_cfa_offset 32
 1235 07b0 00AF     		add	r7, sp, #0
 1236              	.LCFI34:
 1237              		.cfi_def_cfa_register 7
 1238 07b2 7860     		str	r0, [r7, #4]
 1239 07b4 0B46     		mov	r3, r1
 1240 07b6 FB70     		strb	r3, [r7, #3]
 689:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	uint32_t *pReg;
 690:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	uint32_t tmp;
 691:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	int32_t crc;
 692:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 
 693:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	// Calculate the CRC from the destination MAC address
 694:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	crc = emac_CRCCalc(dstMAC_addr, 6);
 1241              		.loc 1 694 0
 1242 07b8 7868     		ldr	r0, [r7, #4]
 1243 07ba 4FF00601 		mov	r1, #6
 1244 07be FFF77BFD 		bl	emac_CRCCalc
 1245 07c2 7861     		str	r0, [r7, #20]
 695:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	// Extract the value from CRC to get index value for hash filter table
 696:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	crc = (crc >> 23) & 0x3F;
 1246              		.loc 1 696 0
 1247 07c4 7B69     		ldr	r3, [r7, #20]
 1248 07c6 4FEAE353 		asr	r3, r3, #23
 1249 07ca 03F03F03 		and	r3, r3, #63
 1250 07ce 7B61     		str	r3, [r7, #20]
 697:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 
 698:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	pReg = (crc > 31) ? ((uint32_t *)&LPC_EMAC->HashFilterH) \
 699:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 								: ((uint32_t *)&LPC_EMAC->HashFilterL);
 1251              		.loc 1 699 0
 1252 07d0 7B69     		ldr	r3, [r7, #20]
 1253 07d2 1F2B     		cmp	r3, #31
 1254 07d4 04DD     		ble	.L84
 1255              		.loc 1 699 0 is_stmt 0 discriminator 1
 1256 07d6 4FF40573 		mov	r3, #532
 1257 07da C5F20003 		movt	r3, 20480
 1258 07de 03E0     		b	.L85
 1259              	.L84:
 1260              		.loc 1 699 0 discriminator 2
 1261 07e0 4FF40473 		mov	r3, #528
 1262 07e4 C5F20003 		movt	r3, 20480
 1263              	.L85:
 698:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	pReg = (crc > 31) ? ((uint32_t *)&LPC_EMAC->HashFilterH) \
 1264              		.loc 1 698 0 is_stmt 1
 1265 07e8 3B61     		str	r3, [r7, #16]
 700:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	tmp = (crc > 31) ? (crc - 32) : crc;
 1266              		.loc 1 700 0
 1267 07ea 7B69     		ldr	r3, [r7, #20]
 1268 07ec 1F2B     		cmp	r3, #31
 1269 07ee 03DD     		ble	.L86
 1270              		.loc 1 700 0 is_stmt 0 discriminator 1
 1271 07f0 7B69     		ldr	r3, [r7, #20]
 1272 07f2 A3F12003 		sub	r3, r3, #32
 1273 07f6 00E0     		b	.L87
 1274              	.L86:
 1275              		.loc 1 700 0 discriminator 2
 1276 07f8 7B69     		ldr	r3, [r7, #20]
 1277              	.L87:
 1278              		.loc 1 700 0 discriminator 3
 1279 07fa FB60     		str	r3, [r7, #12]
 701:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	if (NewState == ENABLE) {
 1280              		.loc 1 701 0 is_stmt 1 discriminator 3
 1281 07fc FB78     		ldrb	r3, [r7, #3]	@ zero_extendqisi2
 1282 07fe 012B     		cmp	r3, #1
 1283 0800 0AD1     		bne	.L88
 702:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		(*pReg) |= (1UL << tmp);
 1284              		.loc 1 702 0
 1285 0802 3B69     		ldr	r3, [r7, #16]
 1286 0804 1A68     		ldr	r2, [r3, #0]
 1287 0806 FB68     		ldr	r3, [r7, #12]
 1288 0808 4FF00101 		mov	r1, #1
 1289 080c 01FA03F3 		lsl	r3, r1, r3
 1290 0810 1A43     		orrs	r2, r2, r3
 1291 0812 3B69     		ldr	r3, [r7, #16]
 1292 0814 1A60     		str	r2, [r3, #0]
 1293 0816 0BE0     		b	.L89
 1294              	.L88:
 703:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	} else {
 704:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		(*pReg) &= ~(1UL << tmp);
 1295              		.loc 1 704 0
 1296 0818 3B69     		ldr	r3, [r7, #16]
 1297 081a 1A68     		ldr	r2, [r3, #0]
 1298 081c FB68     		ldr	r3, [r7, #12]
 1299 081e 4FF00101 		mov	r1, #1
 1300 0822 01FA03F3 		lsl	r3, r1, r3
 1301 0826 6FEA0303 		mvn	r3, r3
 1302 082a 1A40     		ands	r2, r2, r3
 1303 082c 3B69     		ldr	r3, [r7, #16]
 1304 082e 1A60     		str	r2, [r3, #0]
 1305              	.L89:
 705:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	}
 706:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	// Enable Rx Filter
 707:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	LPC_EMAC->Command &= ~EMAC_CR_PASS_RX_FILT;
 1306              		.loc 1 707 0
 1307 0830 4FF0A041 		mov	r1, #1342177280
 1308 0834 4FF0A043 		mov	r3, #1342177280
 1309 0838 D3F80031 		ldr	r3, [r3, #256]
 1310 083c 23F08002 		bic	r2, r3, #128
 1311 0840 0B46     		mov	r3, r1
 1312 0842 C3F80021 		str	r2, [r3, #256]
 708:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** }
 1313              		.loc 1 708 0
 1314 0846 07F11807 		add	r7, r7, #24
 1315 084a BD46     		mov	sp, r7
 1316 084c 80BD     		pop	{r7, pc}
 1317              		.cfi_endproc
 1318              	.LFE66:
 1320 084e 00BF     		.align	2
 1321              		.global	EMAC_SetFilterMode
 1322              		.thumb
 1323              		.thumb_func
 1325              	EMAC_SetFilterMode:
 1326              	.LFB67:
 709:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 
 710:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** /*********************************************************************//**
 711:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * @brief		Enable/Disable Filter mode for each specified type EMAC peripheral
 712:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * @param[in]	ulFilterMode	Filter mode, should be:
 713:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * 								- EMAC_RFC_UCAST_EN: all frames of unicast types
 714:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * 								will be accepted
 715:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * 								- EMAC_RFC_BCAST_EN: broadcast frame will be
 716:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * 								accepted
 717:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * 								- EMAC_RFC_MCAST_EN: all frames of multicast
 718:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * 								types will be accepted
 719:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * 								- EMAC_RFC_UCAST_HASH_EN: The imperfect hash
 720:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * 								filter will be applied to unicast addresses
 721:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * 								- EMAC_RFC_MCAST_HASH_EN: The imperfect hash
 722:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * 								filter will be applied to multicast addresses
 723:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * 								- EMAC_RFC_PERFECT_EN: the destination address
 724:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * 								will be compared with the 6 byte station address
 725:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * 								programmed in the station address by the filter
 726:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * 								- EMAC_RFC_MAGP_WOL_EN: the result of the magic
 727:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * 								packet filter will generate a WoL interrupt when
 728:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * 								there is a match
 729:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * 								- EMAC_RFC_PFILT_WOL_EN: the result of the perfect address
 730:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * 								matching filter and the imperfect hash filter will
 731:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * 								generate a WoL interrupt when there is a match
 732:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * @param[in]	NewState	New State of this command, should be:
 733:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * 								- ENABLE
 734:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * 								- DISABLE
 735:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * @return		None
 736:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  **********************************************************************/
 737:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** void EMAC_SetFilterMode(uint32_t ulFilterMode, FunctionalState NewState)
 738:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** {
 1327              		.loc 1 738 0
 1328              		.cfi_startproc
 1329              		@ args = 0, pretend = 0, frame = 8
 1330              		@ frame_needed = 1, uses_anonymous_args = 0
 1331              		@ link register save eliminated.
 1332 0850 80B4     		push	{r7}
 1333              	.LCFI35:
 1334              		.cfi_def_cfa_offset 4
 1335              		.cfi_offset 7, -4
 1336 0852 83B0     		sub	sp, sp, #12
 1337              	.LCFI36:
 1338              		.cfi_def_cfa_offset 16
 1339 0854 00AF     		add	r7, sp, #0
 1340              	.LCFI37:
 1341              		.cfi_def_cfa_register 7
 1342 0856 7860     		str	r0, [r7, #4]
 1343 0858 0B46     		mov	r3, r1
 1344 085a FB70     		strb	r3, [r7, #3]
 739:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	if (NewState == ENABLE){
 1345              		.loc 1 739 0
 1346 085c FB78     		ldrb	r3, [r7, #3]	@ zero_extendqisi2
 1347 085e 012B     		cmp	r3, #1
 1348 0860 0BD1     		bne	.L91
 740:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		LPC_EMAC->RxFilterCtrl |= ulFilterMode;
 1349              		.loc 1 740 0
 1350 0862 4FF0A041 		mov	r1, #1342177280
 1351 0866 4FF0A043 		mov	r3, #1342177280
 1352 086a D3F80022 		ldr	r2, [r3, #512]
 1353 086e 7B68     		ldr	r3, [r7, #4]
 1354 0870 1A43     		orrs	r2, r2, r3
 1355 0872 0B46     		mov	r3, r1
 1356 0874 C3F80022 		str	r2, [r3, #512]
 1357 0878 0CE0     		b	.L90
 1358              	.L91:
 741:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	} else {
 742:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		LPC_EMAC->RxFilterCtrl &= ~ulFilterMode;
 1359              		.loc 1 742 0
 1360 087a 4FF0A041 		mov	r1, #1342177280
 1361 087e 4FF0A043 		mov	r3, #1342177280
 1362 0882 D3F80022 		ldr	r2, [r3, #512]
 1363 0886 7B68     		ldr	r3, [r7, #4]
 1364 0888 6FEA0303 		mvn	r3, r3
 1365 088c 1A40     		ands	r2, r2, r3
 1366 088e 0B46     		mov	r3, r1
 1367 0890 C3F80022 		str	r2, [r3, #512]
 1368              	.L90:
 743:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	}
 744:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** }
 1369              		.loc 1 744 0
 1370 0894 07F10C07 		add	r7, r7, #12
 1371 0898 BD46     		mov	sp, r7
 1372 089a 80BC     		pop	{r7}
 1373 089c 7047     		bx	lr
 1374              		.cfi_endproc
 1375              	.LFE67:
 1377 089e 00BF     		.align	2
 1378              		.global	EMAC_GetWoLStatus
 1379              		.thumb
 1380              		.thumb_func
 1382              	EMAC_GetWoLStatus:
 1383              	.LFB68:
 745:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 
 746:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** /*********************************************************************//**
 747:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * @brief		Get status of Wake On LAN Filter for each specified
 748:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * 				type in EMAC peripheral, clear this status if it is set
 749:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * @param[in]	ulWoLMode	WoL Filter mode, should be:
 750:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * 								- EMAC_WOL_UCAST: unicast frames caused WoL
 751:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * 								- EMAC_WOL_UCAST: broadcast frame caused WoL
 752:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * 								- EMAC_WOL_MCAST: multicast frame caused WoL
 753:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * 								- EMAC_WOL_UCAST_HASH: unicast frame that passes the
 754:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * 								imperfect hash filter caused WoL
 755:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * 								- EMAC_WOL_MCAST_HASH: multicast frame that passes the
 756:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * 								imperfect hash filter caused WoL
 757:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * 								- EMAC_WOL_PERFECT:perfect address matching filter
 758:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * 								caused WoL
 759:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * 								- EMAC_WOL_RX_FILTER: the receive filter caused WoL
 760:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * 								- EMAC_WOL_MAG_PACKET: the magic packet filter caused WoL
 761:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * @return		SET/RESET
 762:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  **********************************************************************/
 763:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** FlagStatus EMAC_GetWoLStatus(uint32_t ulWoLMode)
 764:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** {
 1384              		.loc 1 764 0
 1385              		.cfi_startproc
 1386              		@ args = 0, pretend = 0, frame = 8
 1387              		@ frame_needed = 1, uses_anonymous_args = 0
 1388              		@ link register save eliminated.
 1389 08a0 80B4     		push	{r7}
 1390              	.LCFI38:
 1391              		.cfi_def_cfa_offset 4
 1392              		.cfi_offset 7, -4
 1393 08a2 83B0     		sub	sp, sp, #12
 1394              	.LCFI39:
 1395              		.cfi_def_cfa_offset 16
 1396 08a4 00AF     		add	r7, sp, #0
 1397              	.LCFI40:
 1398              		.cfi_def_cfa_register 7
 1399 08a6 7860     		str	r0, [r7, #4]
 765:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	if (LPC_EMAC->RxFilterWoLStatus & ulWoLMode) {
 1400              		.loc 1 765 0
 1401 08a8 4FF0A043 		mov	r3, #1342177280
 1402 08ac D3F80422 		ldr	r2, [r3, #516]
 1403 08b0 7B68     		ldr	r3, [r7, #4]
 1404 08b2 1340     		ands	r3, r3, r2
 1405 08b4 002B     		cmp	r3, #0
 1406 08b6 07D0     		beq	.L94
 766:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		LPC_EMAC->RxFilterWoLClear = ulWoLMode;
 1407              		.loc 1 766 0
 1408 08b8 4FF0A043 		mov	r3, #1342177280
 1409 08bc 7A68     		ldr	r2, [r7, #4]
 1410 08be C3F80822 		str	r2, [r3, #520]
 767:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		return SET;
 1411              		.loc 1 767 0
 1412 08c2 4FF00103 		mov	r3, #1
 1413 08c6 01E0     		b	.L95
 1414              	.L94:
 768:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	} else {
 769:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		return RESET;
 1415              		.loc 1 769 0
 1416 08c8 4FF00003 		mov	r3, #0
 1417              	.L95:
 770:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	}
 771:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** }
 1418              		.loc 1 771 0
 1419 08cc 1846     		mov	r0, r3
 1420 08ce 07F10C07 		add	r7, r7, #12
 1421 08d2 BD46     		mov	sp, r7
 1422 08d4 80BC     		pop	{r7}
 1423 08d6 7047     		bx	lr
 1424              		.cfi_endproc
 1425              	.LFE68:
 1427              		.align	2
 1428              		.global	EMAC_WritePacketBuffer
 1429              		.thumb
 1430              		.thumb_func
 1432              	EMAC_WritePacketBuffer:
 1433              	.LFB69:
 772:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 
 773:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 
 774:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** /*********************************************************************//**
 775:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * @brief		Write data to Tx packet data buffer at current index due to
 776:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * 				TxProduceIndex
 777:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * @param[in]	pDataStruct		Pointer to a EMAC_PACKETBUF_Type structure
 778:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * 							data that contain specified information about
 779:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * 							Packet data buffer.
 780:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * @return		None
 781:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  **********************************************************************/
 782:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** void EMAC_WritePacketBuffer(EMAC_PACKETBUF_Type *pDataStruct)
 783:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** {
 1434              		.loc 1 783 0
 1435              		.cfi_startproc
 1436              		@ args = 0, pretend = 0, frame = 24
 1437              		@ frame_needed = 1, uses_anonymous_args = 0
 1438              		@ link register save eliminated.
 1439 08d8 80B4     		push	{r7}
 1440              	.LCFI41:
 1441              		.cfi_def_cfa_offset 4
 1442              		.cfi_offset 7, -4
 1443 08da 87B0     		sub	sp, sp, #28
 1444              	.LCFI42:
 1445              		.cfi_def_cfa_offset 32
 1446 08dc 00AF     		add	r7, sp, #0
 1447              	.LCFI43:
 1448              		.cfi_def_cfa_register 7
 1449 08de 7860     		str	r0, [r7, #4]
 784:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	uint32_t idx,len;
 785:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	uint32_t *sp,*dp;
 786:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 
 787:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	idx = LPC_EMAC->TxProduceIndex;
 1450              		.loc 1 787 0
 1451 08e0 4FF0A043 		mov	r3, #1342177280
 1452 08e4 D3F82831 		ldr	r3, [r3, #296]
 1453 08e8 BB60     		str	r3, [r7, #8]
 788:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	sp  = (uint32_t *)pDataStruct->pbDataBuf;
 1454              		.loc 1 788 0
 1455 08ea 7B68     		ldr	r3, [r7, #4]
 1456 08ec 5B68     		ldr	r3, [r3, #4]
 1457 08ee 3B61     		str	r3, [r7, #16]
 789:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	dp  = (uint32_t *)Tx_Desc[idx].Packet;
 1458              		.loc 1 789 0
 1459 08f0 40F20003 		movw	r3, #:lower16:Tx_Desc
 1460 08f4 C0F20003 		movt	r3, #:upper16:Tx_Desc
 1461 08f8 BA68     		ldr	r2, [r7, #8]
 1462 08fa 53F83230 		ldr	r3, [r3, r2, lsl #3]
 1463 08fe FB60     		str	r3, [r7, #12]
 790:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	/* Copy frame data to EMAC packet buffers. */
 791:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	for (len = (pDataStruct->ulDataLen + 3) >> 2; len; len--) {
 1464              		.loc 1 791 0
 1465 0900 7B68     		ldr	r3, [r7, #4]
 1466 0902 1B68     		ldr	r3, [r3, #0]
 1467 0904 03F10303 		add	r3, r3, #3
 1468 0908 4FEA9303 		lsr	r3, r3, #2
 1469 090c 7B61     		str	r3, [r7, #20]
 1470 090e 0FE0     		b	.L97
 1471              	.L98:
 792:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		*dp++ = *sp++;
 1472              		.loc 1 792 0 discriminator 2
 1473 0910 3B69     		ldr	r3, [r7, #16]
 1474 0912 1A68     		ldr	r2, [r3, #0]
 1475 0914 FB68     		ldr	r3, [r7, #12]
 1476 0916 1A60     		str	r2, [r3, #0]
 1477 0918 FB68     		ldr	r3, [r7, #12]
 1478 091a 03F10403 		add	r3, r3, #4
 1479 091e FB60     		str	r3, [r7, #12]
 1480 0920 3B69     		ldr	r3, [r7, #16]
 1481 0922 03F10403 		add	r3, r3, #4
 1482 0926 3B61     		str	r3, [r7, #16]
 791:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	for (len = (pDataStruct->ulDataLen + 3) >> 2; len; len--) {
 1483              		.loc 1 791 0 discriminator 2
 1484 0928 7B69     		ldr	r3, [r7, #20]
 1485 092a 03F1FF33 		add	r3, r3, #-1
 1486 092e 7B61     		str	r3, [r7, #20]
 1487              	.L97:
 791:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	for (len = (pDataStruct->ulDataLen + 3) >> 2; len; len--) {
 1488              		.loc 1 791 0 is_stmt 0 discriminator 1
 1489 0930 7B69     		ldr	r3, [r7, #20]
 1490 0932 002B     		cmp	r3, #0
 1491 0934 ECD1     		bne	.L98
 793:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	}
 794:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	Tx_Desc[idx].Ctrl = (pDataStruct->ulDataLen - 1) | (EMAC_TCTRL_INT | EMAC_TCTRL_LAST);
 1492              		.loc 1 794 0 is_stmt 1
 1493 0936 7B68     		ldr	r3, [r7, #4]
 1494 0938 1B68     		ldr	r3, [r3, #0]
 1495 093a 03F1FF33 		add	r3, r3, #-1
 1496 093e 43F04041 		orr	r1, r3, #-1073741824
 1497 0942 40F20002 		movw	r2, #:lower16:Tx_Desc
 1498 0946 C0F20002 		movt	r2, #:upper16:Tx_Desc
 1499 094a BB68     		ldr	r3, [r7, #8]
 1500 094c 4FEAC303 		lsl	r3, r3, #3
 1501 0950 D318     		adds	r3, r2, r3
 1502 0952 5960     		str	r1, [r3, #4]
 795:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** }
 1503              		.loc 1 795 0
 1504 0954 07F11C07 		add	r7, r7, #28
 1505 0958 BD46     		mov	sp, r7
 1506 095a 80BC     		pop	{r7}
 1507 095c 7047     		bx	lr
 1508              		.cfi_endproc
 1509              	.LFE69:
 1511 095e 00BF     		.align	2
 1512              		.global	EMAC_ReadPacketBuffer
 1513              		.thumb
 1514              		.thumb_func
 1516              	EMAC_ReadPacketBuffer:
 1517              	.LFB70:
 796:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 
 797:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** /*********************************************************************//**
 798:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * @brief		Read data from Rx packet data buffer at current index due
 799:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * 				to RxConsumeIndex
 800:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * @param[in]	pDataStruct		Pointer to a EMAC_PACKETBUF_Type structure
 801:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * 							data that contain specified information about
 802:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * 							Packet data buffer.
 803:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * @return		None
 804:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  **********************************************************************/
 805:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** void EMAC_ReadPacketBuffer(EMAC_PACKETBUF_Type *pDataStruct)
 806:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** {
 1518              		.loc 1 806 0
 1519              		.cfi_startproc
 1520              		@ args = 0, pretend = 0, frame = 24
 1521              		@ frame_needed = 1, uses_anonymous_args = 0
 1522              		@ link register save eliminated.
 1523 0960 80B4     		push	{r7}
 1524              	.LCFI44:
 1525              		.cfi_def_cfa_offset 4
 1526              		.cfi_offset 7, -4
 1527 0962 87B0     		sub	sp, sp, #28
 1528              	.LCFI45:
 1529              		.cfi_def_cfa_offset 32
 1530 0964 00AF     		add	r7, sp, #0
 1531              	.LCFI46:
 1532              		.cfi_def_cfa_register 7
 1533 0966 7860     		str	r0, [r7, #4]
 807:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	uint32_t idx, len;
 808:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	uint32_t *dp, *sp;
 809:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 
 810:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	idx = LPC_EMAC->RxConsumeIndex;
 1534              		.loc 1 810 0
 1535 0968 4FF0A043 		mov	r3, #1342177280
 1536 096c D3F81831 		ldr	r3, [r3, #280]
 1537 0970 BB60     		str	r3, [r7, #8]
 811:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	dp = (uint32_t *)pDataStruct->pbDataBuf;
 1538              		.loc 1 811 0
 1539 0972 7B68     		ldr	r3, [r7, #4]
 1540 0974 5B68     		ldr	r3, [r3, #4]
 1541 0976 3B61     		str	r3, [r7, #16]
 812:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	sp = (uint32_t *)Rx_Desc[idx].Packet;
 1542              		.loc 1 812 0
 1543 0978 40F20003 		movw	r3, #:lower16:Rx_Desc
 1544 097c C0F20003 		movt	r3, #:upper16:Rx_Desc
 1545 0980 BA68     		ldr	r2, [r7, #8]
 1546 0982 53F83230 		ldr	r3, [r3, r2, lsl #3]
 1547 0986 FB60     		str	r3, [r7, #12]
 813:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 
 814:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	if (pDataStruct->pbDataBuf != NULL) {
 1548              		.loc 1 814 0
 1549 0988 7B68     		ldr	r3, [r7, #4]
 1550 098a 5B68     		ldr	r3, [r3, #4]
 1551 098c 002B     		cmp	r3, #0
 1552 098e 1AD0     		beq	.L99
 815:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		for (len = (pDataStruct->ulDataLen + 3) >> 2; len; len--) {
 1553              		.loc 1 815 0
 1554 0990 7B68     		ldr	r3, [r7, #4]
 1555 0992 1B68     		ldr	r3, [r3, #0]
 1556 0994 03F10303 		add	r3, r3, #3
 1557 0998 4FEA9303 		lsr	r3, r3, #2
 1558 099c 7B61     		str	r3, [r7, #20]
 1559 099e 0FE0     		b	.L101
 1560              	.L102:
 816:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 			*dp++ = *sp++;
 1561              		.loc 1 816 0 discriminator 2
 1562 09a0 FB68     		ldr	r3, [r7, #12]
 1563 09a2 1A68     		ldr	r2, [r3, #0]
 1564 09a4 3B69     		ldr	r3, [r7, #16]
 1565 09a6 1A60     		str	r2, [r3, #0]
 1566 09a8 3B69     		ldr	r3, [r7, #16]
 1567 09aa 03F10403 		add	r3, r3, #4
 1568 09ae 3B61     		str	r3, [r7, #16]
 1569 09b0 FB68     		ldr	r3, [r7, #12]
 1570 09b2 03F10403 		add	r3, r3, #4
 1571 09b6 FB60     		str	r3, [r7, #12]
 815:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		for (len = (pDataStruct->ulDataLen + 3) >> 2; len; len--) {
 1572              		.loc 1 815 0 discriminator 2
 1573 09b8 7B69     		ldr	r3, [r7, #20]
 1574 09ba 03F1FF33 		add	r3, r3, #-1
 1575 09be 7B61     		str	r3, [r7, #20]
 1576              	.L101:
 815:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		for (len = (pDataStruct->ulDataLen + 3) >> 2; len; len--) {
 1577              		.loc 1 815 0 is_stmt 0 discriminator 1
 1578 09c0 7B69     		ldr	r3, [r7, #20]
 1579 09c2 002B     		cmp	r3, #0
 1580 09c4 ECD1     		bne	.L102
 1581              	.L99:
 817:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		}
 818:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	}
 819:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 
 820:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** }
 1582              		.loc 1 820 0 is_stmt 1
 1583 09c6 07F11C07 		add	r7, r7, #28
 1584 09ca BD46     		mov	sp, r7
 1585 09cc 80BC     		pop	{r7}
 1586 09ce 7047     		bx	lr
 1587              		.cfi_endproc
 1588              	.LFE70:
 1590              		.align	2
 1591              		.global	EMAC_IntCmd
 1592              		.thumb
 1593              		.thumb_func
 1595              	EMAC_IntCmd:
 1596              	.LFB71:
 821:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 
 822:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** /*********************************************************************//**
 823:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * @brief 		Enable/Disable interrupt for each type in EMAC
 824:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * @param[in]	ulIntType	Interrupt Type, should be:
 825:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * 							- EMAC_INT_RX_OVERRUN: Receive Overrun
 826:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * 							- EMAC_INT_RX_ERR: Receive Error
 827:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * 							- EMAC_INT_RX_FIN: Receive Descriptor Finish
 828:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * 							- EMAC_INT_RX_DONE: Receive Done
 829:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * 							- EMAC_INT_TX_UNDERRUN: Transmit Under-run
 830:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * 							- EMAC_INT_TX_ERR: Transmit Error
 831:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * 							- EMAC_INT_TX_FIN: Transmit descriptor finish
 832:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * 							- EMAC_INT_TX_DONE: Transmit Done
 833:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * 							- EMAC_INT_SOFT_INT: Software interrupt
 834:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * 							- EMAC_INT_WAKEUP: Wakeup interrupt
 835:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * @param[in]	NewState	New State of this function, should be:
 836:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * 							- ENABLE.
 837:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * 							- DISABLE.
 838:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * @return		None
 839:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  **********************************************************************/
 840:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** void EMAC_IntCmd(uint32_t ulIntType, FunctionalState NewState)
 841:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** {
 1597              		.loc 1 841 0
 1598              		.cfi_startproc
 1599              		@ args = 0, pretend = 0, frame = 8
 1600              		@ frame_needed = 1, uses_anonymous_args = 0
 1601              		@ link register save eliminated.
 1602 09d0 80B4     		push	{r7}
 1603              	.LCFI47:
 1604              		.cfi_def_cfa_offset 4
 1605              		.cfi_offset 7, -4
 1606 09d2 83B0     		sub	sp, sp, #12
 1607              	.LCFI48:
 1608              		.cfi_def_cfa_offset 16
 1609 09d4 00AF     		add	r7, sp, #0
 1610              	.LCFI49:
 1611              		.cfi_def_cfa_register 7
 1612 09d6 7860     		str	r0, [r7, #4]
 1613 09d8 0B46     		mov	r3, r1
 1614 09da FB70     		strb	r3, [r7, #3]
 842:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	if (NewState == ENABLE) {
 1615              		.loc 1 842 0
 1616 09dc FB78     		ldrb	r3, [r7, #3]	@ zero_extendqisi2
 1617 09de 012B     		cmp	r3, #1
 1618 09e0 0BD1     		bne	.L104
 843:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		LPC_EMAC->IntEnable |= ulIntType;
 1619              		.loc 1 843 0
 1620 09e2 4FF0A041 		mov	r1, #1342177280
 1621 09e6 4FF0A043 		mov	r3, #1342177280
 1622 09ea D3F8E42F 		ldr	r2, [r3, #4068]
 1623 09ee 7B68     		ldr	r3, [r7, #4]
 1624 09f0 1A43     		orrs	r2, r2, r3
 1625 09f2 0B46     		mov	r3, r1
 1626 09f4 C3F8E42F 		str	r2, [r3, #4068]
 1627 09f8 0CE0     		b	.L103
 1628              	.L104:
 844:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	} else {
 845:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		LPC_EMAC->IntEnable &= ~(ulIntType);
 1629              		.loc 1 845 0
 1630 09fa 4FF0A041 		mov	r1, #1342177280
 1631 09fe 4FF0A043 		mov	r3, #1342177280
 1632 0a02 D3F8E42F 		ldr	r2, [r3, #4068]
 1633 0a06 7B68     		ldr	r3, [r7, #4]
 1634 0a08 6FEA0303 		mvn	r3, r3
 1635 0a0c 1A40     		ands	r2, r2, r3
 1636 0a0e 0B46     		mov	r3, r1
 1637 0a10 C3F8E42F 		str	r2, [r3, #4068]
 1638              	.L103:
 846:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	}
 847:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** }
 1639              		.loc 1 847 0
 1640 0a14 07F10C07 		add	r7, r7, #12
 1641 0a18 BD46     		mov	sp, r7
 1642 0a1a 80BC     		pop	{r7}
 1643 0a1c 7047     		bx	lr
 1644              		.cfi_endproc
 1645              	.LFE71:
 1647 0a1e 00BF     		.align	2
 1648              		.global	EMAC_IntGetStatus
 1649              		.thumb
 1650              		.thumb_func
 1652              	EMAC_IntGetStatus:
 1653              	.LFB72:
 848:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 
 849:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** /*********************************************************************//**
 850:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * @brief 		Check whether if specified interrupt flag is set or not
 851:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * 				for each interrupt type in EMAC and clear interrupt pending
 852:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * 				if it is set.
 853:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * @param[in]	ulIntType	Interrupt Type, should be:
 854:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * 							- EMAC_INT_RX_OVERRUN: Receive Overrun
 855:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * 							- EMAC_INT_RX_ERR: Receive Error
 856:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * 							- EMAC_INT_RX_FIN: Receive Descriptor Finish
 857:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * 							- EMAC_INT_RX_DONE: Receive Done
 858:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * 							- EMAC_INT_TX_UNDERRUN: Transmit Under-run
 859:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * 							- EMAC_INT_TX_ERR: Transmit Error
 860:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * 							- EMAC_INT_TX_FIN: Transmit descriptor finish
 861:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * 							- EMAC_INT_TX_DONE: Transmit Done
 862:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * 							- EMAC_INT_SOFT_INT: Software interrupt
 863:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * 							- EMAC_INT_WAKEUP: Wakeup interrupt
 864:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * @return		New state of specified interrupt (SET or RESET)
 865:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  **********************************************************************/
 866:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** IntStatus EMAC_IntGetStatus(uint32_t ulIntType)
 867:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** {
 1654              		.loc 1 867 0
 1655              		.cfi_startproc
 1656              		@ args = 0, pretend = 0, frame = 8
 1657              		@ frame_needed = 1, uses_anonymous_args = 0
 1658              		@ link register save eliminated.
 1659 0a20 80B4     		push	{r7}
 1660              	.LCFI50:
 1661              		.cfi_def_cfa_offset 4
 1662              		.cfi_offset 7, -4
 1663 0a22 83B0     		sub	sp, sp, #12
 1664              	.LCFI51:
 1665              		.cfi_def_cfa_offset 16
 1666 0a24 00AF     		add	r7, sp, #0
 1667              	.LCFI52:
 1668              		.cfi_def_cfa_register 7
 1669 0a26 7860     		str	r0, [r7, #4]
 868:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	if (LPC_EMAC->IntStatus & ulIntType) {
 1670              		.loc 1 868 0
 1671 0a28 4FF0A043 		mov	r3, #1342177280
 1672 0a2c D3F8E02F 		ldr	r2, [r3, #4064]
 1673 0a30 7B68     		ldr	r3, [r7, #4]
 1674 0a32 1340     		ands	r3, r3, r2
 1675 0a34 002B     		cmp	r3, #0
 1676 0a36 07D0     		beq	.L107
 869:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		LPC_EMAC->IntClear = ulIntType;
 1677              		.loc 1 869 0
 1678 0a38 4FF0A043 		mov	r3, #1342177280
 1679 0a3c 7A68     		ldr	r2, [r7, #4]
 1680 0a3e C3F8E82F 		str	r2, [r3, #4072]
 870:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		return SET;
 1681              		.loc 1 870 0
 1682 0a42 4FF00103 		mov	r3, #1
 1683 0a46 01E0     		b	.L108
 1684              	.L107:
 871:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	} else {
 872:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		return RESET;
 1685              		.loc 1 872 0
 1686 0a48 4FF00003 		mov	r3, #0
 1687              	.L108:
 873:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	}
 874:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** }
 1688              		.loc 1 874 0
 1689 0a4c 1846     		mov	r0, r3
 1690 0a4e 07F10C07 		add	r7, r7, #12
 1691 0a52 BD46     		mov	sp, r7
 1692 0a54 80BC     		pop	{r7}
 1693 0a56 7047     		bx	lr
 1694              		.cfi_endproc
 1695              	.LFE72:
 1697              		.align	2
 1698              		.global	EMAC_CheckReceiveIndex
 1699              		.thumb
 1700              		.thumb_func
 1702              	EMAC_CheckReceiveIndex:
 1703              	.LFB73:
 875:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 
 876:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 
 877:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** /*********************************************************************//**
 878:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * @brief		Check whether if the current RxConsumeIndex is not equal to the
 879:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * 				current RxProduceIndex.
 880:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * @param[in]	None
 881:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * @return		TRUE if they're not equal, otherwise return FALSE
 882:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  *
 883:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * Note: In case the RxConsumeIndex is not equal to the RxProduceIndex,
 884:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * it means there're available data has been received. They should be read
 885:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * out and released the Receive Data Buffer by updating the RxConsumeIndex value.
 886:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  **********************************************************************/
 887:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** Bool EMAC_CheckReceiveIndex(void)
 888:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** {
 1704              		.loc 1 888 0
 1705              		.cfi_startproc
 1706              		@ args = 0, pretend = 0, frame = 0
 1707              		@ frame_needed = 1, uses_anonymous_args = 0
 1708              		@ link register save eliminated.
 1709 0a58 80B4     		push	{r7}
 1710              	.LCFI53:
 1711              		.cfi_def_cfa_offset 4
 1712              		.cfi_offset 7, -4
 1713 0a5a 00AF     		add	r7, sp, #0
 1714              	.LCFI54:
 1715              		.cfi_def_cfa_register 7
 889:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	if (LPC_EMAC->RxConsumeIndex != LPC_EMAC->RxProduceIndex) {
 1716              		.loc 1 889 0
 1717 0a5c 4FF0A043 		mov	r3, #1342177280
 1718 0a60 D3F81821 		ldr	r2, [r3, #280]
 1719 0a64 4FF0A043 		mov	r3, #1342177280
 1720 0a68 D3F81431 		ldr	r3, [r3, #276]
 1721 0a6c 9A42     		cmp	r2, r3
 1722 0a6e 02D0     		beq	.L110
 890:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		return TRUE;
 1723              		.loc 1 890 0
 1724 0a70 4FF00103 		mov	r3, #1
 1725 0a74 01E0     		b	.L111
 1726              	.L110:
 891:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	} else {
 892:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		return FALSE;
 1727              		.loc 1 892 0
 1728 0a76 4FF00003 		mov	r3, #0
 1729              	.L111:
 893:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	}
 894:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** }
 1730              		.loc 1 894 0
 1731 0a7a 1846     		mov	r0, r3
 1732 0a7c BD46     		mov	sp, r7
 1733 0a7e 80BC     		pop	{r7}
 1734 0a80 7047     		bx	lr
 1735              		.cfi_endproc
 1736              	.LFE73:
 1738 0a82 00BF     		.align	2
 1739              		.global	EMAC_CheckTransmitIndex
 1740              		.thumb
 1741              		.thumb_func
 1743              	EMAC_CheckTransmitIndex:
 1744              	.LFB74:
 895:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 
 896:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 
 897:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** /*********************************************************************//**
 898:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * @brief		Check whether if the current TxProduceIndex is not equal to the
 899:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * 				current RxProduceIndex - 1.
 900:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * @param[in]	None
 901:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * @return		TRUE if they're not equal, otherwise return FALSE
 902:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  *
 903:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * Note: In case the RxConsumeIndex is equal to the RxProduceIndex - 1,
 904:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * it means the transmit buffer is available and data can be written to transmit
 905:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * buffer to be sent.
 906:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  **********************************************************************/
 907:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** Bool EMAC_CheckTransmitIndex(void)
 908:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** {
 1745              		.loc 1 908 0
 1746              		.cfi_startproc
 1747              		@ args = 0, pretend = 0, frame = 8
 1748              		@ frame_needed = 1, uses_anonymous_args = 0
 1749              		@ link register save eliminated.
 1750 0a84 80B4     		push	{r7}
 1751              	.LCFI55:
 1752              		.cfi_def_cfa_offset 4
 1753              		.cfi_offset 7, -4
 1754 0a86 83B0     		sub	sp, sp, #12
 1755              	.LCFI56:
 1756              		.cfi_def_cfa_offset 16
 1757 0a88 00AF     		add	r7, sp, #0
 1758              	.LCFI57:
 1759              		.cfi_def_cfa_register 7
 909:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	uint32_t tmp = LPC_EMAC->TxConsumeIndex -1;
 1760              		.loc 1 909 0
 1761 0a8a 4FF0A043 		mov	r3, #1342177280
 1762 0a8e D3F82C31 		ldr	r3, [r3, #300]
 1763 0a92 03F1FF33 		add	r3, r3, #-1
 1764 0a96 7B60     		str	r3, [r7, #4]
 910:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	if (LPC_EMAC->TxProduceIndex == tmp) {
 1765              		.loc 1 910 0
 1766 0a98 4FF0A043 		mov	r3, #1342177280
 1767 0a9c D3F82821 		ldr	r2, [r3, #296]
 1768 0aa0 7B68     		ldr	r3, [r7, #4]
 1769 0aa2 9A42     		cmp	r2, r3
 1770 0aa4 02D1     		bne	.L113
 911:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		return FALSE;
 1771              		.loc 1 911 0
 1772 0aa6 4FF00003 		mov	r3, #0
 1773 0aaa 01E0     		b	.L114
 1774              	.L113:
 912:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	} else {
 913:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 		return TRUE;
 1775              		.loc 1 913 0
 1776 0aac 4FF00103 		mov	r3, #1
 1777              	.L114:
 914:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	}
 915:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** }
 1778              		.loc 1 915 0
 1779 0ab0 1846     		mov	r0, r3
 1780 0ab2 07F10C07 		add	r7, r7, #12
 1781 0ab6 BD46     		mov	sp, r7
 1782 0ab8 80BC     		pop	{r7}
 1783 0aba 7047     		bx	lr
 1784              		.cfi_endproc
 1785              	.LFE74:
 1787              		.align	2
 1788              		.global	EMAC_CheckReceiveDataStatus
 1789              		.thumb
 1790              		.thumb_func
 1792              	EMAC_CheckReceiveDataStatus:
 1793              	.LFB75:
 916:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 
 917:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 
 918:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** /*********************************************************************//**
 919:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * @brief		Get current status value of receive data (due to RxConsumeIndex)
 920:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * @param[in]	ulRxStatType	Received Status type, should be one of following:
 921:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * 							- EMAC_RINFO_CTRL_FRAME: Control Frame
 922:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * 							- EMAC_RINFO_VLAN: VLAN Frame
 923:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * 							- EMAC_RINFO_FAIL_FILT: RX Filter Failed
 924:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * 							- EMAC_RINFO_MCAST: Multicast Frame
 925:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * 							- EMAC_RINFO_BCAST: Broadcast Frame
 926:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * 							- EMAC_RINFO_CRC_ERR: CRC Error in Frame
 927:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * 							- EMAC_RINFO_SYM_ERR: Symbol Error from PHY
 928:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * 							- EMAC_RINFO_LEN_ERR: Length Error
 929:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * 							- EMAC_RINFO_RANGE_ERR: Range error(exceeded max size)
 930:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * 							- EMAC_RINFO_ALIGN_ERR: Alignment error
 931:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * 							- EMAC_RINFO_OVERRUN: Receive overrun
 932:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * 							- EMAC_RINFO_NO_DESCR: No new Descriptor available
 933:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * 							- EMAC_RINFO_LAST_FLAG: last Fragment in Frame
 934:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * 							- EMAC_RINFO_ERR: Error Occurred (OR of all error)
 935:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * @return		Current value of receive data (due to RxConsumeIndex)
 936:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  **********************************************************************/
 937:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** FlagStatus EMAC_CheckReceiveDataStatus(uint32_t ulRxStatType)
 938:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** {
 1794              		.loc 1 938 0
 1795              		.cfi_startproc
 1796              		@ args = 0, pretend = 0, frame = 16
 1797              		@ frame_needed = 1, uses_anonymous_args = 0
 1798              		@ link register save eliminated.
 1799 0abc 80B4     		push	{r7}
 1800              	.LCFI58:
 1801              		.cfi_def_cfa_offset 4
 1802              		.cfi_offset 7, -4
 1803 0abe 85B0     		sub	sp, sp, #20
 1804              	.LCFI59:
 1805              		.cfi_def_cfa_offset 24
 1806 0ac0 00AF     		add	r7, sp, #0
 1807              	.LCFI60:
 1808              		.cfi_def_cfa_register 7
 1809 0ac2 7860     		str	r0, [r7, #4]
 939:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	uint32_t idx;
 940:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	idx = LPC_EMAC->RxConsumeIndex;
 1810              		.loc 1 940 0
 1811 0ac4 4FF0A043 		mov	r3, #1342177280
 1812 0ac8 D3F81831 		ldr	r3, [r3, #280]
 1813 0acc FB60     		str	r3, [r7, #12]
 941:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	return (((Rx_Stat[idx].Info) & ulRxStatType) ? SET : RESET);
 1814              		.loc 1 941 0
 1815 0ace 40F20003 		movw	r3, #:lower16:Rx_Stat
 1816 0ad2 C0F20003 		movt	r3, #:upper16:Rx_Stat
 1817 0ad6 FA68     		ldr	r2, [r7, #12]
 1818 0ad8 53F83220 		ldr	r2, [r3, r2, lsl #3]
 1819 0adc 7B68     		ldr	r3, [r7, #4]
 1820 0ade 1340     		ands	r3, r3, r2
 1821 0ae0 002B     		cmp	r3, #0
 1822 0ae2 0CBF     		ite	eq
 1823 0ae4 0023     		moveq	r3, #0
 1824 0ae6 0123     		movne	r3, #1
 1825 0ae8 DBB2     		uxtb	r3, r3
 942:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** }
 1826              		.loc 1 942 0
 1827 0aea 1846     		mov	r0, r3
 1828 0aec 07F11407 		add	r7, r7, #20
 1829 0af0 BD46     		mov	sp, r7
 1830 0af2 80BC     		pop	{r7}
 1831 0af4 7047     		bx	lr
 1832              		.cfi_endproc
 1833              	.LFE75:
 1835 0af6 00BF     		.align	2
 1836              		.global	EMAC_GetReceiveDataSize
 1837              		.thumb
 1838              		.thumb_func
 1840              	EMAC_GetReceiveDataSize:
 1841              	.LFB76:
 943:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 
 944:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 
 945:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** /*********************************************************************//**
 946:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * @brief		Get size of current Received data in received buffer (due to
 947:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * 				RxConsumeIndex)
 948:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * @param[in]	None
 949:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * @return		Size of received data
 950:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  **********************************************************************/
 951:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** uint32_t EMAC_GetReceiveDataSize(void)
 952:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** {
 1842              		.loc 1 952 0
 1843              		.cfi_startproc
 1844              		@ args = 0, pretend = 0, frame = 8
 1845              		@ frame_needed = 1, uses_anonymous_args = 0
 1846              		@ link register save eliminated.
 1847 0af8 80B4     		push	{r7}
 1848              	.LCFI61:
 1849              		.cfi_def_cfa_offset 4
 1850              		.cfi_offset 7, -4
 1851 0afa 83B0     		sub	sp, sp, #12
 1852              	.LCFI62:
 1853              		.cfi_def_cfa_offset 16
 1854 0afc 00AF     		add	r7, sp, #0
 1855              	.LCFI63:
 1856              		.cfi_def_cfa_register 7
 953:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	uint32_t idx;
 954:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	idx =LPC_EMAC->RxConsumeIndex;
 1857              		.loc 1 954 0
 1858 0afe 4FF0A043 		mov	r3, #1342177280
 1859 0b02 D3F81831 		ldr	r3, [r3, #280]
 1860 0b06 7B60     		str	r3, [r7, #4]
 955:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	return ((Rx_Stat[idx].Info) & EMAC_RINFO_SIZE);
 1861              		.loc 1 955 0
 1862 0b08 40F20003 		movw	r3, #:lower16:Rx_Stat
 1863 0b0c C0F20003 		movt	r3, #:upper16:Rx_Stat
 1864 0b10 7A68     		ldr	r2, [r7, #4]
 1865 0b12 53F83230 		ldr	r3, [r3, r2, lsl #3]
 1866 0b16 4FEA4353 		lsl	r3, r3, #21
 1867 0b1a 4FEA5353 		lsr	r3, r3, #21
 956:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** }
 1868              		.loc 1 956 0
 1869 0b1e 1846     		mov	r0, r3
 1870 0b20 07F10C07 		add	r7, r7, #12
 1871 0b24 BD46     		mov	sp, r7
 1872 0b26 80BC     		pop	{r7}
 1873 0b28 7047     		bx	lr
 1874              		.cfi_endproc
 1875              	.LFE76:
 1877 0b2a 00BF     		.align	2
 1878              		.global	EMAC_UpdateRxConsumeIndex
 1879              		.thumb
 1880              		.thumb_func
 1882              	EMAC_UpdateRxConsumeIndex:
 1883              	.LFB77:
 957:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 
 958:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** /*********************************************************************//**
 959:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * @brief		Increase the RxConsumeIndex (after reading the Receive buffer
 960:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * 				to release the Receive buffer) and wrap-around the index if
 961:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * 				it reaches the maximum Receive Number
 962:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * @param[in]	None
 963:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * @return		None
 964:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  **********************************************************************/
 965:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** void EMAC_UpdateRxConsumeIndex(void)
 966:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** {
 1884              		.loc 1 966 0
 1885              		.cfi_startproc
 1886              		@ args = 0, pretend = 0, frame = 8
 1887              		@ frame_needed = 1, uses_anonymous_args = 0
 1888              		@ link register save eliminated.
 1889 0b2c 80B4     		push	{r7}
 1890              	.LCFI64:
 1891              		.cfi_def_cfa_offset 4
 1892              		.cfi_offset 7, -4
 1893 0b2e 83B0     		sub	sp, sp, #12
 1894              	.LCFI65:
 1895              		.cfi_def_cfa_offset 16
 1896 0b30 00AF     		add	r7, sp, #0
 1897              	.LCFI66:
 1898              		.cfi_def_cfa_register 7
 967:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	// Get current Rx consume index
 968:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	uint32_t idx = LPC_EMAC->RxConsumeIndex;
 1899              		.loc 1 968 0
 1900 0b32 4FF0A043 		mov	r3, #1342177280
 1901 0b36 D3F81831 		ldr	r3, [r3, #280]
 1902 0b3a 7B60     		str	r3, [r7, #4]
 969:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 
 970:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	/* Release frame from EMAC buffer */
 971:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	if (++idx == EMAC_NUM_RX_FRAG) idx = 0;
 1903              		.loc 1 971 0
 1904 0b3c 7B68     		ldr	r3, [r7, #4]
 1905 0b3e 03F10103 		add	r3, r3, #1
 1906 0b42 7B60     		str	r3, [r7, #4]
 1907 0b44 7B68     		ldr	r3, [r7, #4]
 1908 0b46 042B     		cmp	r3, #4
 1909 0b48 02D1     		bne	.L118
 1910              		.loc 1 971 0 is_stmt 0 discriminator 1
 1911 0b4a 4FF00003 		mov	r3, #0
 1912 0b4e 7B60     		str	r3, [r7, #4]
 1913              	.L118:
 972:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	LPC_EMAC->RxConsumeIndex = idx;
 1914              		.loc 1 972 0 is_stmt 1
 1915 0b50 4FF0A043 		mov	r3, #1342177280
 1916 0b54 7A68     		ldr	r2, [r7, #4]
 1917 0b56 C3F81821 		str	r2, [r3, #280]
 973:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** }
 1918              		.loc 1 973 0
 1919 0b5a 07F10C07 		add	r7, r7, #12
 1920 0b5e BD46     		mov	sp, r7
 1921 0b60 80BC     		pop	{r7}
 1922 0b62 7047     		bx	lr
 1923              		.cfi_endproc
 1924              	.LFE77:
 1926              		.align	2
 1927              		.global	EMAC_UpdateTxProduceIndex
 1928              		.thumb
 1929              		.thumb_func
 1931              	EMAC_UpdateTxProduceIndex:
 1932              	.LFB78:
 974:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 
 975:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** /*********************************************************************//**
 976:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * @brief		Increase the TxProduceIndex (after writting to the Transmit buffer
 977:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * 				to enable the Transmit buffer) and wrap-around the index if
 978:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * 				it reaches the maximum Transmit Number
 979:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * @param[in]	None
 980:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  * @return		None
 981:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c ****  **********************************************************************/
 982:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** void EMAC_UpdateTxProduceIndex(void)
 983:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** {
 1933              		.loc 1 983 0
 1934              		.cfi_startproc
 1935              		@ args = 0, pretend = 0, frame = 8
 1936              		@ frame_needed = 1, uses_anonymous_args = 0
 1937              		@ link register save eliminated.
 1938 0b64 80B4     		push	{r7}
 1939              	.LCFI67:
 1940              		.cfi_def_cfa_offset 4
 1941              		.cfi_offset 7, -4
 1942 0b66 83B0     		sub	sp, sp, #12
 1943              	.LCFI68:
 1944              		.cfi_def_cfa_offset 16
 1945 0b68 00AF     		add	r7, sp, #0
 1946              	.LCFI69:
 1947              		.cfi_def_cfa_register 7
 984:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	// Get current Tx produce index
 985:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	uint32_t idx = LPC_EMAC->TxProduceIndex;
 1948              		.loc 1 985 0
 1949 0b6a 4FF0A043 		mov	r3, #1342177280
 1950 0b6e D3F82831 		ldr	r3, [r3, #296]
 1951 0b72 7B60     		str	r3, [r7, #4]
 986:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 
 987:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	/* Start frame transmission */
 988:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	if (++idx == EMAC_NUM_TX_FRAG) idx = 0;
 1952              		.loc 1 988 0
 1953 0b74 7B68     		ldr	r3, [r7, #4]
 1954 0b76 03F10103 		add	r3, r3, #1
 1955 0b7a 7B60     		str	r3, [r7, #4]
 1956 0b7c 7B68     		ldr	r3, [r7, #4]
 1957 0b7e 032B     		cmp	r3, #3
 1958 0b80 02D1     		bne	.L120
 1959              		.loc 1 988 0 is_stmt 0 discriminator 1
 1960 0b82 4FF00003 		mov	r3, #0
 1961 0b86 7B60     		str	r3, [r7, #4]
 1962              	.L120:
 989:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** 	LPC_EMAC->TxProduceIndex = idx;
 1963              		.loc 1 989 0 is_stmt 1
 1964 0b88 4FF0A043 		mov	r3, #1342177280
 1965 0b8c 7A68     		ldr	r2, [r7, #4]
 1966 0b8e C3F82821 		str	r2, [r3, #296]
 990:Libraries/uC-CSP/LPC17xx/lpc17xx_emac.c **** }
 1967              		.loc 1 990 0
 1968 0b92 07F10C07 		add	r7, r7, #12
 1969 0b96 BD46     		mov	sp, r7
 1970 0b98 80BC     		pop	{r7}
 1971 0b9a 7047     		bx	lr
 1972              		.cfi_endproc
 1973              	.LFE78:
 1975              	.Letext0:
 1976              		.file 2 "/home/wimma/bin/codesourcery/Sourcery_CodeBench_Lite_for_ARM_EABI/bin/../lib/gcc/arm-none
 1977              		.file 3 "Libraries/CM3/inc/LPC17xx.h"
 1978              		.file 4 "Libraries/CM3/inc/lpc_types.h"
 1979              		.file 5 "Libraries/uC-CSP/LPC17xx/lpc17xx_emac.h"
 1980              		.file 6 "Libraries/CM3/inc/core_cm3.h"
 1981              		.file 7 "Libraries/CM3/inc/system_LPC17xx.h"
DEFINED SYMBOLS
                            *ABS*:00000000 lpc17xx_emac.c
     /tmp/ccknFm49.s:23     .rodata:00000000 EMAC_clkdiv
     /tmp/ccknFm49.s:20     .rodata:00000000 $d
     /tmp/ccknFm49.s:32     .bss:00000000 $d
     /tmp/ccknFm49.s:33     .bss:00000000 Rx_Desc
     /tmp/ccknFm49.s:36     .bss:00000020 Rx_Stat
     /tmp/ccknFm49.s:39     .bss:00000040 Tx_Desc
     /tmp/ccknFm49.s:42     .bss:00000058 Tx_Stat
     /tmp/ccknFm49.s:45     .bss:00000064 eth_rx_buf
     /tmp/ccknFm49.s:48     .bss:00001864 eth_tx_buf
     /tmp/ccknFm49.s:51     .text:00000000 $t
     /tmp/ccknFm49.s:55     .text:00000000 rx_descr_init
     /tmp/ccknFm49.s:155    .text:000000cc tx_descr_init
     /tmp/ccknFm49.s:245    .text:0000017c write_PHY
     /tmp/ccknFm49.s:318    .text:000001e0 read_PHY
     /tmp/ccknFm49.s:394    .text:00000250 setEmacAddr
     /tmp/ccknFm49.s:459    .text:000002b8 emac_CRCCalc
     /tmp/ccknFm49.s:631    .text:000003dc EMAC_Init
     /tmp/ccknFm49.s:830    .text:00000570 EMAC_DeInit
     /tmp/ccknFm49.s:866    .text:0000059c EMAC_CheckPHYStatus
     /tmp/ccknFm49.s:952    .text:00000608 EMAC_SetPHYMode
     /tmp/ccknFm49.s:993    .text:00000640 $d
     /tmp/ccknFm49.s:1000   .text:00000654 $t
     /tmp/ccknFm49.s:1105   .text:000006f4 EMAC_UpdatePHYStatus
     /tmp/ccknFm49.s:1221   .text:000007ac EMAC_SetHashFilter
     /tmp/ccknFm49.s:1325   .text:00000850 EMAC_SetFilterMode
     /tmp/ccknFm49.s:1382   .text:000008a0 EMAC_GetWoLStatus
     /tmp/ccknFm49.s:1432   .text:000008d8 EMAC_WritePacketBuffer
     /tmp/ccknFm49.s:1516   .text:00000960 EMAC_ReadPacketBuffer
     /tmp/ccknFm49.s:1595   .text:000009d0 EMAC_IntCmd
     /tmp/ccknFm49.s:1652   .text:00000a20 EMAC_IntGetStatus
     /tmp/ccknFm49.s:1702   .text:00000a58 EMAC_CheckReceiveIndex
     /tmp/ccknFm49.s:1743   .text:00000a84 EMAC_CheckTransmitIndex
     /tmp/ccknFm49.s:1792   .text:00000abc EMAC_CheckReceiveDataStatus
     /tmp/ccknFm49.s:1840   .text:00000af8 EMAC_GetReceiveDataSize
     /tmp/ccknFm49.s:1882   .text:00000b2c EMAC_UpdateRxConsumeIndex
     /tmp/ccknFm49.s:1931   .text:00000b64 EMAC_UpdateTxProduceIndex
                     .debug_frame:00000010 $d

UNDEFINED SYMBOLS
CLKPWR_ConfigPPWR
SystemCoreClock
