   1              		.syntax unified
   2              		.cpu cortex-m3
   3              		.fpu softvfp
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 6
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.thumb
  14              		.file	"os_msg.c"
  15              		.text
  16              	.Ltext0:
  17              		.cfi_sections	.debug_frame
  18              		.align	2
  19              		.global	OSMsgPoolExtend
  20              		.thumb
  21              		.thumb_func
  23              	OSMsgPoolExtend:
  24              	.LFB0:
  25              		.file 1 "Libraries/uC-OSIII/os_msg.c"
   1:Libraries/uC-OSIII/os_msg.c **** /*
   2:Libraries/uC-OSIII/os_msg.c **** ***************************************************************************************************
   3:Libraries/uC-OSIII/os_msg.c **** *                                                      uC/OS-III
   4:Libraries/uC-OSIII/os_msg.c **** *                                                 The Real-Time Kernel
   5:Libraries/uC-OSIII/os_msg.c **** *
   6:Libraries/uC-OSIII/os_msg.c **** *                                  (c) Copyright 2009-2010; Micrium, Inc.; Weston, FL
   7:Libraries/uC-OSIII/os_msg.c **** *                          All rights reserved.  Protected by international copyright laws.
   8:Libraries/uC-OSIII/os_msg.c **** *
   9:Libraries/uC-OSIII/os_msg.c **** *                                               MESSAGE HANDLING SERVICES
  10:Libraries/uC-OSIII/os_msg.c **** *
  11:Libraries/uC-OSIII/os_msg.c **** * File    : OS_MSG.C
  12:Libraries/uC-OSIII/os_msg.c **** * By      : JJL
  13:Libraries/uC-OSIII/os_msg.c **** * Version : V3.01.2
  14:Libraries/uC-OSIII/os_msg.c **** *
  15:Libraries/uC-OSIII/os_msg.c **** * LICENSING TERMS:
  16:Libraries/uC-OSIII/os_msg.c **** * ---------------
  17:Libraries/uC-OSIII/os_msg.c **** *               uC/OS-III is provided in source form to registered licensees ONLY.  It is
  18:Libraries/uC-OSIII/os_msg.c **** *               illegal to distribute this source code to any third party unless you receive
  19:Libraries/uC-OSIII/os_msg.c **** *               written permission by an authorized Micrium representative.  Knowledge of
  20:Libraries/uC-OSIII/os_msg.c **** *               the source code may NOT be used to develop a similar product.
  21:Libraries/uC-OSIII/os_msg.c **** *
  22:Libraries/uC-OSIII/os_msg.c **** *               Please help us continue to provide the Embedded community with the finest
  23:Libraries/uC-OSIII/os_msg.c **** *               software available.  Your honesty is greatly appreciated.
  24:Libraries/uC-OSIII/os_msg.c **** *
  25:Libraries/uC-OSIII/os_msg.c **** *               You can contact us at www.micrium.com.
  26:Libraries/uC-OSIII/os_msg.c **** ***************************************************************************************************
  27:Libraries/uC-OSIII/os_msg.c **** */
  28:Libraries/uC-OSIII/os_msg.c **** 
  29:Libraries/uC-OSIII/os_msg.c **** #include <os.h>
  30:Libraries/uC-OSIII/os_msg.c **** 
  31:Libraries/uC-OSIII/os_msg.c **** #ifdef VSC_INCLUDE_SOURCE_FILE_NAMES
  32:Libraries/uC-OSIII/os_msg.c **** const  CPU_CHAR  *os_msg__c = "$Id: $";
  33:Libraries/uC-OSIII/os_msg.c **** #endif
  34:Libraries/uC-OSIII/os_msg.c **** 
  35:Libraries/uC-OSIII/os_msg.c **** 
  36:Libraries/uC-OSIII/os_msg.c **** #if OS_MSG_EN > 0u
  37:Libraries/uC-OSIII/os_msg.c **** /*
  38:Libraries/uC-OSIII/os_msg.c **** ***************************************************************************************************
  39:Libraries/uC-OSIII/os_msg.c **** *                                            EXTEND THE POOL OF 'OS_MSG'
  40:Libraries/uC-OSIII/os_msg.c **** *
  41:Libraries/uC-OSIII/os_msg.c **** * Description: This function is called by your application to add OS_MSGs to the free list of OS_MS
  42:Libraries/uC-OSIII/os_msg.c **** *
  43:Libraries/uC-OSIII/os_msg.c **** * Arguments  : p_msg        is a pointer to the base address of an array of OS_MSG and should be de
  44:Libraries/uC-OSIII/os_msg.c **** *
  45:Libraries/uC-OSIII/os_msg.c **** *                           OS_MSG  MyNewMsgTbl[size];
  46:Libraries/uC-OSIII/os_msg.c **** *
  47:Libraries/uC-OSIII/os_msg.c **** *              size         is the size of the above array
  48:Libraries/uC-OSIII/os_msg.c **** *
  49:Libraries/uC-OSIII/os_msg.c **** *              p_err        is a pointer to a variable that will contain an error code returned by 
  50:Libraries/uC-OSIII/os_msg.c **** *
  51:Libraries/uC-OSIII/os_msg.c **** *                               OS_ERR_MSG_POOL_NULL_PTR
  52:Libraries/uC-OSIII/os_msg.c **** *                               OS_ERR_MSG_POOL_EMPTY
  53:Libraries/uC-OSIII/os_msg.c **** *                               OS_ERR_NONE
  54:Libraries/uC-OSIII/os_msg.c **** *
  55:Libraries/uC-OSIII/os_msg.c **** * Returns    : none
  56:Libraries/uC-OSIII/os_msg.c **** ***************************************************************************************************
  57:Libraries/uC-OSIII/os_msg.c **** */
  58:Libraries/uC-OSIII/os_msg.c **** 
  59:Libraries/uC-OSIII/os_msg.c **** void  OSMsgPoolExtend (OS_MSG      *p_msg,
  60:Libraries/uC-OSIII/os_msg.c ****                        OS_MSG_QTY   size,
  61:Libraries/uC-OSIII/os_msg.c ****                        OS_ERR      *p_err)
  62:Libraries/uC-OSIII/os_msg.c **** {
  26              		.loc 1 62 0
  27              		.cfi_startproc
  28              		@ args = 0, pretend = 0, frame = 16
  29              		@ frame_needed = 1, uses_anonymous_args = 0
  30 0000 80B5     		push	{r7, lr}
  31              	.LCFI0:
  32              		.cfi_def_cfa_offset 8
  33              		.cfi_offset 14, -4
  34              		.cfi_offset 7, -8
  35 0002 84B0     		sub	sp, sp, #16
  36              	.LCFI1:
  37              		.cfi_def_cfa_offset 24
  38 0004 00AF     		add	r7, sp, #0
  39              	.LCFI2:
  40              		.cfi_def_cfa_register 7
  41 0006 F860     		str	r0, [r7, #12]
  42 0008 0B46     		mov	r3, r1
  43 000a 7A60     		str	r2, [r7, #4]
  44 000c 7B81     		strh	r3, [r7, #10]	@ movhi
  63:Libraries/uC-OSIII/os_msg.c **** #ifdef OS_SAFETY_CRITICAL
  64:Libraries/uC-OSIII/os_msg.c ****     if (p_err == (OS_ERR *)0) {
  65:Libraries/uC-OSIII/os_msg.c ****         OS_SAFETY_CRITICAL_EXCEPTION();
  66:Libraries/uC-OSIII/os_msg.c ****     }
  67:Libraries/uC-OSIII/os_msg.c **** #endif
  68:Libraries/uC-OSIII/os_msg.c **** 
  69:Libraries/uC-OSIII/os_msg.c **** #if OS_CFG_ARG_CHK_EN > 0u
  70:Libraries/uC-OSIII/os_msg.c ****     if (p_msg == (OS_MSG *)0) {
  45              		.loc 1 70 0
  46 000e FB68     		ldr	r3, [r7, #12]
  47 0010 002B     		cmp	r3, #0
  48 0012 04D1     		bne	.L2
  71:Libraries/uC-OSIII/os_msg.c ****         *p_err = OS_ERR_MSG_POOL_NULL_PTR;
  49              		.loc 1 71 0
  50 0014 7B68     		ldr	r3, [r7, #4]
  51 0016 45F21E72 		movw	r2, #22302
  52 001a 1A80     		strh	r2, [r3, #0]	@ movhi
  72:Libraries/uC-OSIII/os_msg.c ****         return;
  53              		.loc 1 72 0
  54 001c 30E0     		b	.L1
  55              	.L2:
  73:Libraries/uC-OSIII/os_msg.c ****     }
  74:Libraries/uC-OSIII/os_msg.c ****     if (size == (OS_MSG_QTY)0) {
  56              		.loc 1 74 0
  57 001e 7B89     		ldrh	r3, [r7, #10]
  58 0020 002B     		cmp	r3, #0
  59 0022 04D1     		bne	.L4
  75:Libraries/uC-OSIII/os_msg.c ****         *p_err = OS_ERR_MSG_POOL_EMPTY;
  60              		.loc 1 75 0
  61 0024 7B68     		ldr	r3, [r7, #4]
  62 0026 45F21D72 		movw	r2, #22301
  63 002a 1A80     		strh	r2, [r3, #0]	@ movhi
  76:Libraries/uC-OSIII/os_msg.c ****         return;
  64              		.loc 1 76 0
  65 002c 28E0     		b	.L1
  66              	.L4:
  77:Libraries/uC-OSIII/os_msg.c ****     }
  78:Libraries/uC-OSIII/os_msg.c **** #endif
  79:Libraries/uC-OSIII/os_msg.c **** 
  80:Libraries/uC-OSIII/os_msg.c ****     OS_MsgPoolCreate(p_msg,                                 /* Create the singly linked list       
  67              		.loc 1 80 0
  68 002e 7B89     		ldrh	r3, [r7, #10]
  69 0030 F868     		ldr	r0, [r7, #12]
  70 0032 1946     		mov	r1, r3
  71 0034 FFF7FEFF 		bl	OS_MsgPoolCreate
  81:Libraries/uC-OSIII/os_msg.c ****                      size);
  82:Libraries/uC-OSIII/os_msg.c ****     p_msg[size - 1u].NextPtr = OSMsgPool.NextPtr;           /* Link last OS_MSG of new list to curr
  72              		.loc 1 82 0
  73 0038 7B89     		ldrh	r3, [r7, #10]
  74 003a 03F1FF33 		add	r3, r3, #-1
  75 003e 4FEA0313 		lsl	r3, r3, #4
  76 0042 FA68     		ldr	r2, [r7, #12]
  77 0044 D218     		adds	r2, r2, r3
  78 0046 40F20003 		movw	r3, #:lower16:OSMsgPool
  79 004a C0F20003 		movt	r3, #:upper16:OSMsgPool
  80 004e 1B68     		ldr	r3, [r3, #0]
  81 0050 1360     		str	r3, [r2, #0]
  83:Libraries/uC-OSIII/os_msg.c ****     OSMsgPool.NextPtr       = p_msg;
  82              		.loc 1 83 0
  83 0052 40F20003 		movw	r3, #:lower16:OSMsgPool
  84 0056 C0F20003 		movt	r3, #:upper16:OSMsgPool
  85 005a FA68     		ldr	r2, [r7, #12]
  86 005c 1A60     		str	r2, [r3, #0]
  84:Libraries/uC-OSIII/os_msg.c ****     OSMsgPool.NbrFree      += size;                         /* All new OS_MSGs are now available   
  87              		.loc 1 84 0
  88 005e 40F20003 		movw	r3, #:lower16:OSMsgPool
  89 0062 C0F20003 		movt	r3, #:upper16:OSMsgPool
  90 0066 9A88     		ldrh	r2, [r3, #4]
  91 0068 7B89     		ldrh	r3, [r7, #10]	@ movhi
  92 006a D318     		adds	r3, r2, r3
  93 006c 9AB2     		uxth	r2, r3
  94 006e 40F20003 		movw	r3, #:lower16:OSMsgPool
  95 0072 C0F20003 		movt	r3, #:upper16:OSMsgPool
  96 0076 9A80     		strh	r2, [r3, #4]	@ movhi
  85:Libraries/uC-OSIII/os_msg.c ****     *p_err                  = OS_ERR_NONE;
  97              		.loc 1 85 0
  98 0078 7B68     		ldr	r3, [r7, #4]
  99 007a 4FF00002 		mov	r2, #0
 100 007e 1A80     		strh	r2, [r3, #0]	@ movhi
 101              	.L1:
  86:Libraries/uC-OSIII/os_msg.c **** }
 102              		.loc 1 86 0
 103 0080 07F11007 		add	r7, r7, #16
 104 0084 BD46     		mov	sp, r7
 105 0086 80BD     		pop	{r7, pc}
 106              		.cfi_endproc
 107              	.LFE0:
 109              		.align	2
 110              		.global	OS_MsgPoolCreate
 111              		.thumb
 112              		.thumb_func
 114              	OS_MsgPoolCreate:
 115              	.LFB1:
  87:Libraries/uC-OSIII/os_msg.c **** 
  88:Libraries/uC-OSIII/os_msg.c **** /*$PAGE*/
  89:Libraries/uC-OSIII/os_msg.c **** /*
  90:Libraries/uC-OSIII/os_msg.c **** ***************************************************************************************************
  91:Libraries/uC-OSIII/os_msg.c **** *                                           CREATE A LINKED LIST OF 'OS_MSG'
  92:Libraries/uC-OSIII/os_msg.c **** *
  93:Libraries/uC-OSIII/os_msg.c **** * Description: This function is called to create a singly linked list of OS_MSGs which is used as a
  94:Libraries/uC-OSIII/os_msg.c **** *              OS_MSGs to be used for sending messages.
  95:Libraries/uC-OSIII/os_msg.c **** *
  96:Libraries/uC-OSIII/os_msg.c **** * Arguments  : p_msg        is a pointer to the base address of an array of OS_MSG and should be de
  97:Libraries/uC-OSIII/os_msg.c **** *              -----
  98:Libraries/uC-OSIII/os_msg.c **** *                               OS_MSG  MyMsgTbl[size];
  99:Libraries/uC-OSIII/os_msg.c **** *
 100:Libraries/uC-OSIII/os_msg.c **** *              size         is the size of the above array
 101:Libraries/uC-OSIII/os_msg.c **** *
 102:Libraries/uC-OSIII/os_msg.c **** * Returns    : none
 103:Libraries/uC-OSIII/os_msg.c **** *
 104:Libraries/uC-OSIII/os_msg.c **** * Note(s)    : 1) This function is INTERNAL to uC/OS-III and your application MUST NOT call it.
 105:Libraries/uC-OSIII/os_msg.c **** ***************************************************************************************************
 106:Libraries/uC-OSIII/os_msg.c **** */
 107:Libraries/uC-OSIII/os_msg.c **** 
 108:Libraries/uC-OSIII/os_msg.c **** void  OS_MsgPoolCreate (OS_MSG      *p_msg,
 109:Libraries/uC-OSIII/os_msg.c ****                         OS_MSG_QTY   size)
 110:Libraries/uC-OSIII/os_msg.c **** {
 116              		.loc 1 110 0
 117              		.cfi_startproc
 118              		@ args = 0, pretend = 0, frame = 24
 119              		@ frame_needed = 1, uses_anonymous_args = 0
 120              		@ link register save eliminated.
 121 0088 80B4     		push	{r7}
 122              	.LCFI3:
 123              		.cfi_def_cfa_offset 4
 124              		.cfi_offset 7, -4
 125 008a 87B0     		sub	sp, sp, #28
 126              	.LCFI4:
 127              		.cfi_def_cfa_offset 32
 128 008c 00AF     		add	r7, sp, #0
 129              	.LCFI5:
 130              		.cfi_def_cfa_register 7
 131 008e 7860     		str	r0, [r7, #4]
 132 0090 0B46     		mov	r3, r1
 133 0092 7B80     		strh	r3, [r7, #2]	@ movhi
 111:Libraries/uC-OSIII/os_msg.c ****     OS_MSG      *p_msg1;
 112:Libraries/uC-OSIII/os_msg.c ****     OS_MSG      *p_msg2;
 113:Libraries/uC-OSIII/os_msg.c ****     OS_MSG_QTY   i;
 114:Libraries/uC-OSIII/os_msg.c ****     OS_MSG_QTY   loops;
 115:Libraries/uC-OSIII/os_msg.c **** 
 116:Libraries/uC-OSIII/os_msg.c **** 
 117:Libraries/uC-OSIII/os_msg.c **** 
 118:Libraries/uC-OSIII/os_msg.c ****     p_msg1 = p_msg;
 134              		.loc 1 118 0
 135 0094 7B68     		ldr	r3, [r7, #4]
 136 0096 7B61     		str	r3, [r7, #20]
 119:Libraries/uC-OSIII/os_msg.c ****     p_msg2 = p_msg;
 137              		.loc 1 119 0
 138 0098 7B68     		ldr	r3, [r7, #4]
 139 009a 3B61     		str	r3, [r7, #16]
 120:Libraries/uC-OSIII/os_msg.c ****     p_msg2++;
 140              		.loc 1 120 0
 141 009c 3B69     		ldr	r3, [r7, #16]
 142 009e 03F11003 		add	r3, r3, #16
 143 00a2 3B61     		str	r3, [r7, #16]
 121:Libraries/uC-OSIII/os_msg.c ****     loops  = size - 1u;
 144              		.loc 1 121 0
 145 00a4 7B88     		ldrh	r3, [r7, #2]	@ movhi
 146 00a6 03F1FF33 		add	r3, r3, #-1
 147 00aa BB81     		strh	r3, [r7, #12]	@ movhi
 122:Libraries/uC-OSIII/os_msg.c ****     for (i = 0u; i < loops; i++) {                          /* Init. list of free OS_MSGs          
 148              		.loc 1 122 0
 149 00ac 4FF00003 		mov	r3, #0
 150 00b0 FB81     		strh	r3, [r7, #14]	@ movhi
 151 00b2 1AE0     		b	.L6
 152              	.L7:
 123:Libraries/uC-OSIII/os_msg.c ****         p_msg1->NextPtr = p_msg2;
 153              		.loc 1 123 0 discriminator 2
 154 00b4 7B69     		ldr	r3, [r7, #20]
 155 00b6 3A69     		ldr	r2, [r7, #16]
 156 00b8 1A60     		str	r2, [r3, #0]
 124:Libraries/uC-OSIII/os_msg.c ****         p_msg1->MsgPtr  = (void      *)0;
 157              		.loc 1 124 0 discriminator 2
 158 00ba 7B69     		ldr	r3, [r7, #20]
 159 00bc 4FF00002 		mov	r2, #0
 160 00c0 5A60     		str	r2, [r3, #4]
 125:Libraries/uC-OSIII/os_msg.c ****         p_msg1->MsgSize = (OS_MSG_SIZE)0u;
 161              		.loc 1 125 0 discriminator 2
 162 00c2 7B69     		ldr	r3, [r7, #20]
 163 00c4 4FF00002 		mov	r2, #0
 164 00c8 1A81     		strh	r2, [r3, #8]	@ movhi
 126:Libraries/uC-OSIII/os_msg.c ****         p_msg1->MsgTS   = (CPU_TS     )0u;
 165              		.loc 1 126 0 discriminator 2
 166 00ca 7B69     		ldr	r3, [r7, #20]
 167 00cc 4FF00002 		mov	r2, #0
 168 00d0 DA60     		str	r2, [r3, #12]
 127:Libraries/uC-OSIII/os_msg.c ****         p_msg1++;
 169              		.loc 1 127 0 discriminator 2
 170 00d2 7B69     		ldr	r3, [r7, #20]
 171 00d4 03F11003 		add	r3, r3, #16
 172 00d8 7B61     		str	r3, [r7, #20]
 128:Libraries/uC-OSIII/os_msg.c ****         p_msg2++;
 173              		.loc 1 128 0 discriminator 2
 174 00da 3B69     		ldr	r3, [r7, #16]
 175 00dc 03F11003 		add	r3, r3, #16
 176 00e0 3B61     		str	r3, [r7, #16]
 122:Libraries/uC-OSIII/os_msg.c ****     for (i = 0u; i < loops; i++) {                          /* Init. list of free OS_MSGs          
 177              		.loc 1 122 0 discriminator 2
 178 00e2 FB89     		ldrh	r3, [r7, #14]	@ movhi
 179 00e4 03F10103 		add	r3, r3, #1
 180 00e8 FB81     		strh	r3, [r7, #14]	@ movhi
 181              	.L6:
 122:Libraries/uC-OSIII/os_msg.c ****     for (i = 0u; i < loops; i++) {                          /* Init. list of free OS_MSGs          
 182              		.loc 1 122 0 is_stmt 0 discriminator 1
 183 00ea FA89     		ldrh	r2, [r7, #14]
 184 00ec BB89     		ldrh	r3, [r7, #12]
 185 00ee 9A42     		cmp	r2, r3
 186 00f0 E0D3     		bcc	.L7
 129:Libraries/uC-OSIII/os_msg.c ****     }
 130:Libraries/uC-OSIII/os_msg.c ****     p_msg1->NextPtr = (OS_MSG    *)0;                       /* Last OS_MSG                         
 187              		.loc 1 130 0 is_stmt 1
 188 00f2 7B69     		ldr	r3, [r7, #20]
 189 00f4 4FF00002 		mov	r2, #0
 190 00f8 1A60     		str	r2, [r3, #0]
 131:Libraries/uC-OSIII/os_msg.c ****     p_msg1->MsgPtr  = (void      *)0;
 191              		.loc 1 131 0
 192 00fa 7B69     		ldr	r3, [r7, #20]
 193 00fc 4FF00002 		mov	r2, #0
 194 0100 5A60     		str	r2, [r3, #4]
 132:Libraries/uC-OSIII/os_msg.c ****     p_msg1->MsgSize = (OS_MSG_SIZE)0u;
 195              		.loc 1 132 0
 196 0102 7B69     		ldr	r3, [r7, #20]
 197 0104 4FF00002 		mov	r2, #0
 198 0108 1A81     		strh	r2, [r3, #8]	@ movhi
 133:Libraries/uC-OSIII/os_msg.c ****     p_msg1->MsgTS   = (CPU_TS     )0u;
 199              		.loc 1 133 0
 200 010a 7B69     		ldr	r3, [r7, #20]
 201 010c 4FF00002 		mov	r2, #0
 202 0110 DA60     		str	r2, [r3, #12]
 134:Libraries/uC-OSIII/os_msg.c **** }
 203              		.loc 1 134 0
 204 0112 07F11C07 		add	r7, r7, #28
 205 0116 BD46     		mov	sp, r7
 206 0118 80BC     		pop	{r7}
 207 011a 7047     		bx	lr
 208              		.cfi_endproc
 209              	.LFE1:
 211              		.align	2
 212              		.global	OS_MsgPoolInit
 213              		.thumb
 214              		.thumb_func
 216              	OS_MsgPoolInit:
 217              	.LFB2:
 135:Libraries/uC-OSIII/os_msg.c **** 
 136:Libraries/uC-OSIII/os_msg.c **** /*$PAGE*/
 137:Libraries/uC-OSIII/os_msg.c **** /*
 138:Libraries/uC-OSIII/os_msg.c **** ***************************************************************************************************
 139:Libraries/uC-OSIII/os_msg.c **** *                                            INITIALIZE THE POOL OF 'OS_MSG'
 140:Libraries/uC-OSIII/os_msg.c **** *
 141:Libraries/uC-OSIII/os_msg.c **** * Description: This function is called by OSInit() to initialize the free list of OS_MSGs.
 142:Libraries/uC-OSIII/os_msg.c **** *
 143:Libraries/uC-OSIII/os_msg.c **** * Argument(s): p_err     is a pointer to a variable that will contain an error code returned by thi
 144:Libraries/uC-OSIII/os_msg.c **** *
 145:Libraries/uC-OSIII/os_msg.c **** *                            OS_ERR_MSG_POOL_NULL_PTR
 146:Libraries/uC-OSIII/os_msg.c **** *                            OS_ERR_MSG_POOL_EMPTY
 147:Libraries/uC-OSIII/os_msg.c **** *                            OS_ERR_NONE
 148:Libraries/uC-OSIII/os_msg.c **** *
 149:Libraries/uC-OSIII/os_msg.c **** * Returns    : none
 150:Libraries/uC-OSIII/os_msg.c **** *
 151:Libraries/uC-OSIII/os_msg.c **** * Note(s)    : 1) This function is INTERNAL to uC/OS-III and your application MUST NOT call it.
 152:Libraries/uC-OSIII/os_msg.c **** ***************************************************************************************************
 153:Libraries/uC-OSIII/os_msg.c **** */
 154:Libraries/uC-OSIII/os_msg.c **** 
 155:Libraries/uC-OSIII/os_msg.c **** void  OS_MsgPoolInit (OS_ERR  *p_err)
 156:Libraries/uC-OSIII/os_msg.c **** {
 218              		.loc 1 156 0
 219              		.cfi_startproc
 220              		@ args = 0, pretend = 0, frame = 8
 221              		@ frame_needed = 1, uses_anonymous_args = 0
 222 011c 80B5     		push	{r7, lr}
 223              	.LCFI6:
 224              		.cfi_def_cfa_offset 8
 225              		.cfi_offset 14, -4
 226              		.cfi_offset 7, -8
 227 011e 82B0     		sub	sp, sp, #8
 228              	.LCFI7:
 229              		.cfi_def_cfa_offset 16
 230 0120 00AF     		add	r7, sp, #0
 231              	.LCFI8:
 232              		.cfi_def_cfa_register 7
 233 0122 7860     		str	r0, [r7, #4]
 157:Libraries/uC-OSIII/os_msg.c **** #ifdef OS_SAFETY_CRITICAL
 158:Libraries/uC-OSIII/os_msg.c ****     if (p_err == (OS_ERR *)0) {
 159:Libraries/uC-OSIII/os_msg.c ****         OS_SAFETY_CRITICAL_EXCEPTION();
 160:Libraries/uC-OSIII/os_msg.c ****     }
 161:Libraries/uC-OSIII/os_msg.c **** #endif
 162:Libraries/uC-OSIII/os_msg.c **** 
 163:Libraries/uC-OSIII/os_msg.c **** #if OS_CFG_ARG_CHK_EN > 0u
 164:Libraries/uC-OSIII/os_msg.c ****     if (OSCfg_MsgPoolBasePtr == (OS_MSG *)0) {
 234              		.loc 1 164 0
 235 0124 40F20003 		movw	r3, #:lower16:OSCfg_MsgPoolBasePtr
 236 0128 C0F20003 		movt	r3, #:upper16:OSCfg_MsgPoolBasePtr
 237 012c 1B68     		ldr	r3, [r3, #0]
 238 012e 002B     		cmp	r3, #0
 239 0130 04D1     		bne	.L9
 165:Libraries/uC-OSIII/os_msg.c ****         *p_err = OS_ERR_MSG_POOL_NULL_PTR;
 240              		.loc 1 165 0
 241 0132 7B68     		ldr	r3, [r7, #4]
 242 0134 45F21E72 		movw	r2, #22302
 243 0138 1A80     		strh	r2, [r3, #0]	@ movhi
 166:Libraries/uC-OSIII/os_msg.c ****         return;
 244              		.loc 1 166 0
 245 013a 38E0     		b	.L8
 246              	.L9:
 167:Libraries/uC-OSIII/os_msg.c ****     }
 168:Libraries/uC-OSIII/os_msg.c ****     if (OSCfg_MsgPoolSize == (OS_MSG_QTY)0) {
 247              		.loc 1 168 0
 248 013c 40F20003 		movw	r3, #:lower16:OSCfg_MsgPoolSize
 249 0140 C0F20003 		movt	r3, #:upper16:OSCfg_MsgPoolSize
 250 0144 1B88     		ldrh	r3, [r3, #0]
 251 0146 002B     		cmp	r3, #0
 252 0148 04D1     		bne	.L11
 169:Libraries/uC-OSIII/os_msg.c ****         *p_err = OS_ERR_MSG_POOL_EMPTY;
 253              		.loc 1 169 0
 254 014a 7B68     		ldr	r3, [r7, #4]
 255 014c 45F21D72 		movw	r2, #22301
 256 0150 1A80     		strh	r2, [r3, #0]	@ movhi
 170:Libraries/uC-OSIII/os_msg.c ****         return;
 257              		.loc 1 170 0
 258 0152 2CE0     		b	.L8
 259              	.L11:
 171:Libraries/uC-OSIII/os_msg.c ****     }
 172:Libraries/uC-OSIII/os_msg.c **** #endif
 173:Libraries/uC-OSIII/os_msg.c **** 
 174:Libraries/uC-OSIII/os_msg.c ****     OS_MsgPoolCreate(OSCfg_MsgPoolBasePtr,
 260              		.loc 1 174 0
 261 0154 40F20003 		movw	r3, #:lower16:OSCfg_MsgPoolBasePtr
 262 0158 C0F20003 		movt	r3, #:upper16:OSCfg_MsgPoolBasePtr
 263 015c 1A68     		ldr	r2, [r3, #0]
 264 015e 40F20003 		movw	r3, #:lower16:OSCfg_MsgPoolSize
 265 0162 C0F20003 		movt	r3, #:upper16:OSCfg_MsgPoolSize
 266 0166 1B88     		ldrh	r3, [r3, #0]
 267 0168 1046     		mov	r0, r2
 268 016a 1946     		mov	r1, r3
 269 016c FFF7FEFF 		bl	OS_MsgPoolCreate
 175:Libraries/uC-OSIII/os_msg.c ****                     OSCfg_MsgPoolSize);
 176:Libraries/uC-OSIII/os_msg.c ****     OSMsgPool.NextPtr =  OSCfg_MsgPoolBasePtr;
 270              		.loc 1 176 0
 271 0170 40F20003 		movw	r3, #:lower16:OSCfg_MsgPoolBasePtr
 272 0174 C0F20003 		movt	r3, #:upper16:OSCfg_MsgPoolBasePtr
 273 0178 1A68     		ldr	r2, [r3, #0]
 274 017a 40F20003 		movw	r3, #:lower16:OSMsgPool
 275 017e C0F20003 		movt	r3, #:upper16:OSMsgPool
 276 0182 1A60     		str	r2, [r3, #0]
 177:Libraries/uC-OSIII/os_msg.c ****     OSMsgPool.NbrFree =  OSCfg_MsgPoolSize;
 277              		.loc 1 177 0
 278 0184 40F20003 		movw	r3, #:lower16:OSCfg_MsgPoolSize
 279 0188 C0F20003 		movt	r3, #:upper16:OSCfg_MsgPoolSize
 280 018c 1A88     		ldrh	r2, [r3, #0]
 281 018e 40F20003 		movw	r3, #:lower16:OSMsgPool
 282 0192 C0F20003 		movt	r3, #:upper16:OSMsgPool
 283 0196 9A80     		strh	r2, [r3, #4]	@ movhi
 178:Libraries/uC-OSIII/os_msg.c ****     OSMsgPool.NbrUsed = (OS_MSG_QTY)0;
 284              		.loc 1 178 0
 285 0198 40F20003 		movw	r3, #:lower16:OSMsgPool
 286 019c C0F20003 		movt	r3, #:upper16:OSMsgPool
 287 01a0 4FF00002 		mov	r2, #0
 288 01a4 DA80     		strh	r2, [r3, #6]	@ movhi
 179:Libraries/uC-OSIII/os_msg.c ****     *p_err            =  OS_ERR_NONE;
 289              		.loc 1 179 0
 290 01a6 7B68     		ldr	r3, [r7, #4]
 291 01a8 4FF00002 		mov	r2, #0
 292 01ac 1A80     		strh	r2, [r3, #0]	@ movhi
 293              	.L8:
 180:Libraries/uC-OSIII/os_msg.c **** }
 294              		.loc 1 180 0
 295 01ae 07F10807 		add	r7, r7, #8
 296 01b2 BD46     		mov	sp, r7
 297 01b4 80BD     		pop	{r7, pc}
 298              		.cfi_endproc
 299              	.LFE2:
 301 01b6 00BF     		.align	2
 302              		.global	OS_MsgQEntriesPeakReset
 303              		.thumb
 304              		.thumb_func
 306              	OS_MsgQEntriesPeakReset:
 307              	.LFB3:
 181:Libraries/uC-OSIII/os_msg.c **** 
 182:Libraries/uC-OSIII/os_msg.c **** /*$PAGE*/
 183:Libraries/uC-OSIII/os_msg.c **** /*
 184:Libraries/uC-OSIII/os_msg.c **** ***************************************************************************************************
 185:Libraries/uC-OSIII/os_msg.c **** *                                        RESET MESSAGE QUEUE ENTRIES PEAK TRACKING
 186:Libraries/uC-OSIII/os_msg.c **** *
 187:Libraries/uC-OSIII/os_msg.c **** * Description: This function clear the peak detection mechanism of the message queue
 188:Libraries/uC-OSIII/os_msg.c **** *
 189:Libraries/uC-OSIII/os_msg.c **** * Arguments  : p_msg_q       is a pointer to the OS_MSG_Q structure
 190:Libraries/uC-OSIII/os_msg.c **** *              -------
 191:Libraries/uC-OSIII/os_msg.c **** *
 192:Libraries/uC-OSIII/os_msg.c **** * Returns    : none
 193:Libraries/uC-OSIII/os_msg.c **** *
 194:Libraries/uC-OSIII/os_msg.c **** * Note(s)    : 1) This function is INTERNAL to uC/OS-III and your application MUST NOT call it.
 195:Libraries/uC-OSIII/os_msg.c **** ***************************************************************************************************
 196:Libraries/uC-OSIII/os_msg.c **** */
 197:Libraries/uC-OSIII/os_msg.c **** 
 198:Libraries/uC-OSIII/os_msg.c **** void  OS_MsgQEntriesPeakReset (OS_MSG_Q  *p_msg_q)
 199:Libraries/uC-OSIII/os_msg.c **** {
 308              		.loc 1 199 0
 309              		.cfi_startproc
 310              		@ args = 0, pretend = 0, frame = 16
 311              		@ frame_needed = 1, uses_anonymous_args = 0
 312 01b8 80B5     		push	{r7, lr}
 313              	.LCFI9:
 314              		.cfi_def_cfa_offset 8
 315              		.cfi_offset 14, -4
 316              		.cfi_offset 7, -8
 317 01ba 84B0     		sub	sp, sp, #16
 318              	.LCFI10:
 319              		.cfi_def_cfa_offset 24
 320 01bc 00AF     		add	r7, sp, #0
 321              	.LCFI11:
 322              		.cfi_def_cfa_register 7
 323 01be 7860     		str	r0, [r7, #4]
 200:Libraries/uC-OSIII/os_msg.c ****     CPU_SR_ALLOC();
 324              		.loc 1 200 0
 325 01c0 4FF00003 		mov	r3, #0
 326 01c4 FB60     		str	r3, [r7, #12]
 201:Libraries/uC-OSIII/os_msg.c **** 
 202:Libraries/uC-OSIII/os_msg.c **** 
 203:Libraries/uC-OSIII/os_msg.c ****     CPU_CRITICAL_ENTER();
 327              		.loc 1 203 0
 328 01c6 FFF7FEFF 		bl	CPU_SR_Save
 329 01ca F860     		str	r0, [r7, #12]
 330 01cc FFF7FEFF 		bl	CPU_IntDisMeasStart
 204:Libraries/uC-OSIII/os_msg.c ****     p_msg_q->NbrEntriesMax = (OS_MSG_QTY)0;
 331              		.loc 1 204 0
 332 01d0 7B68     		ldr	r3, [r7, #4]
 333 01d2 4FF00002 		mov	r2, #0
 334 01d6 9A81     		strh	r2, [r3, #12]	@ movhi
 205:Libraries/uC-OSIII/os_msg.c ****     CPU_CRITICAL_EXIT();
 335              		.loc 1 205 0
 336 01d8 FFF7FEFF 		bl	CPU_IntDisMeasStop
 337 01dc F868     		ldr	r0, [r7, #12]
 338 01de FFF7FEFF 		bl	CPU_SR_Restore
 206:Libraries/uC-OSIII/os_msg.c **** }
 339              		.loc 1 206 0
 340 01e2 07F11007 		add	r7, r7, #16
 341 01e6 BD46     		mov	sp, r7
 342 01e8 80BD     		pop	{r7, pc}
 343              		.cfi_endproc
 344              	.LFE3:
 346 01ea 00BF     		.align	2
 347              		.global	OS_MsgQFreeAll
 348              		.thumb
 349              		.thumb_func
 351              	OS_MsgQFreeAll:
 352              	.LFB4:
 207:Libraries/uC-OSIII/os_msg.c **** 
 208:Libraries/uC-OSIII/os_msg.c **** /*$PAGE*/
 209:Libraries/uC-OSIII/os_msg.c **** /*
 210:Libraries/uC-OSIII/os_msg.c **** ***************************************************************************************************
 211:Libraries/uC-OSIII/os_msg.c **** *                                        RELEASE ALL MESSAGE IN MESSAGE QUEUE
 212:Libraries/uC-OSIII/os_msg.c **** *
 213:Libraries/uC-OSIII/os_msg.c **** * Description: This function returns all the messages in a message queue to the free list.
 214:Libraries/uC-OSIII/os_msg.c **** *
 215:Libraries/uC-OSIII/os_msg.c **** * Arguments  : p_msg_q       is a pointer to the OS_MSG_Q structure containing messages to free.
 216:Libraries/uC-OSIII/os_msg.c **** *              -------
 217:Libraries/uC-OSIII/os_msg.c **** *
 218:Libraries/uC-OSIII/os_msg.c **** * Returns    : the number of OS_MSGs returned to the free list
 219:Libraries/uC-OSIII/os_msg.c **** *
 220:Libraries/uC-OSIII/os_msg.c **** * Note(s)    : 1) This function is INTERNAL to uC/OS-III and your application MUST NOT call it.
 221:Libraries/uC-OSIII/os_msg.c **** ***************************************************************************************************
 222:Libraries/uC-OSIII/os_msg.c **** */
 223:Libraries/uC-OSIII/os_msg.c **** 
 224:Libraries/uC-OSIII/os_msg.c **** OS_MSG_QTY  OS_MsgQFreeAll (OS_MSG_Q  *p_msg_q)
 225:Libraries/uC-OSIII/os_msg.c **** {
 353              		.loc 1 225 0
 354              		.cfi_startproc
 355              		@ args = 0, pretend = 0, frame = 16
 356              		@ frame_needed = 1, uses_anonymous_args = 0
 357              		@ link register save eliminated.
 358 01ec 80B4     		push	{r7}
 359              	.LCFI12:
 360              		.cfi_def_cfa_offset 4
 361              		.cfi_offset 7, -4
 362 01ee 85B0     		sub	sp, sp, #20
 363              	.LCFI13:
 364              		.cfi_def_cfa_offset 24
 365 01f0 00AF     		add	r7, sp, #0
 366              	.LCFI14:
 367              		.cfi_def_cfa_register 7
 368 01f2 7860     		str	r0, [r7, #4]
 226:Libraries/uC-OSIII/os_msg.c ****     OS_MSG      *p_msg;
 227:Libraries/uC-OSIII/os_msg.c ****     OS_MSG_QTY   qty;
 228:Libraries/uC-OSIII/os_msg.c **** 
 229:Libraries/uC-OSIII/os_msg.c **** 
 230:Libraries/uC-OSIII/os_msg.c **** 
 231:Libraries/uC-OSIII/os_msg.c ****     qty = p_msg_q->NbrEntries;                              /* Get the number of OS_MSGs being free
 369              		.loc 1 231 0
 370 01f4 7B68     		ldr	r3, [r7, #4]
 371 01f6 5B89     		ldrh	r3, [r3, #10]	@ movhi
 372 01f8 FB81     		strh	r3, [r7, #14]	@ movhi
 232:Libraries/uC-OSIII/os_msg.c ****     if (p_msg_q->NbrEntries > (OS_MSG_QTY)0) {
 373              		.loc 1 232 0
 374 01fa 7B68     		ldr	r3, [r7, #4]
 375 01fc 5B89     		ldrh	r3, [r3, #10]
 376 01fe 002B     		cmp	r3, #0
 377 0200 3CD0     		beq	.L14
 233:Libraries/uC-OSIII/os_msg.c ****         p_msg                   = p_msg_q->InPtr;           /* Point to end of message chain       
 378              		.loc 1 233 0
 379 0202 7B68     		ldr	r3, [r7, #4]
 380 0204 1B68     		ldr	r3, [r3, #0]
 381 0206 BB60     		str	r3, [r7, #8]
 234:Libraries/uC-OSIII/os_msg.c ****         p_msg->NextPtr          = OSMsgPool.NextPtr;
 382              		.loc 1 234 0
 383 0208 40F20003 		movw	r3, #:lower16:OSMsgPool
 384 020c C0F20003 		movt	r3, #:upper16:OSMsgPool
 385 0210 1A68     		ldr	r2, [r3, #0]
 386 0212 BB68     		ldr	r3, [r7, #8]
 387 0214 1A60     		str	r2, [r3, #0]
 235:Libraries/uC-OSIII/os_msg.c ****         OSMsgPool.NextPtr       = p_msg_q->OutPtr;          /* Point to beginning of message chain 
 388              		.loc 1 235 0
 389 0216 7B68     		ldr	r3, [r7, #4]
 390 0218 5A68     		ldr	r2, [r3, #4]
 391 021a 40F20003 		movw	r3, #:lower16:OSMsgPool
 392 021e C0F20003 		movt	r3, #:upper16:OSMsgPool
 393 0222 1A60     		str	r2, [r3, #0]
 236:Libraries/uC-OSIII/os_msg.c ****         OSMsgPool.NbrUsed      -= p_msg_q->NbrEntries;      /* Update statistics for free list of m
 394              		.loc 1 236 0
 395 0224 40F20003 		movw	r3, #:lower16:OSMsgPool
 396 0228 C0F20003 		movt	r3, #:upper16:OSMsgPool
 397 022c DA88     		ldrh	r2, [r3, #6]
 398 022e 7B68     		ldr	r3, [r7, #4]
 399 0230 5B89     		ldrh	r3, [r3, #10]
 400 0232 D31A     		subs	r3, r2, r3
 401 0234 9AB2     		uxth	r2, r3
 402 0236 40F20003 		movw	r3, #:lower16:OSMsgPool
 403 023a C0F20003 		movt	r3, #:upper16:OSMsgPool
 404 023e DA80     		strh	r2, [r3, #6]	@ movhi
 237:Libraries/uC-OSIII/os_msg.c ****         OSMsgPool.NbrFree      += p_msg_q->NbrEntries;
 405              		.loc 1 237 0
 406 0240 40F20003 		movw	r3, #:lower16:OSMsgPool
 407 0244 C0F20003 		movt	r3, #:upper16:OSMsgPool
 408 0248 9A88     		ldrh	r2, [r3, #4]
 409 024a 7B68     		ldr	r3, [r7, #4]
 410 024c 5B89     		ldrh	r3, [r3, #10]
 411 024e D318     		adds	r3, r2, r3
 412 0250 9AB2     		uxth	r2, r3
 413 0252 40F20003 		movw	r3, #:lower16:OSMsgPool
 414 0256 C0F20003 		movt	r3, #:upper16:OSMsgPool
 415 025a 9A80     		strh	r2, [r3, #4]	@ movhi
 238:Libraries/uC-OSIII/os_msg.c ****         p_msg_q->NbrEntries     = (OS_MSG_QTY)0;            /* Flush the message queue             
 416              		.loc 1 238 0
 417 025c 7B68     		ldr	r3, [r7, #4]
 418 025e 4FF00002 		mov	r2, #0
 419 0262 5A81     		strh	r2, [r3, #10]	@ movhi
 239:Libraries/uC-OSIII/os_msg.c ****         p_msg_q->NbrEntriesMax  = (OS_MSG_QTY)0;
 420              		.loc 1 239 0
 421 0264 7B68     		ldr	r3, [r7, #4]
 422 0266 4FF00002 		mov	r2, #0
 423 026a 9A81     		strh	r2, [r3, #12]	@ movhi
 240:Libraries/uC-OSIII/os_msg.c ****         p_msg_q->InPtr          = (OS_MSG   *)0;
 424              		.loc 1 240 0
 425 026c 7B68     		ldr	r3, [r7, #4]
 426 026e 4FF00002 		mov	r2, #0
 427 0272 1A60     		str	r2, [r3, #0]
 241:Libraries/uC-OSIII/os_msg.c ****         p_msg_q->OutPtr         = (OS_MSG   *)0;
 428              		.loc 1 241 0
 429 0274 7B68     		ldr	r3, [r7, #4]
 430 0276 4FF00002 		mov	r2, #0
 431 027a 5A60     		str	r2, [r3, #4]
 432              	.L14:
 242:Libraries/uC-OSIII/os_msg.c ****     }
 243:Libraries/uC-OSIII/os_msg.c ****     return (qty);
 433              		.loc 1 243 0
 434 027c FB89     		ldrh	r3, [r7, #14]
 244:Libraries/uC-OSIII/os_msg.c **** }
 435              		.loc 1 244 0
 436 027e 1846     		mov	r0, r3
 437 0280 07F11407 		add	r7, r7, #20
 438 0284 BD46     		mov	sp, r7
 439 0286 80BC     		pop	{r7}
 440 0288 7047     		bx	lr
 441              		.cfi_endproc
 442              	.LFE4:
 444 028a 00BF     		.align	2
 445              		.global	OS_MsgQInit
 446              		.thumb
 447              		.thumb_func
 449              	OS_MsgQInit:
 450              	.LFB5:
 245:Libraries/uC-OSIII/os_msg.c **** 
 246:Libraries/uC-OSIII/os_msg.c **** /*$PAGE*/
 247:Libraries/uC-OSIII/os_msg.c **** /*
 248:Libraries/uC-OSIII/os_msg.c **** ***************************************************************************************************
 249:Libraries/uC-OSIII/os_msg.c **** *                                               INITIALIZE A MESSAGE QUEUE
 250:Libraries/uC-OSIII/os_msg.c **** *
 251:Libraries/uC-OSIII/os_msg.c **** * Description: This function is called to initialize a message queue
 252:Libraries/uC-OSIII/os_msg.c **** *
 253:Libraries/uC-OSIII/os_msg.c **** * Arguments  : p_msg_q      is a pointer to the message queue to initialize
 254:Libraries/uC-OSIII/os_msg.c **** *              -------
 255:Libraries/uC-OSIII/os_msg.c **** *
 256:Libraries/uC-OSIII/os_msg.c **** *              max          is the maximum number of entries that a message queue can have.
 257:Libraries/uC-OSIII/os_msg.c **** *
 258:Libraries/uC-OSIII/os_msg.c **** * Returns    : none
 259:Libraries/uC-OSIII/os_msg.c **** *
 260:Libraries/uC-OSIII/os_msg.c **** * Note(s)    : 1) This function is INTERNAL to uC/OS-III and your application MUST NOT call it.
 261:Libraries/uC-OSIII/os_msg.c **** ***************************************************************************************************
 262:Libraries/uC-OSIII/os_msg.c **** */
 263:Libraries/uC-OSIII/os_msg.c **** 
 264:Libraries/uC-OSIII/os_msg.c **** void  OS_MsgQInit (OS_MSG_Q     *p_msg_q,
 265:Libraries/uC-OSIII/os_msg.c ****                    OS_MSG_QTY    size)
 266:Libraries/uC-OSIII/os_msg.c **** {
 451              		.loc 1 266 0
 452              		.cfi_startproc
 453              		@ args = 0, pretend = 0, frame = 8
 454              		@ frame_needed = 1, uses_anonymous_args = 0
 455              		@ link register save eliminated.
 456 028c 80B4     		push	{r7}
 457              	.LCFI15:
 458              		.cfi_def_cfa_offset 4
 459              		.cfi_offset 7, -4
 460 028e 83B0     		sub	sp, sp, #12
 461              	.LCFI16:
 462              		.cfi_def_cfa_offset 16
 463 0290 00AF     		add	r7, sp, #0
 464              	.LCFI17:
 465              		.cfi_def_cfa_register 7
 466 0292 7860     		str	r0, [r7, #4]
 467 0294 0B46     		mov	r3, r1
 468 0296 7B80     		strh	r3, [r7, #2]	@ movhi
 267:Libraries/uC-OSIII/os_msg.c ****     p_msg_q->NbrEntriesSize = (OS_MSG_QTY)size;
 469              		.loc 1 267 0
 470 0298 7B68     		ldr	r3, [r7, #4]
 471 029a 7A88     		ldrh	r2, [r7, #2]	@ movhi
 472 029c 1A81     		strh	r2, [r3, #8]	@ movhi
 268:Libraries/uC-OSIII/os_msg.c ****     p_msg_q->NbrEntries     = (OS_MSG_QTY)0;
 473              		.loc 1 268 0
 474 029e 7B68     		ldr	r3, [r7, #4]
 475 02a0 4FF00002 		mov	r2, #0
 476 02a4 5A81     		strh	r2, [r3, #10]	@ movhi
 269:Libraries/uC-OSIII/os_msg.c ****     p_msg_q->NbrEntriesMax  = (OS_MSG_QTY)0;
 477              		.loc 1 269 0
 478 02a6 7B68     		ldr	r3, [r7, #4]
 479 02a8 4FF00002 		mov	r2, #0
 480 02ac 9A81     		strh	r2, [r3, #12]	@ movhi
 270:Libraries/uC-OSIII/os_msg.c ****     p_msg_q->InPtr          = (OS_MSG   *)0;
 481              		.loc 1 270 0
 482 02ae 7B68     		ldr	r3, [r7, #4]
 483 02b0 4FF00002 		mov	r2, #0
 484 02b4 1A60     		str	r2, [r3, #0]
 271:Libraries/uC-OSIII/os_msg.c ****     p_msg_q->OutPtr         = (OS_MSG   *)0;
 485              		.loc 1 271 0
 486 02b6 7B68     		ldr	r3, [r7, #4]
 487 02b8 4FF00002 		mov	r2, #0
 488 02bc 5A60     		str	r2, [r3, #4]
 272:Libraries/uC-OSIII/os_msg.c **** }
 489              		.loc 1 272 0
 490 02be 07F10C07 		add	r7, r7, #12
 491 02c2 BD46     		mov	sp, r7
 492 02c4 80BC     		pop	{r7}
 493 02c6 7047     		bx	lr
 494              		.cfi_endproc
 495              	.LFE5:
 497              		.align	2
 498              		.global	OS_MsgQGet
 499              		.thumb
 500              		.thumb_func
 502              	OS_MsgQGet:
 503              	.LFB6:
 273:Libraries/uC-OSIII/os_msg.c **** 
 274:Libraries/uC-OSIII/os_msg.c **** /*$PAGE*/
 275:Libraries/uC-OSIII/os_msg.c **** /*
 276:Libraries/uC-OSIII/os_msg.c **** ***************************************************************************************************
 277:Libraries/uC-OSIII/os_msg.c **** *                                           RETRIEVE MESSAGE FROM MESSAGE QUEUE
 278:Libraries/uC-OSIII/os_msg.c **** *
 279:Libraries/uC-OSIII/os_msg.c **** * Description: This function retrieves a message from a message queue
 280:Libraries/uC-OSIII/os_msg.c **** *
 281:Libraries/uC-OSIII/os_msg.c **** * Arguments  : p_msg_q     is a pointer to the message queue where we want to extract the message f
 282:Libraries/uC-OSIII/os_msg.c **** *              -------
 283:Libraries/uC-OSIII/os_msg.c **** *
 284:Libraries/uC-OSIII/os_msg.c **** *              p_msg_size  is a pointer to where the size (in bytes) of the message will be placed
 285:Libraries/uC-OSIII/os_msg.c **** *
 286:Libraries/uC-OSIII/os_msg.c **** *              p_ts        is a pointer to where the time stamp will be placed
 287:Libraries/uC-OSIII/os_msg.c **** *
 288:Libraries/uC-OSIII/os_msg.c **** *              p_err       is a pointer to an error code that will be returned from this call.
 289:Libraries/uC-OSIII/os_msg.c **** *
 290:Libraries/uC-OSIII/os_msg.c **** *                              OS_ERR_Q_EMPTY
 291:Libraries/uC-OSIII/os_msg.c **** *                              OS_ERR_NONE
 292:Libraries/uC-OSIII/os_msg.c **** *
 293:Libraries/uC-OSIII/os_msg.c **** * Returns    : The message (a pointer)
 294:Libraries/uC-OSIII/os_msg.c **** *
 295:Libraries/uC-OSIII/os_msg.c **** * Note(s)    : 1) This function is INTERNAL to uC/OS-III and your application MUST NOT call it.
 296:Libraries/uC-OSIII/os_msg.c **** ***************************************************************************************************
 297:Libraries/uC-OSIII/os_msg.c **** */
 298:Libraries/uC-OSIII/os_msg.c **** 
 299:Libraries/uC-OSIII/os_msg.c **** void  *OS_MsgQGet (OS_MSG_Q    *p_msg_q,
 300:Libraries/uC-OSIII/os_msg.c ****                    OS_MSG_SIZE *p_msg_size,
 301:Libraries/uC-OSIII/os_msg.c ****                    CPU_TS      *p_ts,
 302:Libraries/uC-OSIII/os_msg.c ****                    OS_ERR      *p_err)
 303:Libraries/uC-OSIII/os_msg.c **** {
 504              		.loc 1 303 0
 505              		.cfi_startproc
 506              		@ args = 0, pretend = 0, frame = 24
 507              		@ frame_needed = 1, uses_anonymous_args = 0
 508              		@ link register save eliminated.
 509 02c8 80B4     		push	{r7}
 510              	.LCFI18:
 511              		.cfi_def_cfa_offset 4
 512              		.cfi_offset 7, -4
 513 02ca 87B0     		sub	sp, sp, #28
 514              	.LCFI19:
 515              		.cfi_def_cfa_offset 32
 516 02cc 00AF     		add	r7, sp, #0
 517              	.LCFI20:
 518              		.cfi_def_cfa_register 7
 519 02ce F860     		str	r0, [r7, #12]
 520 02d0 B960     		str	r1, [r7, #8]
 521 02d2 7A60     		str	r2, [r7, #4]
 522 02d4 3B60     		str	r3, [r7, #0]
 304:Libraries/uC-OSIII/os_msg.c ****     OS_MSG  *p_msg;
 305:Libraries/uC-OSIII/os_msg.c ****     void    *p_void;
 306:Libraries/uC-OSIII/os_msg.c **** 
 307:Libraries/uC-OSIII/os_msg.c **** 
 308:Libraries/uC-OSIII/os_msg.c **** 
 309:Libraries/uC-OSIII/os_msg.c **** #ifdef OS_SAFETY_CRITICAL
 310:Libraries/uC-OSIII/os_msg.c ****     if (p_err == (OS_ERR *)0) {
 311:Libraries/uC-OSIII/os_msg.c ****         OS_SAFETY_CRITICAL_EXCEPTION();
 312:Libraries/uC-OSIII/os_msg.c ****     }
 313:Libraries/uC-OSIII/os_msg.c **** #endif
 314:Libraries/uC-OSIII/os_msg.c **** 
 315:Libraries/uC-OSIII/os_msg.c ****     if (p_msg_q->NbrEntries == (OS_MSG_QTY)0) {
 523              		.loc 1 315 0
 524 02d6 FB68     		ldr	r3, [r7, #12]
 525 02d8 5B89     		ldrh	r3, [r3, #10]
 526 02da 002B     		cmp	r3, #0
 527 02dc 11D1     		bne	.L17
 316:Libraries/uC-OSIII/os_msg.c ****         *p_msg_size = (OS_MSG_SIZE)0;
 528              		.loc 1 316 0
 529 02de BB68     		ldr	r3, [r7, #8]
 530 02e0 4FF00002 		mov	r2, #0
 531 02e4 1A80     		strh	r2, [r3, #0]	@ movhi
 317:Libraries/uC-OSIII/os_msg.c ****         if (p_ts != (CPU_TS *)0) {
 532              		.loc 1 317 0
 533 02e6 7B68     		ldr	r3, [r7, #4]
 534 02e8 002B     		cmp	r3, #0
 535 02ea 03D0     		beq	.L18
 318:Libraries/uC-OSIII/os_msg.c ****            *p_ts  = (CPU_TS)0;
 536              		.loc 1 318 0
 537 02ec 7B68     		ldr	r3, [r7, #4]
 538 02ee 4FF00002 		mov	r2, #0
 539 02f2 1A60     		str	r2, [r3, #0]
 540              	.L18:
 319:Libraries/uC-OSIII/os_msg.c ****         }
 320:Libraries/uC-OSIII/os_msg.c ****         *p_err      = OS_ERR_Q_EMPTY;
 541              		.loc 1 320 0
 542 02f4 3B68     		ldr	r3, [r7, #0]
 543 02f6 46F29252 		movw	r2, #26002
 544 02fa 1A80     		strh	r2, [r3, #0]	@ movhi
 321:Libraries/uC-OSIII/os_msg.c ****         return ((void *)0);
 545              		.loc 1 321 0
 546 02fc 4FF00003 		mov	r3, #0
 547 0300 54E0     		b	.L19
 548              	.L17:
 322:Libraries/uC-OSIII/os_msg.c ****     }
 323:Libraries/uC-OSIII/os_msg.c **** 
 324:Libraries/uC-OSIII/os_msg.c ****     p_msg           = p_msg_q->OutPtr;
 549              		.loc 1 324 0
 550 0302 FB68     		ldr	r3, [r7, #12]
 551 0304 5B68     		ldr	r3, [r3, #4]
 552 0306 7B61     		str	r3, [r7, #20]
 325:Libraries/uC-OSIII/os_msg.c ****     p_void          = p_msg->MsgPtr;
 553              		.loc 1 325 0
 554 0308 7B69     		ldr	r3, [r7, #20]
 555 030a 5B68     		ldr	r3, [r3, #4]
 556 030c 3B61     		str	r3, [r7, #16]
 326:Libraries/uC-OSIII/os_msg.c ****     *p_msg_size     = p_msg->MsgSize;
 557              		.loc 1 326 0
 558 030e 7B69     		ldr	r3, [r7, #20]
 559 0310 1A89     		ldrh	r2, [r3, #8]
 560 0312 BB68     		ldr	r3, [r7, #8]
 561 0314 1A80     		strh	r2, [r3, #0]	@ movhi
 327:Libraries/uC-OSIII/os_msg.c ****     if (p_ts != (CPU_TS *)0) {
 562              		.loc 1 327 0
 563 0316 7B68     		ldr	r3, [r7, #4]
 564 0318 002B     		cmp	r3, #0
 565 031a 03D0     		beq	.L20
 328:Libraries/uC-OSIII/os_msg.c ****        *p_ts  = p_msg->MsgTS;
 566              		.loc 1 328 0
 567 031c 7B69     		ldr	r3, [r7, #20]
 568 031e DA68     		ldr	r2, [r3, #12]
 569 0320 7B68     		ldr	r3, [r7, #4]
 570 0322 1A60     		str	r2, [r3, #0]
 571              	.L20:
 329:Libraries/uC-OSIII/os_msg.c ****     }
 330:Libraries/uC-OSIII/os_msg.c ****     p_msg_q->OutPtr = p_msg->NextPtr;
 572              		.loc 1 330 0
 573 0324 7B69     		ldr	r3, [r7, #20]
 574 0326 1A68     		ldr	r2, [r3, #0]
 575 0328 FB68     		ldr	r3, [r7, #12]
 576 032a 5A60     		str	r2, [r3, #4]
 331:Libraries/uC-OSIII/os_msg.c ****     if (p_msg_q->OutPtr == (OS_MSG *)0) {
 577              		.loc 1 331 0
 578 032c FB68     		ldr	r3, [r7, #12]
 579 032e 5B68     		ldr	r3, [r3, #4]
 580 0330 002B     		cmp	r3, #0
 581 0332 08D1     		bne	.L21
 332:Libraries/uC-OSIII/os_msg.c ****         p_msg_q->InPtr      = (OS_MSG   *)0;
 582              		.loc 1 332 0
 583 0334 FB68     		ldr	r3, [r7, #12]
 584 0336 4FF00002 		mov	r2, #0
 585 033a 1A60     		str	r2, [r3, #0]
 333:Libraries/uC-OSIII/os_msg.c ****         p_msg_q->NbrEntries = (OS_MSG_QTY)0;
 586              		.loc 1 333 0
 587 033c FB68     		ldr	r3, [r7, #12]
 588 033e 4FF00002 		mov	r2, #0
 589 0342 5A81     		strh	r2, [r3, #10]	@ movhi
 590 0344 06E0     		b	.L22
 591              	.L21:
 334:Libraries/uC-OSIII/os_msg.c ****     } else {
 335:Libraries/uC-OSIII/os_msg.c ****         p_msg_q->NbrEntries--;
 592              		.loc 1 335 0
 593 0346 FB68     		ldr	r3, [r7, #12]
 594 0348 5B89     		ldrh	r3, [r3, #10]
 595 034a 03F1FF33 		add	r3, r3, #-1
 596 034e 9AB2     		uxth	r2, r3
 597 0350 FB68     		ldr	r3, [r7, #12]
 598 0352 5A81     		strh	r2, [r3, #10]	@ movhi
 599              	.L22:
 336:Libraries/uC-OSIII/os_msg.c ****     }
 337:Libraries/uC-OSIII/os_msg.c ****     p_msg->NextPtr    = OSMsgPool.NextPtr;                  /* Return message control block to free
 600              		.loc 1 337 0
 601 0354 40F20003 		movw	r3, #:lower16:OSMsgPool
 602 0358 C0F20003 		movt	r3, #:upper16:OSMsgPool
 603 035c 1A68     		ldr	r2, [r3, #0]
 604 035e 7B69     		ldr	r3, [r7, #20]
 605 0360 1A60     		str	r2, [r3, #0]
 338:Libraries/uC-OSIII/os_msg.c ****     OSMsgPool.NextPtr = p_msg;
 606              		.loc 1 338 0
 607 0362 40F20003 		movw	r3, #:lower16:OSMsgPool
 608 0366 C0F20003 		movt	r3, #:upper16:OSMsgPool
 609 036a 7A69     		ldr	r2, [r7, #20]
 610 036c 1A60     		str	r2, [r3, #0]
 339:Libraries/uC-OSIII/os_msg.c ****     OSMsgPool.NbrFree++;
 611              		.loc 1 339 0
 612 036e 40F20003 		movw	r3, #:lower16:OSMsgPool
 613 0372 C0F20003 		movt	r3, #:upper16:OSMsgPool
 614 0376 9B88     		ldrh	r3, [r3, #4]
 615 0378 03F10103 		add	r3, r3, #1
 616 037c 9AB2     		uxth	r2, r3
 617 037e 40F20003 		movw	r3, #:lower16:OSMsgPool
 618 0382 C0F20003 		movt	r3, #:upper16:OSMsgPool
 619 0386 9A80     		strh	r2, [r3, #4]	@ movhi
 340:Libraries/uC-OSIII/os_msg.c ****     OSMsgPool.NbrUsed--;
 620              		.loc 1 340 0
 621 0388 40F20003 		movw	r3, #:lower16:OSMsgPool
 622 038c C0F20003 		movt	r3, #:upper16:OSMsgPool
 623 0390 DB88     		ldrh	r3, [r3, #6]
 624 0392 03F1FF33 		add	r3, r3, #-1
 625 0396 9AB2     		uxth	r2, r3
 626 0398 40F20003 		movw	r3, #:lower16:OSMsgPool
 627 039c C0F20003 		movt	r3, #:upper16:OSMsgPool
 628 03a0 DA80     		strh	r2, [r3, #6]	@ movhi
 341:Libraries/uC-OSIII/os_msg.c ****     *p_err            = OS_ERR_NONE;
 629              		.loc 1 341 0
 630 03a2 3B68     		ldr	r3, [r7, #0]
 631 03a4 4FF00002 		mov	r2, #0
 632 03a8 1A80     		strh	r2, [r3, #0]	@ movhi
 342:Libraries/uC-OSIII/os_msg.c ****     return (p_void);
 633              		.loc 1 342 0
 634 03aa 3B69     		ldr	r3, [r7, #16]
 635              	.L19:
 343:Libraries/uC-OSIII/os_msg.c **** }
 636              		.loc 1 343 0
 637 03ac 1846     		mov	r0, r3
 638 03ae 07F11C07 		add	r7, r7, #28
 639 03b2 BD46     		mov	sp, r7
 640 03b4 80BC     		pop	{r7}
 641 03b6 7047     		bx	lr
 642              		.cfi_endproc
 643              	.LFE6:
 645              		.align	2
 646              		.global	OS_MsgQPut
 647              		.thumb
 648              		.thumb_func
 650              	OS_MsgQPut:
 651              	.LFB7:
 344:Libraries/uC-OSIII/os_msg.c **** 
 345:Libraries/uC-OSIII/os_msg.c **** /*
 346:Libraries/uC-OSIII/os_msg.c **** ***************************************************************************************************
 347:Libraries/uC-OSIII/os_msg.c **** *                                           DEPOSIT MESSAGE IN MESSAGE QUEUE
 348:Libraries/uC-OSIII/os_msg.c **** *
 349:Libraries/uC-OSIII/os_msg.c **** * Description: This function places a message in a message queue
 350:Libraries/uC-OSIII/os_msg.c **** *
 351:Libraries/uC-OSIII/os_msg.c **** * Arguments  : p_msg_q     is a pointer to the OS_TCB of the task to post the message to
 352:Libraries/uC-OSIII/os_msg.c **** *              -------
 353:Libraries/uC-OSIII/os_msg.c **** *
 354:Libraries/uC-OSIII/os_msg.c **** *              p_void      is a pointer to the message to send.
 355:Libraries/uC-OSIII/os_msg.c **** *
 356:Libraries/uC-OSIII/os_msg.c **** *              msg_size    is the size of the message (in bytes)
 357:Libraries/uC-OSIII/os_msg.c **** *
 358:Libraries/uC-OSIII/os_msg.c **** *              opt         specifies whether the message will be posted in FIFO or LIFO order
 359:Libraries/uC-OSIII/os_msg.c **** *
 360:Libraries/uC-OSIII/os_msg.c **** *                              OS_OPT_POST_FIFO
 361:Libraries/uC-OSIII/os_msg.c **** *                              OS_OPT_POST_LIFO
 362:Libraries/uC-OSIII/os_msg.c **** *
 363:Libraries/uC-OSIII/os_msg.c **** *              ts          is a timestamp as to when the message was posted
 364:Libraries/uC-OSIII/os_msg.c **** *
 365:Libraries/uC-OSIII/os_msg.c **** *              p_err       is a pointer to a variable that will contain an error code returned by t
 366:Libraries/uC-OSIII/os_msg.c **** *
 367:Libraries/uC-OSIII/os_msg.c **** *                              OS_ERR_Q_MAX           if the queue is full
 368:Libraries/uC-OSIII/os_msg.c **** *                              OS_ERR_MSG_POOL_EMPTY  if we no longer have any OS_MSG to use
 369:Libraries/uC-OSIII/os_msg.c **** *                              OS_ERR_NONE            the message was deposited in the queue
 370:Libraries/uC-OSIII/os_msg.c **** *
 371:Libraries/uC-OSIII/os_msg.c **** * Returns    : none
 372:Libraries/uC-OSIII/os_msg.c **** *
 373:Libraries/uC-OSIII/os_msg.c **** * Note(s)    : 1) This function is INTERNAL to uC/OS-III and your application MUST NOT call it.
 374:Libraries/uC-OSIII/os_msg.c **** ***************************************************************************************************
 375:Libraries/uC-OSIII/os_msg.c **** */
 376:Libraries/uC-OSIII/os_msg.c **** 
 377:Libraries/uC-OSIII/os_msg.c **** void  OS_MsgQPut (OS_MSG_Q    *p_msg_q,
 378:Libraries/uC-OSIII/os_msg.c ****                   void        *p_void,
 379:Libraries/uC-OSIII/os_msg.c ****                   OS_MSG_SIZE  msg_size,
 380:Libraries/uC-OSIII/os_msg.c ****                   OS_OPT       opt,
 381:Libraries/uC-OSIII/os_msg.c ****                   CPU_TS       ts,
 382:Libraries/uC-OSIII/os_msg.c ****                   OS_ERR      *p_err)
 383:Libraries/uC-OSIII/os_msg.c **** {
 652              		.loc 1 383 0
 653              		.cfi_startproc
 654              		@ args = 8, pretend = 0, frame = 24
 655              		@ frame_needed = 1, uses_anonymous_args = 0
 656              		@ link register save eliminated.
 657 03b8 80B4     		push	{r7}
 658              	.LCFI21:
 659              		.cfi_def_cfa_offset 4
 660              		.cfi_offset 7, -4
 661 03ba 87B0     		sub	sp, sp, #28
 662              	.LCFI22:
 663              		.cfi_def_cfa_offset 32
 664 03bc 00AF     		add	r7, sp, #0
 665              	.LCFI23:
 666              		.cfi_def_cfa_register 7
 667 03be F860     		str	r0, [r7, #12]
 668 03c0 B960     		str	r1, [r7, #8]
 669 03c2 FA80     		strh	r2, [r7, #6]	@ movhi
 670 03c4 BB80     		strh	r3, [r7, #4]	@ movhi
 384:Libraries/uC-OSIII/os_msg.c ****     OS_MSG  *p_msg;
 385:Libraries/uC-OSIII/os_msg.c ****     OS_MSG  *p_msg_in;
 386:Libraries/uC-OSIII/os_msg.c **** 
 387:Libraries/uC-OSIII/os_msg.c **** 
 388:Libraries/uC-OSIII/os_msg.c **** 
 389:Libraries/uC-OSIII/os_msg.c **** #ifdef OS_SAFETY_CRITICAL
 390:Libraries/uC-OSIII/os_msg.c ****     if (p_err == (OS_ERR *)0) {
 391:Libraries/uC-OSIII/os_msg.c ****         OS_SAFETY_CRITICAL_EXCEPTION();
 392:Libraries/uC-OSIII/os_msg.c ****     }
 393:Libraries/uC-OSIII/os_msg.c **** #endif
 394:Libraries/uC-OSIII/os_msg.c **** 
 395:Libraries/uC-OSIII/os_msg.c ****     if (p_msg_q->NbrEntries >= p_msg_q->NbrEntriesSize) {
 671              		.loc 1 395 0
 672 03c6 FB68     		ldr	r3, [r7, #12]
 673 03c8 5A89     		ldrh	r2, [r3, #10]
 674 03ca FB68     		ldr	r3, [r7, #12]
 675 03cc 1B89     		ldrh	r3, [r3, #8]
 676 03ce 9A42     		cmp	r2, r3
 677 03d0 04D3     		bcc	.L24
 396:Libraries/uC-OSIII/os_msg.c ****         *p_err = OS_ERR_Q_MAX;                              /* Message queue cannot accept any more
 678              		.loc 1 396 0
 679 03d2 7B6A     		ldr	r3, [r7, #36]
 680 03d4 46F29352 		movw	r2, #26003
 681 03d8 1A80     		strh	r2, [r3, #0]	@ movhi
 397:Libraries/uC-OSIII/os_msg.c ****         return;
 682              		.loc 1 397 0
 683 03da 79E0     		b	.L23
 684              	.L24:
 398:Libraries/uC-OSIII/os_msg.c ****     }
 399:Libraries/uC-OSIII/os_msg.c **** 
 400:Libraries/uC-OSIII/os_msg.c ****     if (OSMsgPool.NbrFree == (OS_MSG_QTY)0) {
 685              		.loc 1 400 0
 686 03dc 40F20003 		movw	r3, #:lower16:OSMsgPool
 687 03e0 C0F20003 		movt	r3, #:upper16:OSMsgPool
 688 03e4 9B88     		ldrh	r3, [r3, #4]
 689 03e6 002B     		cmp	r3, #0
 690 03e8 04D1     		bne	.L26
 401:Libraries/uC-OSIII/os_msg.c ****         *p_err = OS_ERR_MSG_POOL_EMPTY;                     /* No more OS_MSG to use               
 691              		.loc 1 401 0
 692 03ea 7B6A     		ldr	r3, [r7, #36]
 693 03ec 45F21D72 		movw	r2, #22301
 694 03f0 1A80     		strh	r2, [r3, #0]	@ movhi
 402:Libraries/uC-OSIII/os_msg.c ****         return;
 695              		.loc 1 402 0
 696 03f2 6DE0     		b	.L23
 697              	.L26:
 403:Libraries/uC-OSIII/os_msg.c ****     }
 404:Libraries/uC-OSIII/os_msg.c **** 
 405:Libraries/uC-OSIII/os_msg.c ****     p_msg             = OSMsgPool.NextPtr;                  /* Remove message control block from fr
 698              		.loc 1 405 0
 699 03f4 40F20003 		movw	r3, #:lower16:OSMsgPool
 700 03f8 C0F20003 		movt	r3, #:upper16:OSMsgPool
 701 03fc 1B68     		ldr	r3, [r3, #0]
 702 03fe 7B61     		str	r3, [r7, #20]
 406:Libraries/uC-OSIII/os_msg.c ****     OSMsgPool.NextPtr = p_msg->NextPtr;
 703              		.loc 1 406 0
 704 0400 7B69     		ldr	r3, [r7, #20]
 705 0402 1A68     		ldr	r2, [r3, #0]
 706 0404 40F20003 		movw	r3, #:lower16:OSMsgPool
 707 0408 C0F20003 		movt	r3, #:upper16:OSMsgPool
 708 040c 1A60     		str	r2, [r3, #0]
 407:Libraries/uC-OSIII/os_msg.c ****     OSMsgPool.NbrFree--;
 709              		.loc 1 407 0
 710 040e 40F20003 		movw	r3, #:lower16:OSMsgPool
 711 0412 C0F20003 		movt	r3, #:upper16:OSMsgPool
 712 0416 9B88     		ldrh	r3, [r3, #4]
 713 0418 03F1FF33 		add	r3, r3, #-1
 714 041c 9AB2     		uxth	r2, r3
 715 041e 40F20003 		movw	r3, #:lower16:OSMsgPool
 716 0422 C0F20003 		movt	r3, #:upper16:OSMsgPool
 717 0426 9A80     		strh	r2, [r3, #4]	@ movhi
 408:Libraries/uC-OSIII/os_msg.c ****     OSMsgPool.NbrUsed++;
 718              		.loc 1 408 0
 719 0428 40F20003 		movw	r3, #:lower16:OSMsgPool
 720 042c C0F20003 		movt	r3, #:upper16:OSMsgPool
 721 0430 DB88     		ldrh	r3, [r3, #6]
 722 0432 03F10103 		add	r3, r3, #1
 723 0436 9AB2     		uxth	r2, r3
 724 0438 40F20003 		movw	r3, #:lower16:OSMsgPool
 725 043c C0F20003 		movt	r3, #:upper16:OSMsgPool
 726 0440 DA80     		strh	r2, [r3, #6]	@ movhi
 409:Libraries/uC-OSIII/os_msg.c ****     if (p_msg_q->NbrEntries == (OS_MSG_QTY)0) {             /* Is this first message placed in the 
 727              		.loc 1 409 0
 728 0442 FB68     		ldr	r3, [r7, #12]
 729 0444 5B89     		ldrh	r3, [r3, #10]
 730 0446 002B     		cmp	r3, #0
 731 0448 0AD1     		bne	.L27
 410:Libraries/uC-OSIII/os_msg.c ****         p_msg_q->InPtr         = p_msg;                     /* Yes                                 
 732              		.loc 1 410 0
 733 044a FB68     		ldr	r3, [r7, #12]
 734 044c 7A69     		ldr	r2, [r7, #20]
 735 044e 1A60     		str	r2, [r3, #0]
 411:Libraries/uC-OSIII/os_msg.c ****         p_msg_q->OutPtr        = p_msg;
 736              		.loc 1 411 0
 737 0450 FB68     		ldr	r3, [r7, #12]
 738 0452 7A69     		ldr	r2, [r7, #20]
 739 0454 5A60     		str	r2, [r3, #4]
 412:Libraries/uC-OSIII/os_msg.c ****         p_msg_q->NbrEntries    = (OS_MSG_QTY)1;
 740              		.loc 1 412 0
 741 0456 FB68     		ldr	r3, [r7, #12]
 742 0458 4FF00102 		mov	r2, #1
 743 045c 5A81     		strh	r2, [r3, #10]	@ movhi
 744 045e 20E0     		b	.L28
 745              	.L27:
 413:Libraries/uC-OSIII/os_msg.c ****     } else {
 414:Libraries/uC-OSIII/os_msg.c ****         if ((opt & OS_OPT_POST_LIFO) == OS_OPT_POST_FIFO) { /* Assume FIFO if not LIFO             
 746              		.loc 1 414 0
 747 0460 BB88     		ldrh	r3, [r7, #4]
 748 0462 03F01003 		and	r3, r3, #16
 749 0466 002B     		cmp	r3, #0
 750 0468 0DD1     		bne	.L29
 415:Libraries/uC-OSIII/os_msg.c ****             p_msg_in           = p_msg_q->InPtr;            /* FIFO                                
 751              		.loc 1 415 0
 752 046a FB68     		ldr	r3, [r7, #12]
 753 046c 1B68     		ldr	r3, [r3, #0]
 754 046e 3B61     		str	r3, [r7, #16]
 416:Libraries/uC-OSIII/os_msg.c ****             p_msg_in->NextPtr  = p_msg;
 755              		.loc 1 416 0
 756 0470 3B69     		ldr	r3, [r7, #16]
 757 0472 7A69     		ldr	r2, [r7, #20]
 758 0474 1A60     		str	r2, [r3, #0]
 417:Libraries/uC-OSIII/os_msg.c ****             p_msg->NextPtr     = (OS_MSG *)0;
 759              		.loc 1 417 0
 760 0476 7B69     		ldr	r3, [r7, #20]
 761 0478 4FF00002 		mov	r2, #0
 762 047c 1A60     		str	r2, [r3, #0]
 418:Libraries/uC-OSIII/os_msg.c ****             p_msg_q->InPtr     = p_msg;
 763              		.loc 1 418 0
 764 047e FB68     		ldr	r3, [r7, #12]
 765 0480 7A69     		ldr	r2, [r7, #20]
 766 0482 1A60     		str	r2, [r3, #0]
 767 0484 06E0     		b	.L30
 768              	.L29:
 419:Libraries/uC-OSIII/os_msg.c ****         } else {
 420:Libraries/uC-OSIII/os_msg.c ****             p_msg->NextPtr     = p_msg_q->OutPtr;           /* LIFO                                
 769              		.loc 1 420 0
 770 0486 FB68     		ldr	r3, [r7, #12]
 771 0488 5A68     		ldr	r2, [r3, #4]
 772 048a 7B69     		ldr	r3, [r7, #20]
 773 048c 1A60     		str	r2, [r3, #0]
 421:Libraries/uC-OSIII/os_msg.c ****             p_msg_q->OutPtr    = p_msg;
 774              		.loc 1 421 0
 775 048e FB68     		ldr	r3, [r7, #12]
 776 0490 7A69     		ldr	r2, [r7, #20]
 777 0492 5A60     		str	r2, [r3, #4]
 778              	.L30:
 422:Libraries/uC-OSIII/os_msg.c ****         }
 423:Libraries/uC-OSIII/os_msg.c ****         p_msg_q->NbrEntries++;
 779              		.loc 1 423 0
 780 0494 FB68     		ldr	r3, [r7, #12]
 781 0496 5B89     		ldrh	r3, [r3, #10]
 782 0498 03F10103 		add	r3, r3, #1
 783 049c 9AB2     		uxth	r2, r3
 784 049e FB68     		ldr	r3, [r7, #12]
 785 04a0 5A81     		strh	r2, [r3, #10]	@ movhi
 786              	.L28:
 424:Libraries/uC-OSIII/os_msg.c ****     }
 425:Libraries/uC-OSIII/os_msg.c ****     if (p_msg_q->NbrEntries > p_msg_q->NbrEntriesMax) {
 787              		.loc 1 425 0
 788 04a2 FB68     		ldr	r3, [r7, #12]
 789 04a4 5A89     		ldrh	r2, [r3, #10]
 790 04a6 FB68     		ldr	r3, [r7, #12]
 791 04a8 9B89     		ldrh	r3, [r3, #12]
 792 04aa 9A42     		cmp	r2, r3
 793 04ac 03D9     		bls	.L31
 426:Libraries/uC-OSIII/os_msg.c ****         p_msg_q->NbrEntriesMax = p_msg_q->NbrEntries;
 794              		.loc 1 426 0
 795 04ae FB68     		ldr	r3, [r7, #12]
 796 04b0 5A89     		ldrh	r2, [r3, #10]
 797 04b2 FB68     		ldr	r3, [r7, #12]
 798 04b4 9A81     		strh	r2, [r3, #12]	@ movhi
 799              	.L31:
 427:Libraries/uC-OSIII/os_msg.c ****     }
 428:Libraries/uC-OSIII/os_msg.c ****     p_msg->MsgPtr  = p_void;                                /* Deposit message in the message queue
 800              		.loc 1 428 0
 801 04b6 7B69     		ldr	r3, [r7, #20]
 802 04b8 BA68     		ldr	r2, [r7, #8]
 803 04ba 5A60     		str	r2, [r3, #4]
 429:Libraries/uC-OSIII/os_msg.c ****     p_msg->MsgSize = msg_size;
 804              		.loc 1 429 0
 805 04bc 7B69     		ldr	r3, [r7, #20]
 806 04be FA88     		ldrh	r2, [r7, #6]	@ movhi
 807 04c0 1A81     		strh	r2, [r3, #8]	@ movhi
 430:Libraries/uC-OSIII/os_msg.c ****     p_msg->MsgTS   = ts;
 808              		.loc 1 430 0
 809 04c2 7B69     		ldr	r3, [r7, #20]
 810 04c4 3A6A     		ldr	r2, [r7, #32]
 811 04c6 DA60     		str	r2, [r3, #12]
 431:Libraries/uC-OSIII/os_msg.c ****     *p_err         = OS_ERR_NONE;
 812              		.loc 1 431 0
 813 04c8 7B6A     		ldr	r3, [r7, #36]
 814 04ca 4FF00002 		mov	r2, #0
 815 04ce 1A80     		strh	r2, [r3, #0]	@ movhi
 816              	.L23:
 432:Libraries/uC-OSIII/os_msg.c **** }
 817              		.loc 1 432 0
 818 04d0 07F11C07 		add	r7, r7, #28
 819 04d4 BD46     		mov	sp, r7
 820 04d6 80BC     		pop	{r7}
 821 04d8 7047     		bx	lr
 822              		.cfi_endproc
 823              	.LFE7:
 825              	.Letext0:
 826              		.file 2 "Libraries/uC-CPU/cpu.h"
 827              		.file 3 "Libraries/uC-CPU/cpu_core.h"
 828              		.file 4 "Libraries/uC-OSIII/os_type.h"
 829              		.file 5 "Libraries/uC-OSIII/os.h"
DEFINED SYMBOLS
                            *ABS*:00000000 os_msg.c
     /tmp/ccbYWIac.s:18     .text:00000000 $t
     /tmp/ccbYWIac.s:23     .text:00000000 OSMsgPoolExtend
     /tmp/ccbYWIac.s:114    .text:00000088 OS_MsgPoolCreate
     /tmp/ccbYWIac.s:216    .text:0000011c OS_MsgPoolInit
     /tmp/ccbYWIac.s:306    .text:000001b8 OS_MsgQEntriesPeakReset
     /tmp/ccbYWIac.s:351    .text:000001ec OS_MsgQFreeAll
     /tmp/ccbYWIac.s:449    .text:0000028c OS_MsgQInit
     /tmp/ccbYWIac.s:502    .text:000002c8 OS_MsgQGet
     /tmp/ccbYWIac.s:650    .text:000003b8 OS_MsgQPut
                     .debug_frame:00000010 $d

UNDEFINED SYMBOLS
OSMsgPool
OSCfg_MsgPoolBasePtr
OSCfg_MsgPoolSize
CPU_SR_Save
CPU_IntDisMeasStart
CPU_IntDisMeasStop
CPU_SR_Restore
